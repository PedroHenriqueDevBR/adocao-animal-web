(self.webpackChunkanimal_adoption_frontend=self.webpackChunkanimal_adoption_frontend||[]).push([[945],{3036:function(to){to.exports=function(){"use strict";function On(y,C,O,D,L){!function Z(F,K,P,et,G){for(;et>P;){if(et-P>600){var it=et-P+1,lt=K-P+1,Ne=Math.log(it),ve=.5*Math.exp(2*Ne/3),ge=.5*Math.sqrt(Ne*ve*(it-ve)/it)*(lt-it/2<0?-1:1);Z(F,K,Math.max(P,Math.floor(K-lt*ve/it+ge)),Math.min(et,Math.floor(K+(it-lt)*ve/it+ge)),G)}var oe=F[K],be=P,It=et;for(ht(F,P,K),G(F[et],oe)>0&&ht(F,P,et);be<It;){for(ht(F,be,It),be++,It--;G(F[be],oe)<0;)be++;for(;G(F[It],oe)>0;)It--}0===G(F[P],oe)?ht(F,P,It):ht(F,++It,et),It<=K&&(P=It+1),K<=It&&(et=It-1)}}(y,C,O||0,D||y.length-1,L||vt)}function ht(y,C,O){var D=y[C];y[C]=y[O],y[O]=D}function vt(y,C){return y<C?-1:y>C?1:0}var $=function(y){void 0===y&&(y=9),this._maxEntries=Math.max(4,y),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function oi(y,C,O){if(!O)return C.indexOf(y);for(var D=0;D<C.length;D++)if(O(y,C[D]))return D;return-1}function ne(y,C){Ze(y,0,y.children.length,C,y)}function Ze(y,C,O,D,L){L||(L=De(null)),L.minX=1/0,L.minY=1/0,L.maxX=-1/0,L.maxY=-1/0;for(var Z=C;Z<O;Z++){var F=y.children[Z];ie(L,y.leaf?D(F):F)}return L}function ie(y,C){return y.minX=Math.min(y.minX,C.minX),y.minY=Math.min(y.minY,C.minY),y.maxX=Math.max(y.maxX,C.maxX),y.maxY=Math.max(y.maxY,C.maxY),y}function eo(y,C){return y.minX-C.minX}function re(y,C){return y.minY-C.minY}function ai(y){return(y.maxX-y.minX)*(y.maxY-y.minY)}function _e(y){return y.maxX-y.minX+(y.maxY-y.minY)}function In(y,C){return y.minX<=C.minX&&y.minY<=C.minY&&C.maxX<=y.maxX&&C.maxY<=y.maxY}function Fe(y,C){return C.minX<=y.maxX&&C.minY<=y.maxY&&C.maxX>=y.minX&&C.maxY>=y.minY}function De(y){return{children:y,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ji(y,C,O,D,L){for(var Z=[C,O];Z.length;)if(!((O=Z.pop())-(C=Z.pop())<=D)){var F=C+Math.ceil((O-C)/D/2)*D;On(y,F,C,O,L),Z.push(C,F,F,O)}}return $.prototype.all=function(){return this._all(this.data,[])},$.prototype.search=function(y){var C=this.data,O=[];if(!Fe(y,C))return O;for(var D=this.toBBox,L=[];C;){for(var Z=0;Z<C.children.length;Z++){var F=C.children[Z],K=C.leaf?D(F):F;Fe(y,K)&&(C.leaf?O.push(F):In(y,K)?this._all(F,O):L.push(F))}C=L.pop()}return O},$.prototype.collides=function(y){var C=this.data;if(!Fe(y,C))return!1;for(var O=[];C;){for(var D=0;D<C.children.length;D++){var L=C.children[D],Z=C.leaf?this.toBBox(L):L;if(Fe(y,Z)){if(C.leaf||In(y,Z))return!0;O.push(L)}}C=O.pop()}return!1},$.prototype.load=function(y){if(!y||!y.length)return this;if(y.length<this._minEntries){for(var C=0;C<y.length;C++)this.insert(y[C]);return this}var O=this._build(y.slice(),0,y.length-1,0);if(this.data.children.length)if(this.data.height===O.height)this._splitRoot(this.data,O);else{if(this.data.height<O.height){var D=this.data;this.data=O,O=D}this._insert(O,this.data.height-O.height-1,!0)}else this.data=O;return this},$.prototype.insert=function(y){return y&&this._insert(y,this.data.height-1),this},$.prototype.clear=function(){return this.data=De([]),this},$.prototype.remove=function(y,C){if(!y)return this;for(var O,D,L,Z=this.data,F=this.toBBox(y),K=[],P=[];Z||K.length;){if(Z||(Z=K.pop(),D=K[K.length-1],O=P.pop(),L=!0),Z.leaf){var et=oi(y,Z.children,C);if(-1!==et)return Z.children.splice(et,1),K.push(Z),this._condense(K),this}L||Z.leaf||!In(Z,F)?D?(O++,Z=D.children[O],L=!1):Z=null:(K.push(Z),P.push(O),O=0,D=Z,Z=Z.children[0])}return this},$.prototype.toBBox=function(y){return y},$.prototype.compareMinX=function(y,C){return y.minX-C.minX},$.prototype.compareMinY=function(y,C){return y.minY-C.minY},$.prototype.toJSON=function(){return this.data},$.prototype.fromJSON=function(y){return this.data=y,this},$.prototype._all=function(y,C){for(var O=[];y;)y.leaf?C.push.apply(C,y.children):O.push.apply(O,y.children),y=O.pop();return C},$.prototype._build=function(y,C,O,D){var L,Z=O-C+1,F=this._maxEntries;if(Z<=F)return ne(L=De(y.slice(C,O+1)),this.toBBox),L;D||(D=Math.ceil(Math.log(Z)/Math.log(F)),F=Math.ceil(Z/Math.pow(F,D-1))),(L=De([])).leaf=!1,L.height=D;var K=Math.ceil(Z/F),P=K*Math.ceil(Math.sqrt(F));Ji(y,C,O,P,this.compareMinX);for(var et=C;et<=O;et+=P){var G=Math.min(et+P-1,O);Ji(y,et,G,K,this.compareMinY);for(var it=et;it<=G;it+=K){var lt=Math.min(it+K-1,G);L.children.push(this._build(y,it,lt,D-1))}}return ne(L,this.toBBox),L},$.prototype._chooseSubtree=function(y,C,O,D){for(;D.push(C),!C.leaf&&D.length-1!==O;){for(var L=1/0,Z=1/0,F=void 0,K=0;K<C.children.length;K++){var P=C.children[K],et=ai(P),G=(it=y,lt=P,(Math.max(lt.maxX,it.maxX)-Math.min(lt.minX,it.minX))*(Math.max(lt.maxY,it.maxY)-Math.min(lt.minY,it.minY))-et);G<Z?(Z=G,L=et<L?et:L,F=P):G===Z&&et<L&&(L=et,F=P)}C=F||C.children[0]}var it,lt;return C},$.prototype._insert=function(y,C,O){var D=O?y:this.toBBox(y),L=[],Z=this._chooseSubtree(D,this.data,C,L);for(Z.children.push(y),ie(Z,D);C>=0&&L[C].children.length>this._maxEntries;)this._split(L,C),C--;this._adjustParentBBoxes(D,L,C)},$.prototype._split=function(y,C){var O=y[C],D=O.children.length,L=this._minEntries;this._chooseSplitAxis(O,L,D);var Z=this._chooseSplitIndex(O,L,D),F=De(O.children.splice(Z,O.children.length-Z));F.height=O.height,F.leaf=O.leaf,ne(O,this.toBBox),ne(F,this.toBBox),C?y[C-1].children.push(F):this._splitRoot(O,F)},$.prototype._splitRoot=function(y,C){this.data=De([y,C]),this.data.height=y.height+1,this.data.leaf=!1,ne(this.data,this.toBBox)},$.prototype._chooseSplitIndex=function(y,C,O){for(var D,L,Z,F,K,P,et,G=1/0,it=1/0,lt=C;lt<=O-C;lt++){var Ne=Ze(y,0,lt,this.toBBox),ve=Ze(y,lt,O,this.toBBox),ge=(L=Ne,Z=ve,void 0,void 0,void 0,void 0,F=Math.max(L.minX,Z.minX),K=Math.max(L.minY,Z.minY),P=Math.min(L.maxX,Z.maxX),et=Math.min(L.maxY,Z.maxY),Math.max(0,P-F)*Math.max(0,et-K)),me=ai(Ne)+ai(ve);ge<G?(G=ge,D=lt,it=me<it?me:it):ge===G&&me<it&&(it=me,D=lt)}return D||O-C},$.prototype._chooseSplitAxis=function(y,C,O){var D=y.leaf?this.compareMinX:eo,L=y.leaf?this.compareMinY:re;this._allDistMargin(y,C,O,D)<this._allDistMargin(y,C,O,L)&&y.children.sort(D)},$.prototype._allDistMargin=function(y,C,O,D){y.children.sort(D);for(var L=this.toBBox,Z=Ze(y,0,C,L),F=Ze(y,O-C,O,L),K=_e(Z)+_e(F),P=C;P<O-C;P++){var et=y.children[P];ie(Z,y.leaf?L(et):et),K+=_e(Z)}for(var G=O-C-1;G>=C;G--){var it=y.children[G];ie(F,y.leaf?L(it):it),K+=_e(F)}return K},$.prototype._adjustParentBBoxes=function(y,C,O){for(var D=O;D>=0;D--)ie(C[D],y)},$.prototype._condense=function(y){for(var C=y.length-1,O=void 0;C>=0;C--)0===y[C].children.length?C>0?(O=y[C-1].children).splice(O.indexOf(y[C]),1):this.clear():ne(y[C],this.toBBox)},$}()},5945:(to,On,ht)=>{"use strict";ht.r(On),ht.d(On,{MainModule:()=>$p});var vt=ht(8583),$=ht(6779);function oi(r,n,t,e,i,o,a){try{var l=r[o](a),u=l.value}catch(c){return void t(c)}l.done?n(u):Promise.resolve(u).then(e,i)}function ne(r){return function(){var n=this,t=arguments;return new Promise(function(e,i){var o=r.apply(n,t);function a(u){oi(o,e,i,a,l,"next",u)}function l(u){oi(o,e,i,a,l,"throw",u)}a(void 0)})}}const ie=function(){function r(){this.disposed=!1}return r.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},r.prototype.disposeInternal=function(){},r}();function re(r,n){return r>n?1:r<n?-1:0}function _e(r,n,t){var e=r.length;if(r[0]<=n)return 0;if(n<=r[e-1])return e-1;var i=void 0;if(t>0){for(i=1;i<e;++i)if(r[i]<n)return i-1}else if(t<0){for(i=1;i<e;++i)if(r[i]<=n)return i}else for(i=1;i<e;++i){if(r[i]==n)return i;if(r[i]<n)return"function"==typeof t?t(n,r[i-1],r[i])>0?i-1:i:r[i-1]-n<n-r[i]?i-1:i}return e-1}function In(r,n,t){for(;n<t;){var e=r[n];r[n]=r[t],r[t]=e,++n,--t}}function Fe(r,n){for(var t=Array.isArray(n)?n:[n],e=t.length,i=0;i<e;i++)r[r.length]=t[i]}function y(r,n){var t=r.length;if(t!==n.length)return!1;for(var e=0;e<t;e++)if(r[e]!==n[e])return!1;return!0}function L(){return!0}function Z(){return!1}function F(){}function P(){return function(){throw new Error("Unimplemented abstract method.")}()}var et=0;function G(r){return r.ol_uid||(r.ol_uid=String(++et))}var r,lt="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",Ne=-1!==lt.indexOf("firefox"),ge=(-1!==lt.indexOf("safari")&&lt.indexOf("chrom"),-1!==lt.indexOf("webkit")&&-1==lt.indexOf("edge")),me=-1!==lt.indexOf("macintosh"),si="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,oe="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,be="undefined"!=typeof Image&&Image.prototype.decode,It=function(){var r=!1;try{var n=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("_",null,n),window.removeEventListener("_",null,n)}catch(t){}return r}(),Cs=(r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)},function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});const no=function(r){function n(t){var e=this,o="Assertion failed. See https://openlayers.org/en/v"+"6.9.0".split("-")[0]+"/doc/errors/#"+t+" for details.";return(e=r.call(this,o)||this).code=t,e.name="AssertionError",e.message=o,e}return Cs(n,r),n}(Error);function Q(r,n){if(!r)throw new no(n)}var io;function mt(r,n){var t=n[0],e=n[1];return n[0]=r[0]*t+r[2]*e+r[4],n[1]=r[1]*t+r[3]*e+r[5],n}function Vt(r,n,t,e,i,o,a,l){var u=Math.sin(o),c=Math.cos(o);return r[0]=e*c,r[1]=i*u,r[2]=-e*u,r[3]=i*c,r[4]=a*e*c-l*e*u+n,r[5]=a*i*u+l*i*c+t,r}function li(r,n){var t=function(r){return r[0]*r[3]-r[1]*r[2]}(n);Q(0!==t,32);var e=n[0],i=n[1],o=n[2],a=n[3],l=n[4],u=n[5];return r[0]=a/t,r[1]=-i/t,r[2]=-o/t,r[3]=e/t,r[4]=(o*u-a*l)/t,r[5]=-(e*u-i*l)/t,r}function tr(r){var n="matrix("+r.join(", ")+")";if(oe)return n;var t=io||(io=document.createElement("div"));return t.style.transform=n,t.style.transform}new Array(6);function ro(r){for(var n=[1/0,1/0,-1/0,-1/0],t=0,e=r.length;t<e;++t)nn(n,r[t]);return n}function er(r,n,t){return t?(t[0]=r[0]-n,t[1]=r[1]-n,t[2]=r[2]+n,t[3]=r[3]+n,t):[r[0]-n,r[1]-n,r[2]+n,r[3]+n]}function oo(r,n){return n?(n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n):r.slice()}function ao(r,n,t){var e,i;return(e=n<r[0]?r[0]-n:r[2]<n?n-r[2]:0)*e+(i=t<r[1]?r[1]-t:r[3]<t?t-r[3]:0)*i}function ui(r,n){return so(r,n[0],n[1])}function tn(r,n){return r[0]<=n[0]&&n[2]<=r[2]&&r[1]<=n[1]&&n[3]<=r[3]}function so(r,n,t){return r[0]<=n&&n<=r[2]&&r[1]<=t&&t<=r[3]}function nr(r,n){var a=n[0],l=n[1],u=0;return a<r[0]?u|=16:a>r[2]&&(u|=4),l<r[1]?u|=8:l>r[3]&&(u|=2),0===u&&(u=1),u}function zt(r,n,t,e,i){return i?(i[0]=r,i[1]=n,i[2]=t,i[3]=e,i):[r,n,t,e]}function en(r){return zt(1/0,1/0,-1/0,-1/0,r)}function Pn(r,n){return r[0]==n[0]&&r[2]==n[2]&&r[1]==n[1]&&r[3]==n[3]}function nn(r,n){n[0]<r[0]&&(r[0]=n[0]),n[0]>r[2]&&(r[2]=n[0]),n[1]<r[1]&&(r[1]=n[1]),n[1]>r[3]&&(r[3]=n[1])}function uo(r,n,t,e,i){for(;t<e;t+=i)Zs(r,n[t],n[t+1]);return r}function Zs(r,n,t){r[0]=Math.min(r[0],n),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],n),r[3]=Math.max(r[3],t)}function co(r,n){var t;return!!((t=n(hi(r)))||(t=n(fi(r)),t)||(t=n(di(r)),t)||(t=n(ke(r)),t))&&t}function ci(r){var n=0;return rr(r)||(n=ft(r)*Dt(r)),n}function hi(r){return[r[0],r[1]]}function fi(r){return[r[2],r[1]]}function rn(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function Fs(r,n){var t;return"bottom-left"===n?t=hi(r):"bottom-right"===n?t=fi(r):"top-left"===n?t=ke(r):"top-right"===n?t=di(r):Q(!1,13),t}function ir(r,n,t,e,i){var o=n*e[0]/2,a=n*e[1]/2,l=Math.cos(t),u=Math.sin(t),c=o*l,h=o*u,d=a*l,f=a*u,p=r[0],_=r[1],v=p-c+f,g=p-c-f,x=p+c-f,E=p+c+f,m=_-h-d,T=_-h+d,A=_+h+d,S=_+h-d;return zt(Math.min(v,g,x,E),Math.min(m,T,A,S),Math.max(v,g,x,E),Math.max(m,T,A,S),i)}function Dt(r){return r[3]-r[1]}function on(r,n,t){var e=t||[1/0,1/0,-1/0,-1/0];return Mt(r,n)?(e[0]=r[0]>n[0]?r[0]:n[0],e[1]=r[1]>n[1]?r[1]:n[1],e[2]=r[2]<n[2]?r[2]:n[2],e[3]=r[3]<n[3]?r[3]:n[3]):en(e),e}function ke(r){return[r[0],r[3]]}function di(r){return[r[2],r[3]]}function ft(r){return r[2]-r[0]}function Mt(r,n){return r[0]<=n[2]&&r[2]>=n[0]&&r[1]<=n[3]&&r[3]>=n[1]}function rr(r){return r[2]<r[0]||r[3]<r[1]}function gt(r,n,t){return Math.min(Math.max(r,n),t)}var Gs="cosh"in Math?Math.cosh:function(n){var t=Math.exp(n);return(t+1/t)/2},Us="log2"in Math?Math.log2:function(n){return Math.log(n)*Math.LOG2E};function qs(r,n,t,e,i,o){var a=i-t,l=o-e;if(0!==a||0!==l){var u=((r-t)*a+(n-e)*l)/(a*a+l*l);u>1?(t=i,e=o):u>0&&(t+=a*u,e+=l*u)}return an(r,n,t,e)}function an(r,n,t,e){var i=t-r,o=e-n;return i*i+o*o}function pi(r){return r*Math.PI/180}function sn(r,n){var t=r%n;return t*n<0?t+n:t}function Ge(r,n,t){return r+t*(n-r)}var ho=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,fo=/^([a-z]*)$|^hsla?\(.*\)$/i;function po(r){return"string"==typeof r?r:mo(r)}var n,t,js=(n={},t=0,function(e){var i;if(n.hasOwnProperty(e))i=n[e];else{if(t>=1024){var o=0;for(var a in n)0==(3&o++)&&(delete n[a],--t)}i=function(r){var n,t,e,i,o;if(fo.exec(r)&&(r=function(r){var n=document.createElement("div");if(n.style.color=r,""!==n.style.color){document.body.appendChild(n);var t=getComputedStyle(n).color;return document.body.removeChild(n),t}return""}(r)),ho.exec(r)){var l,a=r.length-1;l=a<=4?1:2;var u=4===a||8===a;n=parseInt(r.substr(1+0*l,l),16),t=parseInt(r.substr(1+1*l,l),16),e=parseInt(r.substr(1+2*l,l),16),i=u?parseInt(r.substr(1+3*l,l),16):255,1==l&&(n=(n<<4)+n,t=(t<<4)+t,e=(e<<4)+e,u&&(i=(i<<4)+i)),o=[n,t,e,i/255]}else 0==r.indexOf("rgba(")?go(o=r.slice(5,-1).split(",").map(Number)):0==r.indexOf("rgb(")?((o=r.slice(4,-1).split(",").map(Number)).push(1),go(o)):Q(!1,14);return o}(e),n[e]=i,++t}return i});function vo(r){return Array.isArray(r)?r:js(r)}function go(r){return r[0]=gt(r[0]+.5|0,0,255),r[1]=gt(r[1]+.5|0,0,255),r[2]=gt(r[2]+.5|0,0,255),r[3]=gt(r[3],0,1),r}function mo(r){var n=r[0];n!=(0|n)&&(n=n+.5|0);var t=r[1];t!=(0|t)&&(t=t+.5|0);var e=r[2];return e!=(0|e)&&(e=e+.5|0),"rgba("+n+","+t+","+e+","+(void 0===r[3]?1:r[3])+")"}function yo(r,n,t){return n+":"+r+":"+(t?po(t):"null")}var _i=new(function(){function r(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return r.prototype.clear=function(){this.cache_={},this.cacheSize_=0},r.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},r.prototype.expire=function(){if(this.canExpireCache()){var n=0;for(var t in this.cache_)0==(3&n++)&&!this.cache_[t].hasListener()&&(delete this.cache_[t],--this.cacheSize_)}},r.prototype.get=function(n,t,e){var i=yo(n,t,e);return i in this.cache_?this.cache_[i]:null},r.prototype.set=function(n,t,e,i){var o=yo(n,t,e);this.cache_[o]=i,++this.cacheSize_},r.prototype.setSize=function(n){this.maxCacheSize_=n,this.expire()},r}());const ye=function(){function r(n){this.type=n,this.target=null}return r.prototype.preventDefault=function(){this.defaultPrevented=!0},r.prototype.stopPropagation=function(){this.propagationStopped=!0},r}();var Et="function"==typeof Object.assign?Object.assign:function(r,n){if(null==r)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),e=1,i=arguments.length;e<i;++e){var o=arguments[e];if(null!=o)for(var a in o)o.hasOwnProperty(a)&&(t[a]=o[a])}return t};function Mn(r){for(var n in r)delete r[n]}var Eo="function"==typeof Object.values?Object.values:function(r){var n=[];for(var t in r)n.push(r[t]);return n};function Ln(r){var n;for(n in r)return!1;return!n}var Vs=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const ln=function(r){function n(t){var e=r.call(this)||this;return e.eventTarget_=t,e.pendingRemovals_=null,e.dispatching_=null,e.listeners_=null,e}return Vs(n,r),n.prototype.addEventListener=function(t,e){if(t&&e){var i=this.listeners_||(this.listeners_={}),o=i[t]||(i[t]=[]);-1===o.indexOf(e)&&o.push(e)}},n.prototype.dispatchEvent=function(t){var e="string"==typeof t?new ye(t):t,i=e.type;e.target||(e.target=this.eventTarget_||this);var a,o=this.listeners_&&this.listeners_[i];if(o){var l=this.dispatching_||(this.dispatching_={}),u=this.pendingRemovals_||(this.pendingRemovals_={});i in l||(l[i]=0,u[i]=0),++l[i];for(var c=0,h=o.length;c<h;++c)if(!1===(a="handleEvent"in o[c]?o[c].handleEvent(e):o[c].call(this,e))||e.propagationStopped){a=!1;break}if(--l[i],0===l[i]){var d=u[i];for(delete u[i];d--;)this.removeEventListener(i,F);delete l[i]}return a}},n.prototype.disposeInternal=function(){this.listeners_&&Mn(this.listeners_)},n.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},n.prototype.hasListener=function(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)},n.prototype.removeEventListener=function(t,e){var i=this.listeners_&&this.listeners_[t];if(i){var o=i.indexOf(e);-1!==o&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[o]=F,++this.pendingRemovals_[t]):(i.splice(o,1),0===i.length&&delete this.listeners_[t]))}},n}(ie);function rt(r,n,t,e,i){if(e&&e!==r&&(t=t.bind(e)),i){var o=t;t=function(){r.removeEventListener(n,t),o.apply(this,arguments)}}var a={target:r,type:n,listener:t};return r.addEventListener(n,t),a}function vi(r,n,t,e){return rt(r,n,t,e,!0)}function ct(r){r&&r.target&&(r.target.removeEventListener(r.type,r.listener),Mn(r))}var Hs=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const To=function(r){function n(){var t=r.call(this)||this;return t.on=t.onInternal,t.once=t.onceInternal,t.un=t.unInternal,t.revision_=0,t}return Hs(n,r),n.prototype.changed=function(){++this.revision_,this.dispatchEvent("change")},n.prototype.getRevision=function(){return this.revision_},n.prototype.onInternal=function(t,e){if(Array.isArray(t)){for(var i=t.length,o=new Array(i),a=0;a<i;++a)o[a]=rt(this,t[a],e);return o}return rt(this,t,e)},n.prototype.onceInternal=function(t,e){var i;if(Array.isArray(t)){var o=t.length;i=new Array(o);for(var a=0;a<o;++a)i[a]=vi(this,t[a],e)}else i=vi(this,t,e);return e.ol_key=i,i},n.prototype.unInternal=function(t,e){var i=e.ol_key;if(i)!function(r){if(Array.isArray(r))for(var n=0,t=r.length;n<t;++n)ct(r[n]);else ct(r)}(i);else if(Array.isArray(t))for(var o=0,a=t.length;o<a;++o)this.removeEventListener(t[o],e);else this.removeEventListener(t,e)},n}(ln);var xo=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Co=function(r){function n(t,e,i){var o=r.call(this,t)||this;return o.key=e,o.oldValue=i,o}return xo(n,r),n}(ye);const Ht=function(r){function n(t){var e=r.call(this)||this;return G(e),e.values_=null,void 0!==t&&e.setProperties(t),e}return xo(n,r),n.prototype.get=function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},n.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},n.prototype.getProperties=function(){return this.values_&&Et({},this.values_)||{}},n.prototype.hasProperties=function(){return!!this.values_},n.prototype.notify=function(t,e){this.dispatchEvent(new Co("change:"+t,t,e)),this.dispatchEvent(new Co("propertychange",t,e))},n.prototype.addChangeListener=function(t,e){this.addEventListener("change:"+t,e)},n.prototype.removeChangeListener=function(t,e){this.removeEventListener("change:"+t,e)},n.prototype.set=function(t,e,i){var o=this.values_||(this.values_={});if(i)o[t]=e;else{var a=o[t];o[t]=e,a!==e&&this.notify(t,a)}},n.prototype.setProperties=function(t,e){for(var i in t)this.set(i,t[i],e)},n.prototype.applyProperties=function(t){!t.values_||Et(this.values_||(this.values_={}),t.values_)},n.prototype.unset=function(t,e){if(this.values_&&t in this.values_){var i=this.values_[t];delete this.values_[t],Ln(this.values_)&&(this.values_=null),e||this.notify(t,i)}},n}(To);var Qs=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ao=function(r){function n(t){var e=r.call(this)||this,i=Et({},t);return"object"==typeof t.properties&&(delete i.properties,Et(i,t.properties)),i.opacity=void 0!==t.opacity?t.opacity:1,Q("number"==typeof i.opacity,64),i.visible=void 0===t.visible||t.visible,i.zIndex=t.zIndex,i.maxResolution=void 0!==t.maxResolution?t.maxResolution:1/0,i.minResolution=void 0!==t.minResolution?t.minResolution:0,i.minZoom=void 0!==t.minZoom?t.minZoom:-1/0,i.maxZoom=void 0!==t.maxZoom?t.maxZoom:1/0,e.className_=void 0!==i.className?t.className:"ol-layer",delete i.className,e.setProperties(i),e.state_=null,e}return Qs(n,r),n.prototype.getClassName=function(){return this.className_},n.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},i=this.getZIndex();return e.opacity=gt(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==i||e.managed?i:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},n.prototype.getLayersArray=function(t){return P()},n.prototype.getLayerStatesArray=function(t){return P()},n.prototype.getExtent=function(){return this.get("extent")},n.prototype.getMaxResolution=function(){return this.get("maxResolution")},n.prototype.getMinResolution=function(){return this.get("minResolution")},n.prototype.getMinZoom=function(){return this.get("minZoom")},n.prototype.getMaxZoom=function(){return this.get("maxZoom")},n.prototype.getOpacity=function(){return this.get("opacity")},n.prototype.getSourceState=function(){return P()},n.prototype.getVisible=function(){return this.get("visible")},n.prototype.getZIndex=function(){return this.get("zIndex")},n.prototype.setExtent=function(t){this.set("extent",t)},n.prototype.setMaxResolution=function(t){this.set("maxResolution",t)},n.prototype.setMinResolution=function(t){this.set("minResolution",t)},n.prototype.setMaxZoom=function(t){this.set("maxZoom",t)},n.prototype.setMinZoom=function(t){this.set("minZoom",t)},n.prototype.setOpacity=function(t){Q("number"==typeof t,64),this.set("opacity",t)},n.prototype.setVisible=function(t){this.set("visible",t)},n.prototype.setZIndex=function(t){this.set("zIndex",t)},n.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),r.prototype.disposeInternal.call(this)},n}(Ht);var tl=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();function mi(r,n){if(!r.visible)return!1;var t=n.resolution;if(t<r.minResolution||t>=r.maxResolution)return!1;var e=n.zoom;return e>r.minZoom&&e<=r.maxZoom}const wo=function(r){function n(t){var e=this,i=Et({},t);return delete i.source,(e=r.call(this,i)||this).mapPrecomposeKey_=null,e.mapRenderKey_=null,e.sourceChangeKey_=null,e.renderer_=null,t.render&&(e.render=t.render),t.map&&e.setMap(t.map),e.addChangeListener("source",e.handleSourcePropertyChange_),e.setSource(t.source?t.source:null),e}return tl(n,r),n.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},n.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},n.prototype.getSource=function(){return this.get("source")||null},n.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():"undefined"},n.prototype.handleSourceChange_=function(){this.changed()},n.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(ct(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=rt(t,"change",this.handleSourceChange_,this)),this.changed()},n.prototype.getFeatures=function(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise(function(e){return e([])})},n.prototype.render=function(t,e){var i=this.getRenderer();if(i.prepareFrame(t))return i.renderFrame(t,e)},n.prototype.setMap=function(t){this.mapPrecomposeKey_&&(ct(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(ct(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=rt(t,"precompose",function(e){var o=e.frameState.layerStatesArray,a=this.getLayerState(!1);Q(!o.some(function(l){return l.layer===a.layer}),67),o.push(a)},this),this.mapRenderKey_=rt(this,"change",t.render,t),this.changed())},n.prototype.setSource=function(t){this.set("source",t)},n.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},n.prototype.hasRenderer=function(){return!!this.renderer_},n.prototype.createRenderer=function(){return null},n.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),r.prototype.disposeInternal.call(this)},n}(Ao);function or(r,n){for(var t=!0,e=r.length-1;e>=0;--e)if(r[e]!=n[e]){t=!1;break}return t}function ar(r,n){var t=Math.cos(n),e=Math.sin(n),o=r[1]*t+r[0]*e;return r[0]=r[0]*t-r[1]*e,r[1]=o,r}function Ro(r,n){if(n.canWrapX()){var t=ft(n.getExtent()),e=function(r,n,t){var e=n.getExtent(),i=0;if(n.canWrapX()&&(r[0]<e[0]||r[0]>e[2])){var o=t||ft(e);i=Math.floor((r[0]-e[0])/o)}return i}(r,n,t);e&&(r[0]-=e*t)}return r}var ll=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();function cl(r,n){_i.expire()}const hl=function(r){function n(t){var e=r.call(this)||this;return e.map_=t,e}return ll(n,r),n.prototype.dispatchRenderEvent=function(t,e){P()},n.prototype.calculateMatrices2D=function(t){var e=t.viewState,i=t.coordinateToPixelTransform,o=t.pixelToCoordinateTransform;Vt(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),li(o,i)},n.prototype.forEachFeatureAtCoordinate=function(t,e,i,o,a,l,u,c){var h,d=e.viewState;function f(B,V,j,nt){return a.call(l,V,B?j:null,nt)}var p=d.projection,_=Ro(t.slice(),p),v=[[0,0]];if(p.canWrapX()&&o){var x=ft(p.getExtent());v.push([-x,0],[x,0])}for(var E=e.layerStatesArray,m=E.length,T=[],A=[],S=0;S<v.length;S++)for(var I=m-1;I>=0;--I){var R=E[I],M=R.layer;if(M.hasRenderer()&&mi(R,d)&&u.call(c,M)){var k=M.getRenderer(),N=M.getSource();if(k&&N){var W=N.getWrapX()?_:t,U=f.bind(null,R.managed);A[0]=W[0]+v[S][0],A[1]=W[1]+v[S][1],h=k.forEachFeatureAtCoordinate(A,e,i,U,T)}if(h)return h}}if(0!==T.length){var J=1/T.length;return T.forEach(function(B,V){return B.distanceSq+=V*J}),T.sort(function(B,V){return B.distanceSq-V.distanceSq}),T.some(function(B){return h=B.callback(B.feature,B.layer,B.geometry)}),h}},n.prototype.forEachLayerAtPixel=function(t,e,i,o,a){return P()},n.prototype.hasFeatureAtCoordinate=function(t,e,i,o,a,l){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,o,L,this,a,l)},n.prototype.getMap=function(){return this.map_},n.prototype.renderFrame=function(t){P()},n.prototype.scheduleExpireIconCache=function(t){_i.canExpireCache()&&t.postRenderFunctions.push(cl)},n}(ie);var fl=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const So=function(r){function n(t,e,i,o){var a=r.call(this,t)||this;return a.inversePixelTransform=e,a.frameState=i,a.context=o,a}return fl(n,r),n}(ye);var yi="ol-hidden",Ei="ol-unselectable",sr="ol-control",Po="ol-collapsed",pl=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Mo=["style","variant","weight","size","lineHeight","family"],Lo=function(r){var n=r.match(pl);if(!n)return null;for(var t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},e=0,i=Mo.length;e<i;++e){var o=n[e+1];void 0!==o&&(t[Mo[e]]=o)}return t.families=t.family.split(/,\s?/),t};function lr(r){return 1===r?"":String(Math.round(100*r)/100)}function Nt(r,n,t,e){var i;return t&&t.length?i=t.shift():oe?i=new OffscreenCanvas(r||300,n||300):(i=document.createElement("canvas")).style.all="unset",r&&(i.width=r),n&&(i.height=n),i.getContext("2d",e)}function Zo(r,n){var t=n.parentNode;t&&t.replaceChild(r,n)}function ur(r){return r&&r.parentNode?r.parentNode.removeChild(r):null}var Fo="10px sans-serif",ae="#000",Ti="round",Zn=[],un="round",Nn="#000",bn="center",xi="middle",je=[0,0,0,0],se=new Ht;(new ln).setSize=function(){console.warn("labelCache is deprecated.")};var cr,cn=null,hr={},ml=function(){var o,a,n="32px ",t=["monospace","serif"],e=t.length,i="wmytzilWMYTZIL@#/&?$%10\uf013";function l(c,h,d){for(var f=!0,p=0;p<e;++p){var _=t[p];if(a=Ci(c+" "+h+" "+n+_,i),d!=_){var v=Ci(c+" "+h+" "+n+d+","+_,i);f=f&&v!=a}}return!!f}function u(){for(var c=!0,h=se.getKeys(),d=0,f=h.length;d<f;++d){var p=h[d];se.get(p)<100&&(l.apply(this,p.split("\n"))?(Mn(hr),cn=null,cr=void 0,se.set(p,100)):(se.set(p,se.get(p)+1,!0),c=!1))}c&&(clearInterval(o),o=void 0)}return function(c){var h=Lo(c);if(h)for(var d=h.families,f=0,p=d.length;f<p;++f){var _=d[f],v=h.style+"\n"+h.weight+"\n"+_;void 0===se.get(v)&&(se.set(v,100,!0),l(h.style,h.weight,_)||(se.set(v,0,!0),void 0===o&&(o=setInterval(u,32))))}}}(),yl=function(){var r;return function(n){var t=hr[n];if(null==t){if(oe){var e=Lo(n),i=Do(n,"\u017dg");t=(isNaN(Number(e.lineHeight))?1.2:Number(e.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else r||((r=document.createElement("div")).innerHTML="M",r.style.minHeight="0",r.style.maxHeight="none",r.style.height="auto",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.display="block",r.style.left="-99999px"),r.style.font=n,document.body.appendChild(r),t=r.offsetHeight,document.body.removeChild(r);hr[n]=t}return t}}();function Do(r,n){return cn||(cn=Nt(1,1)),r!=cr&&(cn.font=r,cr=cn.font),cn.measureText(n)}function Ci(r,n){return Do(r,n).width}function No(r,n,t){if(n in t)return t[n];var e=Ci(r,n);return t[n]=e,e}var Cl=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const wl=function(r){function n(t){var e=r.call(this,t)||this;e.fontChangeListenerKey_=rt(se,"propertychange",t.redrawText.bind(t)),e.element_=document.createElement("div");var i=e.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",e.element_.className=Ei+" ol-layers";var o=t.getViewport();return o.insertBefore(e.element_,o.firstChild||null),e.children_=[],e.renderedVisible_=!0,e}return Cl(n,r),n.prototype.dispatchRenderEvent=function(t,e){var i=this.getMap();if(i.hasListener(t)){var o=new So(t,void 0,e);i.dispatchEvent(o)}},n.prototype.disposeInternal=function(){ct(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),r.prototype.disposeInternal.call(this)},n.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent("precompose",t);var e=t.layerStatesArray.sort(function(f,p){return f.zIndex-p.zIndex}),i=t.viewState;this.children_.length=0;for(var o=[],a=null,l=0,u=e.length;l<u;++l){var c=e[l];if(t.layerIndex=l,mi(c,i)&&("ready"==c.sourceState||"undefined"==c.sourceState)){var h=c.layer,d=h.render(t,a);!d||(d!==a&&(this.children_.push(d),a=d),"getDeclutter"in h&&o.push(h))}}for(l=o.length-1;l>=0;--l)o[l].renderDeclutter(t);(function(r,n){for(var t=r.childNodes,e=0;;++e){var i=t[e],o=n[e];if(!i&&!o)break;if(i!==o){if(!i){r.appendChild(o);continue}if(!o){r.removeChild(i),--e;continue}r.insertBefore(o,i)}}})(this.element_,this.children_),this.dispatchRenderEvent("postcompose",t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},n.prototype.forEachLayerAtPixel=function(t,e,i,o,a){for(var l=e.viewState,u=e.layerStatesArray,h=u.length-1;h>=0;--h){var d=u[h],f=d.layer;if(f.hasRenderer()&&mi(d,l)&&a(f)){var _=f.getRenderer().getDataAtPixel(t,e,i);if(_){var v=o(f,_);if(v)return v}}}},n}(hl);var bo=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ai=function(r){function n(t,e,i){var o=r.call(this,t)||this;return o.element=e,o.index=i,o}return bo(n,r),n}(ye);const bt=function(r){function n(t,e){var i=r.call(this)||this;if(i.unique_=!!(e||{}).unique,i.array_=t||[],i.unique_)for(var a=0,l=i.array_.length;a<l;++a)i.assertUnique_(i.array_[a],a);return i.updateLength_(),i}return bo(n,r),n.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},n.prototype.extend=function(t){for(var e=0,i=t.length;e<i;++e)this.push(t[e]);return this},n.prototype.forEach=function(t){for(var e=this.array_,i=0,o=e.length;i<o;++i)t(e[i],i,e)},n.prototype.getArray=function(){return this.array_},n.prototype.item=function(t){return this.array_[t]},n.prototype.getLength=function(){return this.get("length")},n.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Ai("add",e,t))},n.prototype.pop=function(){return this.removeAt(this.getLength()-1)},n.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},n.prototype.remove=function(t){for(var e=this.array_,i=0,o=e.length;i<o;++i)if(e[i]===t)return this.removeAt(i)},n.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Ai("remove",e,t)),e},n.prototype.setAt=function(t,e){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(e,t);var o=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Ai("remove",o,t)),this.dispatchEvent(new Ai("add",e,t))}else{for(var a=i;a<t;++a)this.insertAt(a,void 0);this.insertAt(t,e)}},n.prototype.updateLength_=function(){this.set("length",this.array_.length)},n.prototype.assertUnique_=function(t,e){for(var i=0,o=this.array_.length;i<o;++i)if(this.array_[i]===t&&i!==e)throw new no(58)},n}(Ht);var Il=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const Sl=function(r){function n(t){var e=this,i=t||{},o=Et({},i);delete o.layers;var a=i.layers;return(e=r.call(this,o)||this).layersListenerKeys_=[],e.listenerKeys_={},e.addChangeListener("layers",e.handleLayersChanged_),a?Array.isArray(a)?a=new bt(a.slice(),{unique:!0}):Q("function"==typeof a.getArray,43):a=new bt(void 0,{unique:!0}),e.setLayers(a),e}return Il(n,r),n.prototype.handleLayerChange_=function(){this.changed()},n.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(ct),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(rt(t,"add",this.handleLayersAdd_,this),rt(t,"remove",this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(ct);Mn(this.listenerKeys_);for(var i=t.getArray(),o=0,a=i.length;o<a;o++){var l=i[o];this.listenerKeys_[G(l)]=[rt(l,"propertychange",this.handleLayerChange_,this),rt(l,"change",this.handleLayerChange_,this)]}this.changed()},n.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[G(e)]=[rt(e,"propertychange",this.handleLayerChange_,this),rt(e,"change",this.handleLayerChange_,this)],this.changed()},n.prototype.handleLayersRemove_=function(t){var i=G(t.element);this.listenerKeys_[i].forEach(ct),delete this.listenerKeys_[i],this.changed()},n.prototype.getLayers=function(){return this.get("layers")},n.prototype.setLayers=function(t){this.set("layers",t)},n.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach(function(i){i.getLayersArray(e)}),e},n.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],i=e.length;this.getLayers().forEach(function(h){h.getLayerStatesArray(e)});var o=this.getLayerState(),a=o.zIndex;!t&&void 0===o.zIndex&&(a=0);for(var l=i,u=e.length;l<u;l++){var c=e[l];c.opacity*=o.opacity,c.visible=c.visible&&o.visible,c.maxResolution=Math.min(c.maxResolution,o.maxResolution),c.minResolution=Math.max(c.minResolution,o.minResolution),c.minZoom=Math.max(c.minZoom,o.minZoom),c.maxZoom=Math.min(c.maxZoom,o.maxZoom),void 0!==o.extent&&(c.extent=void 0!==c.extent?on(c.extent,o.extent):o.extent),void 0===c.zIndex&&(c.zIndex=a)}return e},n.prototype.getSourceState=function(){return"ready"},n}(Ao);var Pl=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const wi=function(r){function n(t,e,i){var o=r.call(this,t)||this;return o.map=e,o.frameState=void 0!==i?i:null,o}return Pl(n,r),n}(ye);var Ll=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ee=function(r){function n(t,e,i,o,a){var l=r.call(this,t,e,a)||this;return l.originalEvent=i,l.pixel_=null,l.coordinate_=null,l.dragging=void 0!==o&&o,l}return Ll(n,r),Object.defineProperty(n.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),n.prototype.preventDefault=function(){r.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},n.prototype.stopPropagation=function(){r.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},n}(wi),ut={SINGLECLICK:"singleclick",CLICK:"click",DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var Fl=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const Nl=function(r){function n(t,e){var i=r.call(this,t)||this;i.map_=t,i.emulateClicks_=!1,i.dragging_=!1,i.dragListenerKeys_=[],i.moveTolerance_=void 0===e?1:e,i.down_=null;var o=i.map_.getViewport();return i.activePointers_=0,i.trackedTouches_={},i.element_=o,i.pointerdownListenerKey_=rt(o,"pointerdown",i.handlePointerDown_,i),i.relayedListenerKey_=rt(o,"pointermove",i.relayEvent_,i),i.boundHandleTouchMove_=i.handleTouchMove_.bind(i),i.element_.addEventListener("touchmove",i.boundHandleTouchMove_,!!It&&{passive:!1}),i}return Fl(n,r),n.prototype.emulateClick_=function(t){var e=new Ee(ut.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Ee(ut.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var i=new Ee(ut.SINGLECLICK,this.map_,t);this.dispatchEvent(i)}.bind(this),250)},n.prototype.updateActivePointers_=function(t){var e=t;e.type==ut.POINTERUP||e.type==ut.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==ut.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},n.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new Ee(ut.POINTERUP,this.map_,t);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(ct),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},n.prototype.isMouseActionButton_=function(t){return 0===t.button},n.prototype.handlePointerDown_=function(t){this.emulateClicks_=0===this.activePointers_,this.updateActivePointers_(t);var e=new Ee(ut.POINTERDOWN,this.map_,t);for(var i in this.dispatchEvent(e),this.down_={},t){var o=t[i];this.down_[i]="function"==typeof o?F:o}if(0===this.dragListenerKeys_.length){var a=this.map_.getOwnerDocument();this.dragListenerKeys_.push(rt(a,ut.POINTERMOVE,this.handlePointerMove_,this),rt(a,ut.POINTERUP,this.handlePointerUp_,this),rt(this.element_,ut.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==a&&this.dragListenerKeys_.push(rt(this.element_.getRootNode(),ut.POINTERUP,this.handlePointerUp_,this))}},n.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new Ee(ut.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},n.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new Ee(t.type,this.map_,t,e))},n.prototype.handleTouchMove_=function(t){var e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&("boolean"!=typeof t.cancelable||!0===t.cancelable)&&t.preventDefault()},n.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},n.prototype.disposeInternal=function(){this.relayedListenerKey_&&(ct(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener("touchmove",this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ct(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ct),this.dragListenerKeys_.length=0,this.element_=null,r.prototype.disposeInternal.call(this)},n}(ln);var Ii=1/0;const kl=function(){function r(n,t){this.priorityFunction_=n,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return r.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Mn(this.queuedElements_)},r.prototype.dequeue=function(){var n=this.elements_,t=this.priorities_,e=n[0];1==n.length?(n.length=0,t.length=0):(n[0]=n.pop(),t[0]=t.pop(),this.siftUp_(0));var i=this.keyFunction_(e);return delete this.queuedElements_[i],e},r.prototype.enqueue=function(n){Q(!(this.keyFunction_(n)in this.queuedElements_),31);var t=this.priorityFunction_(n);return t!=Ii&&(this.elements_.push(n),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(n)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},r.prototype.getCount=function(){return this.elements_.length},r.prototype.getLeftChildIndex_=function(n){return 2*n+1},r.prototype.getRightChildIndex_=function(n){return 2*n+2},r.prototype.getParentIndex_=function(n){return n-1>>1},r.prototype.heapify_=function(){var n;for(n=(this.elements_.length>>1)-1;n>=0;n--)this.siftUp_(n)},r.prototype.isEmpty=function(){return 0===this.elements_.length},r.prototype.isKeyQueued=function(n){return n in this.queuedElements_},r.prototype.isQueued=function(n){return this.isKeyQueued(this.keyFunction_(n))},r.prototype.siftUp_=function(n){for(var t=this.elements_,e=this.priorities_,i=t.length,o=t[n],a=e[n],l=n;n<i>>1;){var u=this.getLeftChildIndex_(n),c=this.getRightChildIndex_(n),h=c<i&&e[c]<e[u]?c:u;t[n]=t[h],e[n]=e[h],n=h}t[n]=o,e[n]=a,this.siftDown_(l,n)},r.prototype.siftDown_=function(n,t){for(var e=this.elements_,i=this.priorities_,o=e[t],a=i[t];t>n;){var l=this.getParentIndex_(t);if(!(i[l]>a))break;e[t]=e[l],i[t]=i[l],t=l}e[t]=o,i[t]=a},r.prototype.reprioritize=function(){var a,l,u,n=this.priorityFunction_,t=this.elements_,e=this.priorities_,i=0,o=t.length;for(l=0;l<o;++l)(u=n(a=t[l]))==Ii?delete this.queuedElements_[this.keyFunction_(a)]:(e[i]=u,t[i++]=a);t.length=i,e.length=i,this.heapify_()},r}();var Gl=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const ql=function(r){function n(t,e){var i=r.call(this,function(o){return t.apply(null,o)},function(o){return o[0].getKey()})||this;return i.boundHandleTileChange_=i.handleTileChange.bind(i),i.tileChangeCallback_=e,i.tilesLoading_=0,i.tilesLoadingKeys_={},i}return Gl(n,r),n.prototype.enqueue=function(t){var e=r.prototype.enqueue.call(this,t);return e&&t[0].addEventListener("change",this.boundHandleTileChange_),e},n.prototype.getTilesLoading=function(){return this.tilesLoading_},n.prototype.handleTileChange=function(t){var e=t.target,i=e.getState();if(2===i||3===i||4===i){e.removeEventListener("change",this.boundHandleTileChange_);var o=e.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}},n.prototype.loadMoreTiles=function(t,e){for(var a,l,i=0;this.tilesLoading_<t&&i<e&&this.getCount()>0;)l=(a=this.dequeue()[0]).getKey(),0===a.getState()&&!(l in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[l]=!0,++this.tilesLoading_,++i,a.load())},n}(kl);var jt={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},kt={};kt[jt.RADIANS]=6370997/(2*Math.PI),kt[jt.DEGREES]=2*Math.PI*6370997/360,kt[jt.FEET]=.3048,kt[jt.METERS]=1,kt[jt.USFEET]=1200/3937;const Te=jt,Go=function(){function r(n){this.code_=n.code,this.units_=n.units,this.extent_=void 0!==n.extent?n.extent:null,this.worldExtent_=void 0!==n.worldExtent?n.worldExtent:null,this.axisOrientation_=void 0!==n.axisOrientation?n.axisOrientation:"enu",this.global_=void 0!==n.global&&n.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=n.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=n.metersPerUnit}return r.prototype.canWrapX=function(){return this.canWrapX_},r.prototype.getCode=function(){return this.code_},r.prototype.getExtent=function(){return this.extent_},r.prototype.getUnits=function(){return this.units_},r.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||kt[this.units_]},r.prototype.getWorldExtent=function(){return this.worldExtent_},r.prototype.getAxisOrientation=function(){return this.axisOrientation_},r.prototype.isGlobal=function(){return this.global_},r.prototype.setGlobal=function(n){this.global_=n,this.canWrapX_=!(!n||!this.extent_)},r.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},r.prototype.setDefaultTileGrid=function(n){this.defaultTileGrid_=n},r.prototype.setExtent=function(n){this.extent_=n,this.canWrapX_=!(!this.global_||!n)},r.prototype.setWorldExtent=function(n){this.worldExtent_=n},r.prototype.setGetPointResolution=function(n){this.getPointResolutionFunc_=n},r.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},r}();var Wl=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gn=6378137,hn=Math.PI*Gn,Vl=[-hn,-hn,hn,hn],zl=[-180,-85,180,85],Ri=Gn*Math.log(Math.tan(Math.PI/2)),fn=function(r){function n(t){return r.call(this,{code:t,units:Te.METERS,extent:Vl,global:!0,worldExtent:zl,getPointResolution:function(e,i){return e/Gs(i[1]/Gn)}})||this}return Wl(n,r),n}(Go),Uo=[new fn("EPSG:3857"),new fn("EPSG:102100"),new fn("EPSG:102113"),new fn("EPSG:900913"),new fn("http://www.opengis.net/def/crs/EPSG/0/3857"),new fn("http://www.opengis.net/gml/srs/epsg.xml#3857")];var Jl=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),qo=[-180,-90,180,90],$l=6378137*Math.PI/180,Be=function(r){function n(t,e){return r.call(this,{code:t,units:Te.DEGREES,extent:qo,axisOrientation:e,global:!0,metersPerUnit:$l,worldExtent:qo})||this}return Jl(n,r),n}(Go),Yo=[new Be("CRS:84"),new Be("EPSG:4326","neu"),new Be("urn:ogc:def:crs:OGC:1.3:CRS84"),new Be("urn:ogc:def:crs:OGC:2:84"),new Be("http://www.opengis.net/def/crs/OGC/1.3/CRS84","neu"),new Be("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Be("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],Si={},Bt={};function Pi(r,n,t){var e=r.getCode(),i=n.getCode();e in Bt||(Bt[e]={}),Bt[e][i]=t}function _r(r,n,t){var e=t||6371008.8,i=pi(r[1]),o=pi(n[1]),a=(o-i)/2,l=pi(n[0]-r[0])/2,u=Math.sin(a)*Math.sin(a)+Math.sin(l)*Math.sin(l)*Math.cos(i)*Math.cos(o);return 2*e*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}function gr(r,n,t){var e;if(void 0!==n){for(var i=0,o=r.length;i<o;++i)n[i]=r[i];e=n}else e=r.slice();return e}function jo(r,n,t){if(void 0!==n&&r!==n){for(var e=0,i=r.length;e<i;++e)n[e]=r[e];r=n}return r}function ou(r){(function(r,n){Si[r]=n})(r.getCode(),r),Pi(r,r,gr)}function At(r){return"string"==typeof r?function(r){return Si[r]||Si[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(r):r||null}function Bo(r,n,t,e){var i,o=(r=At(r)).getPointResolutionFunc();if(o)i=o(n,t),e&&e!==r.getUnits()&&(a=r.getMetersPerUnit())&&(i=i*a/kt[e]);else{var l=r.getUnits();if(l==Te.DEGREES&&!e||e==Te.DEGREES)i=n;else{var a,u=Un(r,At("EPSG:4326"));if(u===jo&&l!==Te.DEGREES)i=n*r.getMetersPerUnit();else{var c=[t[0]-n/2,t[1],t[0]+n/2,t[1],t[0],t[1]-n/2,t[0],t[1]+n/2];i=(_r((c=u(c,c,2)).slice(0,2),c.slice(2,4))+_r(c.slice(4,6),c.slice(6,8)))/2}void 0!==(a=e?kt[e]:r.getMetersPerUnit())&&(i/=a)}}return i}function Xo(r){(function(r){r.forEach(ou)})(r),r.forEach(function(n){r.forEach(function(t){n!==t&&Pi(n,t,gr)})})}function mr(r,n){return r?"string"==typeof r?At(r):r:At(n)}function yr(r,n){return Yn(r,"EPSG:4326",void 0!==n?n:"EPSG:3857")}function dn(r,n){if(r===n)return!0;var t=r.getUnits()===n.getUnits();return(r.getCode()===n.getCode()||Un(r,n)===gr)&&t}function Un(r,n){var i=function(r,n){var t;return r in Bt&&n in Bt[r]&&(t=Bt[r][n]),t}(r.getCode(),n.getCode());return i||(i=jo),i}function qn(r,n){return Un(At(r),At(n))}function Yn(r,n,t){return qn(n,t)(r,void 0,r.length)}var wt=null;function zo(){return wt}function Er(r,n){return r}function le(r,n){return r}function Tr(r,n){return r}function Xe(r,n){return r}function uu(r,n){return r}function Ho(r,n,t){return function(e,i,o,a,l){if(e){var u=n?0:o[0]*i,c=n?0:o[1]*i,h=l?l[0]:0,d=l?l[1]:0,f=r[0]+u/2+h,p=r[2]-u/2+h,_=r[1]+c/2+d,v=r[3]-c/2+d;f>p&&(p=f=(p+f)/2),_>v&&(v=_=(v+_)/2);var g=gt(e[0],f,p),x=gt(e[1],_,v),E=30*i;return a&&t&&(g+=-E*Math.log(1+Math.max(0,f-e[0])/E)+E*Math.log(1+Math.max(0,e[0]-p)/E),x+=-E*Math.log(1+Math.max(0,_-e[1])/E)+E*Math.log(1+Math.max(0,e[1]-v)/E)),[g,x]}}}function hu(r){return r}function xr(r,n,t,e){var i=ft(n)/t[0],o=Dt(n)/t[1];return e?Math.min(r,Math.max(i,o)):Math.min(r,Math.min(i,o))}function Cr(r,n,t){var e=Math.min(r,n);return e*=Math.log(1+50*Math.max(0,r/n-1))/50+1,t&&(e=Math.max(e,t),e/=Math.log(1+50*Math.max(0,t/r-1))/50+1),gt(e,t/2,2*n)}function Ko(r,n,t,e,i){return function(o,a,l,u){if(void 0!==o){var c=e?xr(r,e,l,i):r;return(void 0===t||t)&&u?Cr(o,c,n):gt(o,n,c)}}}function Ar(r){if(void 0!==r)return 0}function Jo(r){if(void 0!==r)return r}function Qo(r){return Math.pow(r,3)}function pn(r){return 1-Qo(1-r)}function wr(r){return 3*r*r-2*r*r*r}function vu(r){return r}Xo(Uo),Xo(Yo),function(r,n,t,e){r.forEach(function(i){n.forEach(function(o){Pi(i,o,t),Pi(o,i,e)})})}(Yo,Uo,function(r,n,t){var e=r.length,i=t>1?t:2,o=n;void 0===o&&(o=i>2?r.slice():new Array(e));for(var a=0;a<e;a+=i){o[a]=hn*r[a]/180;var l=Gn*Math.log(Math.tan(Math.PI*(+r[a+1]+90)/360));l>Ri?l=Ri:l<-Ri&&(l=-Ri),o[a+1]=l}return o},function(r,n,t){var e=r.length,i=t>1?t:2,o=n;void 0===o&&(o=i>2?r.slice():new Array(e));for(var a=0;a<e;a+=i)o[a]=180*r[a]/hn,o[a+1]=360*Math.atan(Math.exp(r[a+1]/Gn))/Math.PI-90;return o});function We(r,n,t,e,i,o){for(var a=o||[],l=0,u=n;u<t;u+=e){var c=r[u],h=r[u+1];a[l++]=i[0]*c+i[2]*h+i[4],a[l++]=i[1]*c+i[3]*h+i[5]}return o&&a.length!=l&&(a.length=l),a}function $o(r,n,t,e,i,o,a){for(var l=a||[],u=Math.cos(i),c=Math.sin(i),h=o[0],d=o[1],f=0,p=n;p<t;p+=e){var _=r[p]-h,v=r[p+1]-d;l[f++]=h+_*u-v*c,l[f++]=d+_*c+v*u;for(var g=p+2;g<p+e;++g)l[f++]=r[g]}return a&&l.length!=f&&(l.length=f),l}var yu=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),ta=[1,0,0,1,0,0];const Tu=function(r){function n(){var t=r.call(this)||this;return t.extent_=[1/0,1/0,-1/0,-1/0],t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=function(r){var t,e,i,n=!1;return function(){var o=Array.prototype.slice.call(arguments);return(!n||this!==i||!y(o,e))&&(n=!0,i=this,e=o,t=r.apply(this,arguments)),t}}(function(e,i,o){if(!o)return this.getSimplifiedGeometry(i);var a=this.clone();return a.applyTransform(o),a.getSimplifiedGeometry(i)}),t}return yu(n,r),n.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},n.prototype.clone=function(){return P()},n.prototype.closestPointXY=function(t,e,i,o){return P()},n.prototype.containsXY=function(t,e){var i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e},n.prototype.getClosestPoint=function(t,e){var i=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},n.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},n.prototype.computeExtent=function(t){return P()},n.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&en(e),this.extentRevision_=this.getRevision()}return function(r,n){return n?(n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n):r}(this.extent_,t)},n.prototype.rotate=function(t,e){P()},n.prototype.scale=function(t,e,i){P()},n.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},n.prototype.getSimplifiedGeometry=function(t){return P()},n.prototype.getType=function(){return P()},n.prototype.applyTransform=function(t){P()},n.prototype.intersectsExtent=function(t){return P()},n.prototype.translate=function(t,e){P()},n.prototype.transform=function(t,e){var i=At(t),o=i.getUnits()==Te.TILE_PIXELS?function(a,l,u){var c=i.getExtent(),h=i.getWorldExtent(),d=Dt(h)/Dt(c);return Vt(ta,h[0],h[3],d,-d,0,0,0),We(a,0,a.length,u,ta,l),qn(i,e)(a,l,u)}:qn(i,e);return this.applyTransform(o),this},n}(Ht);var xu=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();function ea(r){var n;return"XY"==r?n=2:"XYZ"==r||"XYM"==r?n=3:"XYZM"==r&&(n=4),n}const Or=function(r){function n(){var t=r.call(this)||this;return t.layout="XY",t.stride=2,t.flatCoordinates=null,t}return xu(n,r),n.prototype.computeExtent=function(t){return function(r,n,t,e,i){return uo(en(i),r,0,t,e)}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.getCoordinates=function(){return P()},n.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},n.prototype.getFlatCoordinates=function(){return this.flatCoordinates},n.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},n.prototype.getLayout=function(){return this.layout},n.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},n.prototype.getSimplifiedGeometryInternal=function(t){return this},n.prototype.getStride=function(){return this.stride},n.prototype.setFlatCoordinates=function(t,e){this.stride=ea(t),this.layout=t,this.flatCoordinates=e},n.prototype.setCoordinates=function(t,e){P()},n.prototype.setLayout=function(t,e,i){var o;if(t)o=ea(t);else{for(var a=0;a<i;++a){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}t=function(r){var n;return 2==r?n="XY":3==r?n="XYZ":4==r&&(n="XYZM"),n}(o=e.length)}this.layout=t,this.stride=o},n.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},n.prototype.rotate=function(t,e){var i=this.getFlatCoordinates();if(i){var o=this.getStride();$o(i,0,i.length,o,t,e,i),this.changed()}},n.prototype.scale=function(t,e,i){var o=e;void 0===o&&(o=t);var a=i;a||(a=rn(this.getExtent()));var l=this.getFlatCoordinates();if(l){var u=this.getStride();(function(r,n,t,e,i,o,a,l){for(var u=l||[],c=a[0],h=a[1],d=0,f=0;f<t;f+=e){var _=r[f+1]-h;u[d++]=c+i*(r[f]-c),u[d++]=h+o*_;for(var v=f+2;v<f+e;++v)u[d++]=r[v]}l&&u.length!=d&&(u.length=d)})(l,0,l.length,u,t,o,a,l),this.changed()}},n.prototype.translate=function(t,e){var i=this.getFlatCoordinates();if(i){var o=this.getStride();(function(r,n,t,e,i,o,a){for(var l=a||[],u=0,c=0;c<t;c+=e){l[u++]=r[c]+i,l[u++]=r[c+1]+o;for(var h=c+2;h<c+e;++h)l[u++]=r[h]}a&&l.length!=u&&(l.length=u)})(i,0,i.length,o,t,e,i),this.changed()}},n}(Tu);function na(r,n,t,e,i,o,a){var d,l=r[n],u=r[n+1],c=r[t]-l,h=r[t+1]-u;if(0===c&&0===h)d=n;else{var f=((i-l)*c+(o-u)*h)/(c*c+h*h);if(f>1)d=t;else{if(f>0){for(var p=0;p<e;++p)a[p]=Ge(r[n+p],r[t+p],f);return void(a.length=e)}d=n}}for(p=0;p<e;++p)a[p]=r[d+p];a.length=e}function ia(r,n,t,e,i){var o=r[n],a=r[n+1];for(n+=e;n<t;n+=e){var l=r[n],u=r[n+1],c=an(o,a,l,u);c>i&&(i=c),o=l,a=u}return i}function oa(r,n,t,e,i,o,a,l,u,c,h){if(n==t)return c;var d,f;if(0===i){if((f=an(a,l,r[n],r[n+1]))<c){for(d=0;d<e;++d)u[d]=r[n+d];return u.length=e,f}return c}for(var p=h||[NaN,NaN],_=n+e;_<t;)if(na(r,_-e,_,e,a,l,p),(f=an(a,l,p[0],p[1]))<c){for(c=f,d=0;d<e;++d)u[d]=p[d];u.length=e,_+=e}else _+=e*Math.max((Math.sqrt(f)-Math.sqrt(c))/i|0,1);if(o&&(na(r,t-e,n,e,a,l,p),(f=an(a,l,p[0],p[1]))<c)){for(c=f,d=0;d<e;++d)u[d]=p[d];u.length=e}return c}function sa(r,n,t,e){for(var i=0,o=t.length;i<o;++i)for(var a=t[i],l=0;l<e;++l)r[n++]=a[l];return n}function Ve(r,n){return n*Math.round(r/n)}function Su(r,n,t,e,i,o,a){if(n==t)return a;var c,h,l=Ve(r[n],i),u=Ve(r[n+1],i);n+=e,o[a++]=l,o[a++]=u;do{if(c=Ve(r[n],i),h=Ve(r[n+1],i),(n+=e)==t)return o[a++]=c,o[a++]=h,a}while(c==l&&h==u);for(;n<t;){var d=Ve(r[n],i),f=Ve(r[n+1],i);if(n+=e,d!=c||f!=h){var p=c-l,_=h-u,v=d-l,g=f-u;if(p*g==_*v&&(p<0&&v<p||p==v||p>0&&v>p)&&(_<0&&g<_||_==g||_>0&&g>_)){c=d,h=f;continue}o[a++]=c,o[a++]=h,l=c,u=h,c=d,h=f}}return o[a++]=c,o[a++]=h,a}function _n(r,n,t,e,i){for(var o=void 0!==i?i:[],a=0,l=n;l<t;l+=e)o[a++]=r.slice(l,l+e);return o.length=a,o}function Zi(r,n,t,e,i){for(var o=void 0!==i?i:[],a=0,l=0,u=t.length;l<u;++l){var c=t[l];o[a++]=_n(r,n,c,e,o[a]),n=c}return o.length=a,o}function ca(r,n,t,e,i){for(var o=void 0!==i?i:[],a=0,l=0,u=t.length;l<u;++l){var c=t[l];o[a++]=Zi(r,n,c,e,o[a]),n=c[c.length-1]}return o.length=a,o}function ha(r,n,t,e){for(var i=0,o=r[t-e],a=r[t-e+1];n<t;n+=e){var l=r[n],u=r[n+1];i+=a*l-o*u,o=l,a=u}return i/2}var Pu=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const da=function(r){function n(t,e){var i=r.call(this)||this;return i.maxDelta_=-1,i.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?i.setCoordinates(t,e):i.setFlatCoordinates(e,t),i}return Pu(n,r),n.prototype.clone=function(){return new n(this.flatCoordinates.slice(),this.layout)},n.prototype.closestPointXY=function(t,e,i,o){return o<ao(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ia(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),oa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,o))},n.prototype.getArea=function(){return ha(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getCoordinates=function(){return _n(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getSimplifiedGeometryInternal=function(t){var e=[];return e.length=function(r,n,t,e,i,o,a){var l=(t-n)/e;if(l<3){for(;n<t;n+=e)o[a++]=r[n],o[a++]=r[n+1];return a}var u=new Array(l);u[0]=1,u[l-1]=1;for(var c=[n,t-e],h=0;c.length>0;){for(var d=c.pop(),f=c.pop(),p=0,_=r[f],v=r[f+1],g=r[d],x=r[d+1],E=f+e;E<d;E+=e){var A=qs(r[E],r[E+1],_,v,g,x);A>p&&(h=E,p=A)}p>i&&(u[(h-n)/e]=1,f+e<h&&c.push(f,h),h+e<d&&c.push(h,d))}for(E=0;E<l;++E)u[E]&&(o[a++]=r[n+E*e],o[a++]=r[n+E*e+1]);return a}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new n(e,"XY")},n.prototype.getType=function(){return"LinearRing"},n.prototype.intersectsExtent=function(t){return!1},n.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=sa(this.flatCoordinates,0,t,this.stride),this.changed()},n}(Or);var Lu=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const pa=function(r){function n(t,e){var i=r.call(this)||this;return i.setCoordinates(t,e),i}return Lu(n,r),n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,e,i,o){var a=this.flatCoordinates,l=an(t,e,a[0],a[1]);if(l<o){for(var u=this.stride,c=0;c<u;++c)i[c]=a[c];return i.length=u,l}return o},n.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},n.prototype.computeExtent=function(t){return function(r,n){var t=r[0],e=r[1];return zt(t,e,t,e,n)}(this.flatCoordinates,t)},n.prototype.getType=function(){return"Point"},n.prototype.intersectsExtent=function(t){return so(t,this.flatCoordinates[0],this.flatCoordinates[1])},n.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(r,n,t,e){for(var i=0,o=t.length;i<o;++i)r[n++]=t[i];return n}(this.flatCoordinates,0,t),this.changed()},n}(Or);function Fu(r,n,t,e,i){return!co(i,function(a){return!ze(r,n,t,e,a[0],a[1])})}function ze(r,n,t,e,i,o){for(var a=0,l=r[t-e],u=r[t-e+1];n<t;n+=e){var c=r[n],h=r[n+1];u<=o?h>o&&(c-l)*(o-u)-(i-l)*(h-u)>0&&a++:h<=o&&(c-l)*(o-u)-(i-l)*(h-u)<0&&a--,l=c,u=h}return 0!==a}function Rr(r,n,t,e,i,o){if(0===t.length||!ze(r,n,t[0],e,i,o))return!1;for(var a=1,l=t.length;a<l;++a)if(ze(r,t[a-1],t[a],e,i,o))return!1;return!0}function Sr(r,n,t,e,i){var o=uo([1/0,1/0,-1/0,-1/0],r,n,t,e);return!!Mt(i,o)&&(!!(tn(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3])||function(r,n,t,e,i){var o;for(n+=e;n<t;n+=e)if(o=i(r.slice(n-e,n),r.slice(n,n+e)))return o;return!1}(r,n,t,e,function(a,l){return function(r,n,t){var e=!1,i=nr(r,n),o=nr(r,t);if(1===i||1===o)e=!0;else{var a=r[0],l=r[1],u=r[2],c=r[3],f=t[0],p=t[1],_=(p-n[1])/(f-n[0]),v=void 0,g=void 0;!!(2&o)&&!(2&i)&&(e=(v=f-(p-c)/_)>=a&&v<=u),e||!(4&o)||4&i||(e=(g=p-(f-u)*_)>=l&&g<=c),e||!(8&o)||8&i||(e=(v=f-(p-l)/_)>=a&&v<=u),!e&&16&o&&!(16&i)&&(e=(g=p-(f-a)*_)>=l&&g<=c)}return e}(i,a,l)}))}function bu(r,n,t,e){for(;n<t-e;){for(var i=0;i<e;++i){var o=r[n+i];r[n+i]=r[t-e+i],r[t-e+i]=o}n+=e,t-=e}}function ga(r,n,t,e){for(var i=0,o=r[t-e],a=r[t-e+1];n<t;n+=e){var l=r[n],u=r[n+1];i+=(l-o)*(u+a),o=l,a=u}return 0===i?void 0:i>0}function Pr(r,n,t,e,i){for(var o=void 0!==i&&i,a=0,l=t.length;a<l;++a){var u=t[a],c=ga(r,n,u,e);(0===a?o&&c||!o&&!c:o&&!c||!o&&c)&&bu(r,n,u,e),n=u}return n}var ku=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Fi=function(r){function n(t,e,i){var o=r.call(this)||this;return o.ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,void 0!==e&&i?(o.setFlatCoordinates(e,t),o.ends_=i):o.setCoordinates(t,e),o}return ku(n,r),n.prototype.appendLinearRing=function(t){this.flatCoordinates?Fe(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,e,i,o){return o<ao(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(r,n,t,e,i){for(var o=0,a=t.length;o<a;++o){var l=t[o];i=ia(r,n,l,e,i),n=l}return i}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(r,n,t,e,i,o,a,l,u,c,h){for(var d=h||[NaN,NaN],f=0,p=t.length;f<p;++f){var _=t[f];c=oa(r,n,_,e,i,o,a,l,u,c,d),n=_}return c}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,o))},n.prototype.containsXY=function(t,e){return Rr(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},n.prototype.getArea=function(){return function(r,n,t,e){for(var i=0,o=0,a=t.length;o<a;++o){var l=t[o];i+=ha(r,n,l,e),n=l}return i}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},n.prototype.getCoordinates=function(t){var e;return void 0!==t?Pr(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,Zi(e,0,this.ends_,this.stride)},n.prototype.getEnds=function(){return this.ends_},n.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=rn(this.getExtent());this.flatInteriorPoint_=function(r,n,t,e,i,o,a){for(var l,u,c,h,d,f,p,_=i[o+1],v=[],g=0,x=t.length;g<x;++g){var E=t[g];for(h=r[E-e],f=r[E-e+1],l=n;l<E;l+=e)d=r[l],p=r[l+1],(_<=f&&p<=_||f<=_&&_<=p)&&v.push(c=(_-f)/(p-f)*(d-h)+h),h=d,f=p}var m=NaN,T=-1/0;for(v.sort(re),h=v[0],l=1,u=v.length;l<u;++l){d=v[l];var A=Math.abs(d-h);A>T&&Rr(r,n,t,e,c=(h+d)/2,_)&&(m=c,T=A),h=d}return isNaN(m)&&(m=i[o]),a?(a.push(m,_,T),a):[m,_,T]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},n.prototype.getInteriorPoint=function(){return new pa(this.getFlatInteriorPoint(),"XYM")},n.prototype.getLinearRingCount=function(){return this.ends_.length},n.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new da(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},n.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.ends_,o=[],a=0,l=0,u=i.length;l<u;++l){var c=i[l],h=new da(e.slice(a,c),t);o.push(h),a=c}return o},n.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(r,n,t,e,i){for(var o=void 0!==i&&i,a=0,l=t.length;a<l;++a){var u=t[a],c=ga(r,n,u,e);if(0===a){if(o&&c||!o&&!c)return!1}else if(o&&!c||!o&&c)return!1;n=u}return!0}(t,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Pr(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},n.prototype.getSimplifiedGeometryInternal=function(t){var e=[],i=[];return e.length=function(r,n,t,e,i,o,a,l){for(var u=0,c=t.length;u<c;++u){var h=t[u];a=Su(r,n,h,e,i,o,a),l.push(a),n=h}return a}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new n(e,"XY",i)},n.prototype.getType=function(){return"Polygon"},n.prototype.intersectsExtent=function(t){return function(r,n,t,e,i){if(!function(r,n,t,e,i){return!!(Sr(r,n,t,e,i)||ze(r,n,t,e,i[0],i[1])||ze(r,n,t,e,i[0],i[3])||ze(r,n,t,e,i[2],i[1])||ze(r,n,t,e,i[2],i[3]))}(r,n,t[0],e,i))return!1;if(1===t.length)return!0;for(var o=1,a=t.length;o<a;++o)if(Fu(r,t[o-1],t[o],e,i)&&!Sr(r,t[o-1],t[o],e,i))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},n.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=function(r,n,t,e,i){for(var o=i||[],a=0,l=0,u=t.length;l<u;++l){var c=sa(r,n,t[l],e);o[a++]=c,n=c}return o.length=a,o}(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},n}(Or);const Gu=Fi;function ya(r){var n=r[0],t=r[1],e=r[2],i=r[3],o=[n,t,n,i,e,i,e,t,n,t];return new Fi(o,"XY",[o.length])}var qu=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();function Di(r,n){setTimeout(function(){r(n)},0)}function Wu(r){return!(r.sourceCenter&&r.targetCenter&&!or(r.sourceCenter,r.targetCenter)||r.sourceResolution!==r.targetResolution||r.sourceRotation!==r.targetRotation)}function Lr(r,n,t,e,i){var o=Math.cos(-i),a=Math.sin(-i),l=r[0]*o-r[1]*a,u=r[1]*o+r[0]*a;return[(l+=(n[0]/2-t[0])*e)*o-(u+=(t[1]-n[1]/2)*e)*(a=-a),u*o+l*a]}const ue=function(r){function n(t){var e=r.call(this)||this,i=Et({},t);return e.hints_=[0,0],e.animations_=[],e.projection_=mr(i.projection,"EPSG:3857"),e.viewportSize_=[100,100],e.targetCenter_=null,e.nextCenter_=null,e.cancelAnchor_=void 0,i.center&&(i.center=le(i.center)),i.extent&&(i.extent=Xe(i.extent)),e.applyOptions_(i),e}return qu(n,r),n.prototype.applyOptions_=function(t){var i=function(r){var n,t,e,a=void 0!==r.minZoom?r.minZoom:0,l=void 0!==r.maxZoom?r.maxZoom:28,u=void 0!==r.zoomFactor?r.zoomFactor:2,c=void 0!==r.multiWorld&&r.multiWorld,h=void 0===r.smoothResolutionConstraint||r.smoothResolutionConstraint,d=void 0!==r.showFullExtent&&r.showFullExtent,f=mr(r.projection,"EPSG:3857"),p=f.getExtent(),_=r.constrainOnlyCenter,v=r.extent;if(!c&&!v&&f.isGlobal()&&(_=!1,v=p),void 0!==r.resolutions){var g=r.resolutions;t=g[a],e=void 0!==g[l]?g[l]:g[g.length-1],n=r.constrainResolution?function(r,n,t,e){return function(i,o,a,l){if(void 0!==i){var u=r[0],c=r[r.length-1],h=t?xr(u,t,a,e):u;if(l)return void 0===n||n?Cr(i,h,c):gt(i,c,h);var f=Math.min(h,i),p=Math.floor(_e(r,f,o));return r[p]>h&&p<r.length-1?r[p+1]:r[p]}}}(g,h,!_&&v,d):Ko(t,e,h,!_&&v,d)}else{var E=(p?Math.max(ft(p),Dt(p)):360*kt[Te.DEGREES]/f.getMetersPerUnit())/256/Math.pow(2,0),m=E/Math.pow(2,28);void 0!==(t=r.maxResolution)?a=0:t=E/Math.pow(u,a),void 0===(e=r.minResolution)&&(e=void 0!==r.maxZoom?void 0!==r.maxResolution?t/Math.pow(u,l):E/Math.pow(u,l):m),l=a+Math.floor(Math.log(t/e)/Math.log(u)),e=t/Math.pow(u,l-a),n=r.constrainResolution?function(r,n,t,e,i,o){return function(a,l,u,c){if(void 0!==a){var h=i?xr(n,i,u,o):n,d=void 0!==t?t:0;if(c)return void 0===e||e?Cr(a,h,d):gt(a,d,h);var _=Math.ceil(Math.log(n/h)/Math.log(r)-1e-9),v=-l*(.5-1e-9)+.5,g=Math.min(h,a),x=Math.floor(Math.log(n/g)/Math.log(r)+v),E=Math.max(_,x);return gt(n/Math.pow(r,E),d,h)}}}(u,t,e,h,!_&&v,d):Ko(t,e,h,!_&&v,d)}return{constraint:n,maxResolution:t,minResolution:e,minZoom:a,zoomFactor:u}}(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;var o=function(r){if(void 0!==r.extent)return Ho(r.extent,r.constrainOnlyCenter,void 0===r.smoothExtentConstraint||r.smoothExtentConstraint);var t=mr(r.projection,"EPSG:3857");if(!0!==r.multiWorld&&t.isGlobal()){var e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,Ho(e,!1,!1)}return hu}(t),a=i.constraint,l=function(r){if(void 0===r.enableRotation||r.enableRotation){var t=r.constrainRotation;return void 0===t||!0===t?function(r){var n=pi(5);return function(t,e){return e?t:void 0!==t?Math.abs(t)<=n?0:t:void 0}}():!1===t?Jo:"number"==typeof t?function(r){var n=2*Math.PI/r;return function(t,e){return e?t:void 0!==t?t=Math.floor(t/n+.5)*n:void 0}}(t):Jo}return Ar}(t);this.constraints_={center:o,resolution:a,rotation:l},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.options_=t},Object.defineProperty(n.prototype,"padding",{get:function(){return this.padding_},set:function(t){var e=this.padding_;this.padding_=t;var i=this.getCenter();if(i){var o=t||[0,0,0,0];e=e||[0,0,0,0];var a=this.getResolution();this.setCenterInternal([i[0]+a/2*(o[3]-e[3]+e[1]-o[1]),i[1]-a/2*(o[0]-e[0]+e[2]-o[2])])}},enumerable:!1,configurable:!0}),n.prototype.getUpdatedOptions_=function(t){var e=Et({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Et({},e,t)},n.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),i=0;i<e.length;++i){var o=arguments[i];o.center&&((o=Et({},o)).center=le(o.center,this.getProjection())),o.anchor&&((o=Et({},o)).anchor=le(o.anchor,this.getProjection())),e[i]=o}this.animateInternal.apply(this,e)},n.prototype.animateInternal=function(t){var i,e=arguments.length;e>1&&"function"==typeof arguments[e-1]&&(i=arguments[e-1],--e);for(var o=0;o<e&&!this.isDef();++o){var a=arguments[o];a.center&&this.setCenterInternal(a.center),void 0!==a.zoom?this.setZoom(a.zoom):a.resolution&&this.setResolution(a.resolution),void 0!==a.rotation&&this.setRotation(a.rotation)}if(o!==e){for(var l=Date.now(),u=this.targetCenter_.slice(),c=this.targetResolution_,h=this.targetRotation_,d=[];o<e;++o){var f=arguments[o],p={start:l,complete:!1,anchor:f.anchor,duration:void 0!==f.duration?f.duration:1e3,easing:f.easing||wr,callback:i};if(f.center&&(p.sourceCenter=u,p.targetCenter=f.center.slice(),u=p.targetCenter),void 0!==f.zoom?(p.sourceResolution=c,p.targetResolution=this.getResolutionForZoom(f.zoom),c=p.targetResolution):f.resolution&&(p.sourceResolution=c,p.targetResolution=f.resolution,c=p.targetResolution),void 0!==f.rotation){p.sourceRotation=h;var _=sn(f.rotation-h+Math.PI,2*Math.PI)-Math.PI;p.targetRotation=h+_,h=p.targetRotation}Wu(p)?p.complete=!0:l+=p.duration,d.push(p)}this.animations_.push(d),this.setHint(0,1),this.updateAnimations_()}else i&&Di(i,!0)},n.prototype.getAnimating=function(){return this.hints_[0]>0},n.prototype.getInteracting=function(){return this.hints_[1]>0},n.prototype.cancelAnimations=function(){this.setHint(0,-this.hints_[0]);for(var t,e=0,i=this.animations_.length;e<i;++e){var o=this.animations_[e];if(o[0].callback&&Di(o[0].callback,!1),!t)for(var a=0,l=o.length;a<l;++a){var u=o[a];if(!u.complete){t=u.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},n.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,i=this.animations_.length-1;i>=0;--i){for(var o=this.animations_[i],a=!0,l=0,u=o.length;l<u;++l){var c=o[l];if(!c.complete){var d=c.duration>0?(t-c.start)/c.duration:1;d>=1?(c.complete=!0,d=1):a=!1;var f=c.easing(d);if(c.sourceCenter){var p=c.sourceCenter[0],_=c.sourceCenter[1],v=c.targetCenter[0],g=c.targetCenter[1];this.nextCenter_=c.targetCenter,this.targetCenter_=[p+f*(v-p),_+f*(g-_)]}if(c.sourceResolution&&c.targetResolution){var m=1===f?c.targetResolution:c.sourceResolution+f*(c.targetResolution-c.sourceResolution);if(c.anchor){var T=this.getViewportSize_(this.getRotation()),A=this.constraints_.resolution(m,0,T,!0);this.targetCenter_=this.calculateCenterZoom(A,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=m,this.applyTargetState_(!0)}if(void 0!==c.sourceRotation&&void 0!==c.targetRotation){var S=1===f?sn(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+f*(c.targetRotation-c.sourceRotation);if(c.anchor){var I=this.constraints_.rotation(S,!0);this.targetCenter_=this.calculateCenterRotate(I,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=S}if(this.applyTargetState_(!0),e=!0,!c.complete)break}}if(a){this.animations_[i]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var R=o[0].callback;R&&Di(R,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},n.prototype.calculateCenterRotate=function(t,e){var i,o=this.getCenterInternal();return void 0!==o&&(ar(i=[o[0]-e[0],o[1]-e[1]],t-this.getRotation()),function(r,n){r[0]+=+n[0],r[1]+=+n[1]}(i,e)),i},n.prototype.calculateCenterZoom=function(t,e){var i,o=this.getCenterInternal(),a=this.getResolution();return void 0!==o&&void 0!==a&&(i=[e[0]-t*(e[0]-o[0])/a,e[1]-t*(e[1]-o[1])/a]),i},n.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var i=e[0],o=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(o*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(o*Math.cos(t))]}return e},n.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},n.prototype.getCenter=function(){var t=this.getCenterInternal();return t&&Er(t,this.getProjection())},n.prototype.getCenterInternal=function(){return this.get("center")},n.prototype.getConstraints=function(){return this.constraints_},n.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},n.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},n.prototype.calculateExtent=function(t){return Tr(this.calculateExtentInternal(t),this.getProjection())},n.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSizeMinusPadding_(),i=this.getCenterInternal();Q(i,1);var o=this.getResolution();Q(void 0!==o,2);var a=this.getRotation();return Q(void 0!==a,3),ir(i,o,a,e)},n.prototype.getMaxResolution=function(){return this.maxResolution_},n.prototype.getMinResolution=function(){return this.minResolution_},n.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},n.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},n.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},n.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},n.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},n.prototype.getProjection=function(){return this.projection_},n.prototype.getResolution=function(){return this.get("resolution")},n.prototype.getResolutions=function(){return this.resolutions_},n.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(Xe(t,this.getProjection()),e)},n.prototype.getResolutionForExtentInternal=function(t,e){var i=e||this.getViewportSizeMinusPadding_(),o=ft(t)/i[0],a=Dt(t)/i[1];return Math.max(o,a)},n.prototype.getResolutionForValueFunction=function(t){var e=t||2,i=this.getConstrainedResolution(this.maxResolution_),a=Math.log(i/this.minResolution_)/Math.log(e);return function(l){return i/Math.pow(e,l*a)}},n.prototype.getRotation=function(){return this.get("rotation")},n.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),a=Math.log(i/this.minResolution_)/e;return function(l){return Math.log(i/l)/e/a}},n.prototype.getViewportSizeMinusPadding_=function(t){var e=this.getViewportSize_(t),i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e},n.prototype.getState=function(){var t=this.getProjection(),e=this.getResolution(),i=this.getRotation(),o=this.getCenterInternal(),a=this.padding_;if(a){var l=this.getViewportSizeMinusPadding_();o=Lr(o,this.getViewportSize_(),[l[0]/2+a[3],l[1]/2+a[0]],e,i)}return{center:o.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}},n.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},n.prototype.getZoomForResolution=function(t){var i,o,e=this.minZoom_||0;if(this.resolutions_){var a=_e(this.resolutions_,t,1);e=a,i=this.resolutions_[a],o=a==this.resolutions_.length-1?2:i/this.resolutions_[a+1]}else i=this.maxResolution_,o=this.zoomFactor_;return e+Math.log(i/t)/Math.log(o)},n.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=gt(Math.floor(t),0,this.resolutions_.length-2);return this.resolutions_[e]/Math.pow(this.resolutions_[e]/this.resolutions_[e+1],gt(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},n.prototype.fit=function(t,e){var i;if(Q(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))Q(!rr(t),25),i=ya(o=Xe(t,this.getProjection()));else if("Circle"===t.getType()){var o;(i=ya(o=Xe(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),rn(o))}else{var a=zo();i=a?t.clone().transform(a,this.getProjection()):t}this.fitInternal(i,e)},n.prototype.rotatedExtentForGeometry=function(t){for(var e=this.getRotation(),i=Math.cos(e),o=Math.sin(-e),a=t.getFlatCoordinates(),l=t.getStride(),u=1/0,c=1/0,h=-1/0,d=-1/0,f=0,p=a.length;f<p;f+=l){var _=a[f]*i-a[f+1]*o,v=a[f]*o+a[f+1]*i;u=Math.min(u,_),c=Math.min(c,v),h=Math.max(h,_),d=Math.max(d,v)}return[u,c,h,d]},n.prototype.fitInternal=function(t,e){var i=e||{},o=i.size;o||(o=this.getViewportSizeMinusPadding_());var u,a=void 0!==i.padding?i.padding:[0,0,0,0],l=void 0!==i.nearest&&i.nearest;u=void 0!==i.minResolution?i.minResolution:void 0!==i.maxZoom?this.getResolutionForZoom(i.maxZoom):0;var c=this.rotatedExtentForGeometry(t),h=this.getResolutionForExtentInternal(c,[o[0]-a[1]-a[3],o[1]-a[0]-a[2]]);h=isNaN(h)?u:Math.max(h,u),h=this.getConstrainedResolution(h,l?0:1);var d=this.getRotation(),f=Math.sin(d),p=Math.cos(d),_=rn(c);_[0]+=(a[1]-a[3])/2*h,_[1]+=(a[0]-a[2])/2*h;var x=this.getConstrainedCenter([_[0]*p-_[1]*f,_[1]*p+_[0]*f],h),E=i.callback?i.callback:F;void 0!==i.duration?this.animateInternal({resolution:h,center:x,duration:i.duration,easing:i.easing},E):(this.targetResolution_=h,this.targetCenter_=x,this.applyTargetState_(!1,!0),Di(E,!0))},n.prototype.centerOn=function(t,e,i){this.centerOnInternal(le(t,this.getProjection()),e,i)},n.prototype.centerOnInternal=function(t,e,i){this.setCenterInternal(Lr(t,e,i,this.getResolution(),this.getRotation()))},n.prototype.calculateCenterShift=function(t,e,i,o){var a,l=this.padding_;if(l&&t){var u=this.getViewportSizeMinusPadding_(-i),c=Lr(t,o,[u[0]/2+l[3],u[1]/2+l[0]],e,i);a=[t[0]-c[0],t[1]-c[1]]}return a},n.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},n.prototype.adjustCenter=function(t){var e=Er(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},n.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},n.prototype.adjustResolution=function(t,e){var i=e&&le(e,this.getProjection());this.adjustResolutionInternal(t,i)},n.prototype.adjustResolutionInternal=function(t,e){var i=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),a=this.constraints_.resolution(this.targetResolution_*t,0,o,i);e&&(this.targetCenter_=this.calculateCenterZoom(a,e)),this.targetResolution_*=t,this.applyTargetState_()},n.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},n.prototype.adjustRotation=function(t,e){e&&(e=le(e,this.getProjection())),this.adjustRotationInternal(t,e)},n.prototype.adjustRotationInternal=function(t,e){var i=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(o,e)),this.targetRotation_+=t,this.applyTargetState_()},n.prototype.setCenter=function(t){this.setCenterInternal(le(t,this.getProjection()))},n.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},n.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},n.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},n.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},n.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},n.prototype.applyTargetState_=function(t,e){var i=this.getAnimating()||this.getInteracting()||e,o=this.constraints_.rotation(this.targetRotation_,i),a=this.getViewportSize_(o),l=this.constraints_.resolution(this.targetResolution_,0,a,i),u=this.constraints_.center(this.targetCenter_,l,a,i,this.calculateCenterShift(this.targetCenter_,l,o,a));this.get("rotation")!==o&&this.set("rotation",o),this.get("resolution")!==l&&this.set("resolution",l),(!this.get("center")||!or(this.get("center"),u))&&this.set("center",u),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},n.prototype.resolveConstraints=function(t,e,i){var o=void 0!==t?t:200,a=e||0,l=this.constraints_.rotation(this.targetRotation_),u=this.getViewportSize_(l),c=this.constraints_.resolution(this.targetResolution_,a,u),h=this.constraints_.center(this.targetCenter_,c,u,!1,this.calculateCenterShift(this.targetCenter_,c,l,u));if(0===o&&!this.cancelAnchor_)return this.targetResolution_=c,this.targetRotation_=l,this.targetCenter_=h,void this.applyTargetState_();var d=i||(0===o?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==c||this.getRotation()!==l||!this.getCenterInternal()||!or(this.getCenterInternal(),h))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:l,center:h,resolution:c,duration:o,easing:pn,anchor:d}))},n.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(1,1)},n.prototype.endInteraction=function(t,e,i){var o=i&&le(i,this.getProjection());this.endInteractionInternal(t,e,o)},n.prototype.endInteractionInternal=function(t,e,i){this.setHint(1,-1),this.resolveConstraints(t,e,i)},n.prototype.getConstrainedCenter=function(t,e){var i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)},n.prototype.getConstrainedZoom=function(t,e){var i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))},n.prototype.getConstrainedResolution=function(t,e){var i=e||0,o=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,i,o)},n}(Ht);function Ea(r){return r[0]>0&&r[1]>0}function Jt(r,n){return Array.isArray(r)?r:(void 0===n?n=[r,r]:(n[0]=r,n[1]=r),n)}var zu=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ju=function(r){function n(t){var e=r.call(this)||this,i=function(r){var n=null;void 0!==r.keyboardEventTarget&&(n="string"==typeof r.keyboardEventTarget?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);var i,o,a,t={},e=r.layers&&"function"==typeof r.layers.getLayers?r.layers:new Sl({layers:r.layers});return t.layergroup=e,t.target=r.target,t.view=r.view instanceof ue?r.view:new ue,void 0!==r.controls&&(Array.isArray(r.controls)?i=new bt(r.controls.slice()):(Q("function"==typeof r.controls.getArray,47),i=r.controls)),void 0!==r.interactions&&(Array.isArray(r.interactions)?o=new bt(r.interactions.slice()):(Q("function"==typeof r.interactions.getArray,48),o=r.interactions)),void 0!==r.overlays?Array.isArray(r.overlays)?a=new bt(r.overlays.slice()):(Q("function"==typeof r.overlays.getArray,49),a=r.overlays):a=new bt,{controls:i,interactions:o,keyboardEventTarget:n,overlays:a,values:t}}(t);e.boundHandleBrowserEvent_=e.handleBrowserEvent.bind(e),e.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,e.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:si,e.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(e),e.coordinateToPixelTransform_=[1,0,0,1,0,0],e.pixelToCoordinateTransform_=[1,0,0,1,0,0],e.frameIndex_=0,e.frameState_=null,e.previousExtent_=null,e.viewPropertyListenerKey_=null,e.viewChangeListenerKey_=null,e.layerGroupPropertyListenerKeys_=null,e.viewport_=document.createElement("div"),e.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),e.viewport_.style.position="relative",e.viewport_.style.overflow="hidden",e.viewport_.style.width="100%",e.viewport_.style.height="100%",e.overlayContainer_=document.createElement("div"),e.overlayContainer_.style.position="absolute",e.overlayContainer_.style.zIndex="0",e.overlayContainer_.style.width="100%",e.overlayContainer_.style.height="100%",e.overlayContainer_.style.pointerEvents="none",e.overlayContainer_.className="ol-overlaycontainer",e.viewport_.appendChild(e.overlayContainer_),e.overlayContainerStopEvent_=document.createElement("div"),e.overlayContainerStopEvent_.style.position="absolute",e.overlayContainerStopEvent_.style.zIndex="0",e.overlayContainerStopEvent_.style.width="100%",e.overlayContainerStopEvent_.style.height="100%",e.overlayContainerStopEvent_.style.pointerEvents="none",e.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",e.viewport_.appendChild(e.overlayContainerStopEvent_),e.mapBrowserEventHandler_=null,e.moveTolerance_=t.moveTolerance,e.keyboardEventTarget_=i.keyboardEventTarget,e.keyHandlerKeys_=null,e.controls=i.controls||new bt,e.interactions=i.interactions||new bt,e.overlays_=i.overlays,e.overlayIdIndex_={},e.renderer_=null,e.postRenderFunctions_=[],e.tileQueue_=new ql(e.getTilePriority.bind(e),e.handleTileChange_.bind(e)),e.addChangeListener("layergroup",e.handleLayerGroupChanged_),e.addChangeListener("view",e.handleViewChanged_),e.addChangeListener("size",e.handleSizeChanged_),e.addChangeListener("target",e.handleTargetChanged_),e.setProperties(i.values);var o=e;return t.view&&!(t.view instanceof ue)&&t.view.then(function(a){o.setView(new ue(a))}),e.controls.addEventListener("add",function(a){a.element.setMap(this)}.bind(e)),e.controls.addEventListener("remove",function(a){a.element.setMap(null)}.bind(e)),e.interactions.addEventListener("add",function(a){a.element.setMap(this)}.bind(e)),e.interactions.addEventListener("remove",function(a){a.element.setMap(null)}.bind(e)),e.overlays_.addEventListener("add",function(a){this.addOverlayInternal_(a.element)}.bind(e)),e.overlays_.addEventListener("remove",function(a){var u=a.element.getId();void 0!==u&&delete this.overlayIdIndex_[u.toString()],a.element.setMap(null)}.bind(e)),e.controls.forEach(function(a){a.setMap(this)}.bind(e)),e.interactions.forEach(function(a){a.setMap(this)}.bind(e)),e.overlays_.forEach(e.addOverlayInternal_.bind(e)),e}return zu(n,r),n.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},n.prototype.addControl=function(t){this.getControls().push(t)},n.prototype.addInteraction=function(t){this.getInteractions().push(t)},n.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},n.prototype.addOverlay=function(t){this.getOverlays().push(t)},n.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},n.prototype.disposeInternal=function(){this.setTarget(null),r.prototype.disposeInternal.call(this)},n.prototype.forEachFeatureAtPixel=function(t,e,i){if(this.frameState_){var o=this.getCoordinateFromPixelInternal(t);return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,!1!==i.checkWrapped,e,null,void 0!==i.layerFilter?i.layerFilter:L,null)}},n.prototype.getFeaturesAtPixel=function(t,e){var i=[];return this.forEachFeatureAtPixel(t,function(o){i.push(o)},e),i},n.prototype.forEachLayerAtPixel=function(t,e,i){if(this.frameState_){var o=i||{};return this.renderer_.forEachLayerAtPixel(t,this.frameState_,void 0!==o.hitTolerance?o.hitTolerance:0,e,o.layerFilter||L)}},n.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var i=this.getCoordinateFromPixelInternal(t);return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,void 0!==(e=void 0!==e?e:{}).hitTolerance?e.hitTolerance:0,!1!==e.checkWrapped,void 0!==e.layerFilter?e.layerFilter:L,null)},n.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},n.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},n.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]},n.prototype.getTarget=function(){return this.get("target")},n.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},n.prototype.getCoordinateFromPixel=function(t){return Er(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},n.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?mt(e.pixelToCoordinateTransform,t.slice()):null},n.prototype.getControls=function(){return this.controls},n.prototype.getOverlays=function(){return this.overlays_},n.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},n.prototype.getInteractions=function(){return this.interactions},n.prototype.getLayerGroup=function(){return this.get("layergroup")},n.prototype.setLayers=function(t){var e=this.getLayerGroup();if(t instanceof bt)e.setLayers(t);else{var i=e.getLayers();i.clear(),i.extend(t)}},n.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},n.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,i=t.length;e<i;++e){var a=t[e].layer.getSource();if(a&&a.loading)return!0}return!1},n.prototype.getPixelFromCoordinate=function(t){var e=le(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},n.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?mt(e.coordinateToPixelTransform,t.slice(0,2)):null},n.prototype.getRenderer=function(){return this.renderer_},n.prototype.getSize=function(){return this.get("size")},n.prototype.getView=function(){return this.get("view")},n.prototype.getViewport=function(){return this.viewport_},n.prototype.getOverlayContainer=function(){return this.overlayContainer_},n.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},n.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},n.prototype.getTilePriority=function(t,e,i,o){return function(r,n,t,e,i){if(!r||!(t in r.wantedTiles)||!r.wantedTiles[t][n.getKey()])return Ii;var o=r.viewState.center,a=e[0]-o[0],l=e[1]-o[1];return 65536*Math.log(i)+Math.sqrt(a*a+l*l)/i}(this.frameState_,t,e,i,o)},n.prototype.handleBrowserEvent=function(t,e){var o=new Ee(e||t.type,this,t);this.handleMapBrowserEvent(o)},n.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent,i=e.type;if("pointerdown"===i||"wheel"===i||"keydown"===i){var o=this.getOwnerDocument(),a=this.viewport_.getRootNode?this.viewport_.getRootNode():o,l=e.target;if(this.overlayContainerStopEvent_.contains(l)||!(a===o?o.documentElement:a).contains(l))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t))for(var u=this.getInteractions().getArray().slice(),c=u.length-1;c>=0;c--){var h=u[c];if(h.getMap()===this&&h.getActive()&&this.getTargetElement()&&(!h.handleEvent(t)||t.propagationStopped))break}}},n.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var i=this.maxTilesLoading_,o=i;if(t){var a=t.viewHints;if(a[0]||a[1]){var l=Date.now()-t.time>8;i=l?0:8,o=l?0:2}}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,o))}t&&this.hasListener("rendercomplete")&&!t.animate&&!this.tileQueue_.getTilesLoading()&&!this.getLoading()&&this.renderer_.dispatchRenderEvent("rendercomplete",t);for(var u=this.postRenderFunctions_,c=0,h=u.length;c<h;++c)u[c](this,t);u.length=0},n.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},n.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.mapBrowserEventHandler_){for(var e=0,i=this.keyHandlerKeys_.length;e<i;++e)ct(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null,this.viewport_.removeEventListener("contextmenu",this.boundHandleBrowserEvent_),this.viewport_.removeEventListener("wheel",this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener("resize",this.handleResize_,!1),this.handleResize_=void 0),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,ur(this.viewport_)}if(t){for(var o in t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new Nl(this,this.moveTolerance_),ut)this.mapBrowserEventHandler_.addEventListener(ut[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener("contextmenu",this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener("wheel",this.boundHandleBrowserEvent_,!!It&&{passive:!1});var a=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[rt(a,"keydown",this.handleBrowserEvent,this),rt(a,"keypress",this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener("resize",this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},n.prototype.handleTileChange_=function(){this.render()},n.prototype.handleViewPropertyChanged_=function(){this.render()},n.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(ct(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ct(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=rt(t,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=rt(t,"change",this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},n.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ct),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[rt(t,"propertychange",this.render,this),rt(t,"change",this.render,this)]),this.render()},n.prototype.isRendered=function(){return!!this.frameState_},n.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},n.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,i=t.length;e<i;++e){var o=t[e].layer;o.hasRenderer()&&o.getRenderer().handleFontsChanged()}},n.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},n.prototype.removeControl=function(t){return this.getControls().remove(t)},n.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},n.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},n.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},n.prototype.renderFrame_=function(t){var e=this,i=this.getSize(),o=this.getView(),a=this.frameState_,l=null;if(void 0!==i&&Ea(i)&&o&&o.isDef()){var u=o.getHints(this.frameState_?this.frameState_.viewHints:void 0),c=o.getState();if(l={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:ir(c.center,c.resolution,c.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:c,viewHints:u,wantedTiles:{}},c.nextCenter&&c.nextResolution){var h=isNaN(c.nextRotation)?c.rotation:c.nextRotation;l.nextExtent=ir(c.nextCenter,c.nextResolution,h,i)}}this.frameState_=l,this.renderer_.renderFrame(l),l&&(l.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,l.postRenderFunctions),a&&(!this.previousExtent_||!rr(this.previousExtent_)&&!Pn(l.extent,this.previousExtent_))&&(this.dispatchEvent(new wi("movestart",this,a)),this.previousExtent_=en(this.previousExtent_)),this.previousExtent_&&!l.viewHints[0]&&!l.viewHints[1]&&!Pn(l.extent,this.previousExtent_)&&(this.dispatchEvent(new wi("moveend",this,l)),oo(l.extent,this.previousExtent_))),this.dispatchEvent(new wi("postrender",this,l)),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){e.postRenderTimeoutHandle_=void 0,e.handlePostRender()},0))},n.prototype.setLayerGroup=function(t){this.set("layergroup",t)},n.prototype.setSize=function(t){this.set("size",t)},n.prototype.setTarget=function(t){this.set("target",t)},n.prototype.setView=function(t){if(!t||t instanceof ue)this.set("view",t);else{this.set("view",new ue);var e=this;t.then(function(i){e.setView(new ue(i))})}},n.prototype.updateSize=function(){var t=this.getTargetElement(),e=void 0;if(t){var i=getComputedStyle(t),o=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),a=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(o)&&!isNaN(a)&&!Ea(e=[o,a])&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0.")}this.setSize(e),this.updateViewportSize_()},n.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,i=getComputedStyle(this.viewport_);i.width&&i.height&&(e=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(e)}},n}(Ht);var Qu=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const Zr=function(r){function n(t){var e=r.call(this)||this,i=t.element;return i&&!t.target&&!i.style.pointerEvents&&(i.style.pointerEvents="auto"),e.element=i||null,e.target_=null,e.map_=null,e.listenerKeys=[],t.render&&(e.render=t.render),t.target&&e.setTarget(t.target),e}return Qu(n,r),n.prototype.disposeInternal=function(){ur(this.element),r.prototype.disposeInternal.call(this)},n.prototype.getMap=function(){return this.map_},n.prototype.setMap=function(t){this.map_&&ur(this.element);for(var e=0,i=this.listenerKeys.length;e<i;++e)ct(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==F&&this.listenerKeys.push(rt(t,"postrender",this.render,this)),t.render())},n.prototype.render=function(t){},n.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},n}(Ht);var tc=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const nc=function(r){function n(t){var e=this,i=t||{};(e=r.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this).ulElement_=document.createElement("ul"),e.collapsed_=void 0===i.collapsed||i.collapsed,e.userCollapsed_=e.collapsed_,e.overrideCollapsible_=void 0!==i.collapsible,e.collapsible_=void 0===i.collapsible||i.collapsible,e.collapsible_||(e.collapsed_=!1);var o=void 0!==i.className?i.className:"ol-attribution",a=void 0!==i.tipLabel?i.tipLabel:"Attributions",l=void 0!==i.expandClassName?i.expandClassName:o+"-expand",u=void 0!==i.collapseLabel?i.collapseLabel:"\u203a",c=void 0!==i.collapseClassName?i.collapseClassName:o+"-collpase";"string"==typeof u?(e.collapseLabel_=document.createElement("span"),e.collapseLabel_.textContent=u,e.collapseLabel_.className=c):e.collapseLabel_=u;var h=void 0!==i.label?i.label:"i";"string"==typeof h?(e.label_=document.createElement("span"),e.label_.textContent=h,e.label_.className=l):e.label_=h;var d=e.collapsible_&&!e.collapsed_?e.collapseLabel_:e.label_;e.toggleButton_=document.createElement("button"),e.toggleButton_.setAttribute("type","button"),e.toggleButton_.setAttribute("aria-expanded",String(!e.collapsed_)),e.toggleButton_.title=a,e.toggleButton_.appendChild(d),e.toggleButton_.addEventListener("click",e.handleClick_.bind(e),!1);var p=e.element;return p.className=o+" "+Ei+" "+sr+(e.collapsed_&&e.collapsible_?" "+Po:"")+(e.collapsible_?"":" ol-uncollapsible"),p.appendChild(e.toggleButton_),p.appendChild(e.ulElement_),e.renderedAttributions_=[],e.renderedVisible_=!0,e}return tc(n,r),n.prototype.collectSourceAttributions_=function(t){for(var e={},i=[],o=!0,a=t.layerStatesArray,l=0,u=a.length;l<u;++l){var c=a[l];if(mi(c,t.viewState)){var h=c.layer.getSource();if(h){var d=h.getAttributions();if(d){var f=d(t);if(f)if(o=o&&!1!==h.getAttributionsCollapsible(),Array.isArray(f))for(var p=0,_=f.length;p<_;++p)f[p]in e||(i.push(f[p]),e[f[p]]=!0);else f in e||(i.push(f),e[f]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(o),i},n.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!y(e,this.renderedAttributions_)){!function(r){for(;r.lastChild;)r.removeChild(r.lastChild)}(this.ulElement_);for(var o=0,a=e.length;o<a;++o){var l=document.createElement("li");l.innerHTML=e[o],this.ulElement_.appendChild(l)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},n.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},n.prototype.handleToggle_=function(){this.element.classList.toggle(Po),this.collapsed_?Zo(this.collapseLabel_,this.label_):Zo(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},n.prototype.getCollapsible=function(){return this.collapsible_},n.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},n.prototype.setCollapsed=function(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},n.prototype.getCollapsed=function(){return this.collapsed_},n.prototype.render=function(t){this.updateElement_(t.frameState)},n}(Zr);var ic=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const oc=function(r){function n(t){var e=this,i=t||{};e=r.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this;var o=void 0!==i.className?i.className:"ol-rotate",a=void 0!==i.label?i.label:"\u21e7",l=void 0!==i.compassClassName?i.compassClassName:"ol-compass";e.label_=null,"string"==typeof a?(e.label_=document.createElement("span"),e.label_.className=l,e.label_.textContent=a):(e.label_=a,e.label_.classList.add(l));var u=i.tipLabel?i.tipLabel:"Reset rotation",c=document.createElement("button");c.className=o+"-reset",c.setAttribute("type","button"),c.title=u,c.appendChild(e.label_),c.addEventListener("click",e.handleClick_.bind(e),!1);var d=e.element;return d.className=o+" "+Ei+" "+sr,d.appendChild(c),e.callResetNorth_=i.resetNorth?i.resetNorth:void 0,e.duration_=void 0!==i.duration?i.duration:250,e.autoHide_=void 0===i.autoHide||i.autoHide,e.rotation_=void 0,e.autoHide_&&e.element.classList.add(yi),e}return ic(n,r),n.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},n.prototype.resetNorth_=function(){var e=this.getMap().getView();if(e){var i=e.getRotation();void 0!==i&&(this.duration_>0&&i%(2*Math.PI)!=0?e.animate({rotation:0,duration:this.duration_,easing:pn}):e.setRotation(0))}},n.prototype.render=function(t){var e=t.frameState;if(e){var i=e.viewState.rotation;if(i!=this.rotation_){var o="rotate("+i+"rad)";if(this.autoHide_){var a=this.element.classList.contains(yi);a||0!==i?a&&0!==i&&this.element.classList.remove(yi):this.element.classList.add(yi)}this.label_.style.transform=o}this.rotation_=i}},n}(Zr);var ac=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const lc=function(r){function n(t){var e=this,i=t||{};e=r.call(this,{element:document.createElement("div"),target:i.target})||this;var o=void 0!==i.className?i.className:"ol-zoom",a=void 0!==i.delta?i.delta:1,l=void 0!==i.zoomInClassName?i.zoomInClassName:o+"-in",u=void 0!==i.zoomOutClassName?i.zoomOutClassName:o+"-out",c=void 0!==i.zoomInLabel?i.zoomInLabel:"+",h=void 0!==i.zoomOutLabel?i.zoomOutLabel:"\u2013",d=void 0!==i.zoomInTipLabel?i.zoomInTipLabel:"Zoom in",f=void 0!==i.zoomOutTipLabel?i.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=l,p.setAttribute("type","button"),p.title=d,p.appendChild("string"==typeof c?document.createTextNode(c):c),p.addEventListener("click",e.handleClick_.bind(e,a),!1);var _=document.createElement("button");_.className=u,_.setAttribute("type","button"),_.title=f,_.appendChild("string"==typeof h?document.createTextNode(h):h),_.addEventListener("click",e.handleClick_.bind(e,-a),!1);var g=e.element;return g.className=o+" "+Ei+" "+sr,g.appendChild(p),g.appendChild(_),e.duration_=void 0!==i.duration?i.duration:250,e}return ac(n,r),n.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},n.prototype.zoomByDelta_=function(t){var i=this.getMap().getView();if(i){var o=i.getZoom();if(void 0!==o){var a=i.getConstrainedZoom(o+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:a,duration:this.duration_,easing:pn})):i.setZoom(a)}}},n}(Zr);var cc=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();function Fr(r,n,t,e){var i=r.getZoom();if(void 0!==i){var o=r.getConstrainedZoom(i+n),a=r.getResolutionForZoom(o);r.getAnimating()&&r.cancelAnimations(),r.animate({resolution:a,anchor:t,duration:void 0!==e?e:250,easing:pn})}}const jn=function(r){function n(t){var e=r.call(this)||this;return t&&t.handleEvent&&(e.handleEvent=t.handleEvent),e.map_=null,e.setActive(!0),e}return cc(n,r),n.prototype.getActive=function(){return this.get("active")},n.prototype.getMap=function(){return this.map_},n.prototype.handleEvent=function(t){return!0},n.prototype.setActive=function(t){this.set("active",t)},n.prototype.setMap=function(t){this.map_=t},n}(Ht);var dc=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const _c=function(r){function n(t){var e=r.call(this)||this,i=t||{};return e.delta_=i.delta?i.delta:1,e.duration_=void 0!==i.duration?i.duration:250,e}return dc(n,r),n.prototype.handleEvent=function(t){var e=!1;if(t.type==ut.DBLCLICK){var i=t.originalEvent,a=t.coordinate,l=i.shiftKey?-this.delta_:this.delta_;Fr(t.map.getView(),l,a,this.duration_),i.preventDefault(),e=!0}return!e},n}(jn);var vc=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();function Dr(r){for(var n=r.length,t=0,e=0,i=0;i<n;i++)t+=r[i].clientX,e+=r[i].clientY;return[t/n,e/n]}const Bn=function(r){function n(t){var e=this,i=t||{};return e=r.call(this,i)||this,i.handleDownEvent&&(e.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(e.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(e.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(e.handleUpEvent=i.handleUpEvent),i.stopDown&&(e.stopDown=i.stopDown),e.handlingDownUpSequence=!1,e.trackedPointers_={},e.targetPointers=[],e}return vc(n,r),n.prototype.getPointerCount=function(){return this.targetPointers.length},n.prototype.handleDownEvent=function(t){return!1},n.prototype.handleDragEvent=function(t){},n.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==ut.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==ut.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==ut.POINTERDOWN){var o=this.handleDownEvent(t);this.handlingDownUpSequence=o,e=this.stopDown(o)}else t.type==ut.POINTERMOVE&&this.handleMoveEvent(t);return!e},n.prototype.handleMoveEvent=function(t){},n.prototype.handleUpEvent=function(t){return!1},n.prototype.stopDown=function(t){return t},n.prototype.updateTrackedPointers_=function(t){if(function(r){var n=r.type;return n===ut.POINTERDOWN||n===ut.POINTERDRAG||n===ut.POINTERUP}(t)){var e=t.originalEvent,i=e.pointerId.toString();t.type==ut.POINTERUP?delete this.trackedPointers_[i]:(t.type==ut.POINTERDOWN||i in this.trackedPointers_)&&(this.trackedPointers_[i]=e),this.targetPointers=Eo(this.trackedPointers_)}},n}(jn);function Nr(r){var n=arguments;return function(t){for(var e=!0,i=0,o=n.length;i<o&&(e=e&&n[i](t));++i);return e}}var yc=function(r){var n=r.originalEvent;return n.altKey&&!(n.metaKey||n.ctrlKey)&&n.shiftKey},xa=function(r){return!r.map.getTargetElement().hasAttribute("tabindex")||function(r){return r.target.getTargetElement().contains(document.activeElement)}(r)},Tc=L,Ca=function(r){var n=r.originalEvent;return 0==n.button&&!(ge&&me&&n.ctrlKey)},Aa=function(r){var n=r.originalEvent;return!n.altKey&&!(n.metaKey||n.ctrlKey)&&!n.shiftKey},xc=function(r){var n=r.originalEvent;return!n.altKey&&!(n.metaKey||n.ctrlKey)&&n.shiftKey},wa=function(r){var t=r.originalEvent.target.tagName;return"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t},br=function(r){var n=r.originalEvent;return Q(void 0!==n,56),"mouse"==n.pointerType},Cc=function(r){var n=r.originalEvent;return Q(void 0!==n,56),n.isPrimary&&0===n.button},Ac=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const Oc=function(r){function n(t){var e=r.call(this,{stopDown:Z})||this,i=t||{};e.kinetic_=i.kinetic,e.lastCentroid=null,e.panning_=!1;var o=i.condition?i.condition:Nr(Aa,Cc);return e.condition_=i.onFocusOnly?Nr(xa,o):o,e.noKinetic_=!1,e}return Ac(n,r),n.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e=this.targetPointers,i=Dr(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var o=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],l=t.map.getView();(function(r,n){r[0]*=n,r[1]*=n})(o,l.getResolution()),ar(o,l.getRotation()),l.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()},n.prototype.handleUpEvent=function(t){var e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var o=this.kinetic_.getDistance(),a=this.kinetic_.getAngle(),l=i.getCenterInternal(),u=e.getPixelFromCoordinateInternal(l),c=e.getCoordinateFromPixelInternal([u[0]-o*Math.cos(a),u[1]-o*Math.sin(a)]);i.animateInternal({center:i.getConstrainedCenter(c),duration:500,easing:pn})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},n}(Bn);var Ic=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const Sc=function(r){function n(t){var e=this,i=t||{};return(e=r.call(this,{stopDown:Z})||this).condition_=i.condition?i.condition:yc,e.lastAngle_=void 0,e.duration_=void 0!==i.duration?i.duration:250,e}return Ic(n,r),n.prototype.handleDragEvent=function(t){if(br(t)){var e=t.map,i=e.getView();if(i.getConstraints().rotation!==Ar){var o=e.getSize(),a=t.pixel,l=Math.atan2(o[1]/2-a[1],a[0]-o[0]/2);void 0!==this.lastAngle_&&i.adjustRotationInternal(-(l-this.lastAngle_)),this.lastAngle_=l}}},n.prototype.handleUpEvent=function(t){return!br(t)||(t.map.getView().endInteraction(this.duration_),!1)},n.prototype.handleDownEvent=function(t){return!(!br(t)||!Ca(t)||!this.condition_(t)||(t.map.getView().beginInteraction(),this.lastAngle_=void 0,0))},n}(Bn);var Pc=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const Lc=function(r){function n(t){var e=r.call(this)||this;return e.geometry_=null,e.element_=document.createElement("div"),e.element_.style.position="absolute",e.element_.style.pointerEvents="auto",e.element_.className="ol-box "+t,e.map_=null,e.startPixel_=null,e.endPixel_=null,e}return Pc(n,r),n.prototype.disposeInternal=function(){this.setMap(null)},n.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,i="px",o=this.element_.style;o.left=Math.min(t[0],e[0])+i,o.top=Math.min(t[1],e[1])+i,o.width=Math.abs(e[0]-t[0])+i,o.height=Math.abs(e[1]-t[1])+i},n.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},n.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},n.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,o=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);o[4]=o[0].slice(),this.geometry_?this.geometry_.setCoordinates([o]):this.geometry_=new Gu([o])},n.prototype.getGeometry=function(){return this.geometry_},n}(ie);var Oa=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),kr=function(r){function n(t,e,i){var o=r.call(this,t)||this;return o.coordinate=e,o.mapBrowserEvent=i,o}return Oa(n,r),n}(ye);const Fc=function(r){function n(t){var e=r.call(this)||this,i=t||{};return e.box_=new Lc(i.className||"ol-dragbox"),e.minArea_=void 0!==i.minArea?i.minArea:64,i.onBoxEnd&&(e.onBoxEnd=i.onBoxEnd),e.startPixel_=null,e.condition_=i.condition?i.condition:Ca,e.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:e.defaultBoxEndCondition,e}return Oa(n,r),n.prototype.defaultBoxEndCondition=function(t,e,i){var o=i[0]-e[0],a=i[1]-e[1];return o*o+a*a>=this.minArea_},n.prototype.getGeometry=function(){return this.box_.getGeometry()},n.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new kr("boxdrag",t.coordinate,t))},n.prototype.handleUpEvent=function(t){this.box_.setMap(null);var e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new kr(e?"boxend":"boxcancel",t.coordinate,t)),!1},n.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new kr("boxstart",t.coordinate,t)),!0)},n.prototype.onBoxEnd=function(t){},n}(Bn);var Dc=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const bc=function(r){function n(t){var e=this,i=t||{};return(e=r.call(this,{condition:i.condition?i.condition:xc,className:i.className||"ol-dragzoom",minArea:i.minArea})||this).duration_=void 0!==i.duration?i.duration:200,e.out_=void 0!==i.out&&i.out,e}return Dc(n,r),n.prototype.onBoxEnd=function(t){var i=this.getMap().getView(),o=this.getGeometry();if(this.out_){var a=i.rotatedExtentForGeometry(o),l=i.getResolutionForExtentInternal(a),u=i.getResolution()/l;(o=o.clone()).scale(u*u)}i.fitInternal(o,{duration:this.duration_,easing:pn})},n}(Fc);var kc=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const Uc=function(r){function n(t){var e=r.call(this)||this,i=t||{};return e.defaultCondition_=function(o){return Aa(o)&&wa(o)},e.condition_=void 0!==i.condition?i.condition:e.defaultCondition_,e.duration_=void 0!==i.duration?i.duration:100,e.pixelDelta_=void 0!==i.pixelDelta?i.pixelDelta:128,e}return kc(n,r),n.prototype.handleEvent=function(t){var e=!1;if("keydown"==t.type){var i=t.originalEvent,o=i.keyCode;if(this.condition_(t)&&(40==o||37==o||39==o||38==o)){var l=t.map.getView(),u=l.getResolution()*this.pixelDelta_,c=0,h=0;40==o?h=-u:37==o?c=-u:39==o?c=u:h=u;var d=[c,h];ar(d,l.getRotation()),function(r,n,t){var e=r.getCenterInternal();e&&r.animateInternal({duration:void 0!==t?t:250,easing:vu,center:r.getConstrainedCenter([e[0]+n[0],e[1]+n[1]])})}(l,d,this.duration_),i.preventDefault(),e=!0}}return!e},n}(jn);var qc=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const jc=function(r){function n(t){var e=r.call(this)||this,i=t||{};return e.condition_=i.condition?i.condition:wa,e.delta_=i.delta?i.delta:1,e.duration_=void 0!==i.duration?i.duration:100,e}return qc(n,r),n.prototype.handleEvent=function(t){var e=!1;if("keydown"==t.type||"keypress"==t.type){var i=t.originalEvent,o=i.charCode;if(this.condition_(t)&&(o=="+".charCodeAt(0)||o=="-".charCodeAt(0))){var a=t.map,l=o=="+".charCodeAt(0)?this.delta_:-this.delta_;Fr(a.getView(),l,void 0,this.duration_),i.preventDefault(),e=!0}}return!e},n}(jn),Xc=function(){function r(n,t,e){this.decay_=n,this.minVelocity_=t,this.delay_=e,this.points_=[],this.angle_=0,this.initialVelocity_=0}return r.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},r.prototype.update=function(n,t){this.points_.push(n,t,Date.now())},r.prototype.end=function(){if(this.points_.length<6)return!1;var n=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<n)return!1;for(var e=t-3;e>0&&this.points_[e+2]>n;)e-=3;var i=this.points_[t+2]-this.points_[e+2];if(i<1e3/60)return!1;var o=this.points_[t]-this.points_[e],a=this.points_[t+1]-this.points_[e+1];return this.angle_=Math.atan2(a,o),this.initialVelocity_=Math.sqrt(o*o+a*a)/i,this.initialVelocity_>this.minVelocity_},r.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},r.prototype.getAngle=function(){return this.angle_},r}();var Wc=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const zc=function(r){function n(t){var e=this,i=t||{};(e=r.call(this,i)||this).totalDelta_=0,e.lastDelta_=0,e.maxDelta_=void 0!==i.maxDelta?i.maxDelta:1,e.duration_=void 0!==i.duration?i.duration:250,e.timeout_=void 0!==i.timeout?i.timeout:80,e.useAnchor_=void 0===i.useAnchor||i.useAnchor,e.constrainResolution_=void 0!==i.constrainResolution&&i.constrainResolution;var o=i.condition?i.condition:Tc;return e.condition_=i.onFocusOnly?Nr(xa,o):o,e.lastAnchor_=null,e.startTime_=void 0,e.mode_=void 0,e.trackpadEventGap_=400,e.deltaPerZoom_=300,e}return Wc(n,r),n.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},n.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;if("wheel"!==t.type)return!0;var a,i=t.map,o=t.originalEvent;if(o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),"wheel"==t.type&&(a=o.deltaY,Ne&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(a/=si),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(a*=40)),0===a)return!1;this.lastDelta_=a;var l=Date.now();void 0===this.startTime_&&(this.startTime_=l),(!this.mode_||l-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(a)<4?"trackpad":"wheel");var u=i.getView();if("trackpad"===this.mode_&&!u.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(u.getAnimating()&&u.cancelAnimations(),u.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),u.adjustZoom(-a/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=l,!1;this.totalDelta_+=a;var c=Math.max(this.timeout_-(l-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),c),!1},n.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var i=-gt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Fr(e,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},n.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},n}(jn);var Hc=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const Jc=function(r){function n(t){var e=this,i=t||{},o=i;return o.stopDown||(o.stopDown=Z),(e=r.call(this,o)||this).anchor_=null,e.lastAngle_=void 0,e.rotating_=!1,e.rotationDelta_=0,e.threshold_=void 0!==i.threshold?i.threshold:.3,e.duration_=void 0!==i.duration?i.duration:250,e}return Hc(n,r),n.prototype.handleDragEvent=function(t){var e=0,i=this.targetPointers[0],o=this.targetPointers[1],a=Math.atan2(o.clientY-i.clientY,o.clientX-i.clientX);if(void 0!==this.lastAngle_){var l=a-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=l}this.lastAngle_=a;var u=t.map,c=u.getView();if(c.getConstraints().rotation!==Ar){var h=u.getViewport().getBoundingClientRect(),d=Dr(this.targetPointers);d[0]-=h.left,d[1]-=h.top,this.anchor_=u.getCoordinateFromPixelInternal(d),this.rotating_&&(u.render(),c.adjustRotationInternal(e,this.anchor_))}},n.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},n}(Bn);var Qc=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const th=function(r){function n(t){var e=this,i=t||{},o=i;return o.stopDown||(o.stopDown=Z),(e=r.call(this,o)||this).anchor_=null,e.duration_=void 0!==i.duration?i.duration:400,e.lastDistance_=void 0,e.lastScaleDelta_=1,e}return Qc(n,r),n.prototype.handleDragEvent=function(t){var e=1,i=this.targetPointers[0],o=this.targetPointers[1],a=i.clientX-o.clientX,l=i.clientY-o.clientY,u=Math.sqrt(a*a+l*l);void 0!==this.lastDistance_&&(e=this.lastDistance_/u),this.lastDistance_=u;var c=t.map,h=c.getView();1!=e&&(this.lastScaleDelta_=e);var d=c.getViewport().getBoundingClientRect(),f=Dr(this.targetPointers);f[0]-=d.left,f[1]-=d.top,this.anchor_=c.getCoordinateFromPixelInternal(f),c.render(),h.adjustResolutionInternal(e,this.anchor_)},n.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),1))},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},n}(Bn);var nh=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const rh=function(r){function n(t){return(t=Et({},t)).controls||(t.controls=function(r){var n={},t=new bt;return(void 0===n.zoom||n.zoom)&&t.push(new lc(n.zoomOptions)),(void 0===n.rotate||n.rotate)&&t.push(new oc(n.rotateOptions)),(void 0===n.attribution||n.attribution)&&t.push(new nc(n.attributionOptions)),t}()),t.interactions||(t.interactions=function(r){var n={onFocusOnly:!0}||{},t=new bt,e=new Xc(-.005,.05,100);return(void 0===n.altShiftDragRotate||n.altShiftDragRotate)&&t.push(new Sc),(void 0===n.doubleClickZoom||n.doubleClickZoom)&&t.push(new _c({delta:n.zoomDelta,duration:n.zoomDuration})),(void 0===n.dragPan||n.dragPan)&&t.push(new Oc({onFocusOnly:n.onFocusOnly,kinetic:e})),(void 0===n.pinchRotate||n.pinchRotate)&&t.push(new Jc),(void 0===n.pinchZoom||n.pinchZoom)&&t.push(new th({duration:n.zoomDuration})),(void 0===n.keyboard||n.keyboard)&&(t.push(new Uc),t.push(new jc({delta:n.zoomDelta,duration:n.zoomDuration}))),(void 0===n.mouseWheelZoom||n.mouseWheelZoom)&&t.push(new zc({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(void 0===n.shiftDragZoom||n.shiftDragZoom)&&t.push(new bc({duration:n.zoomDuration})),t}()),r.call(this,t)||this}return nh(n,r),n.prototype.createRenderer=function(){return new wl(this)},n}(Ju);var oh=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ia=function(r){function n(t,e,i){var o=r.call(this)||this,a=i||{};return o.tileCoord=t,o.state=e,o.interimTile=null,o.key="",o.transition_=void 0===a.transition?250:a.transition,o.transitionStarts_={},o}return oh(n,r),n.prototype.changed=function(){this.dispatchEvent("change")},n.prototype.release=function(){},n.prototype.getKey=function(){return this.key+"/"+this.tileCoord},n.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(2==t.getState())return this.transition_=0,t;t=t.interimTile}while(t);return this},n.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(2==t.getState()){t.interimTile=null;break}1==t.getState()?e=t:0==t.getState()?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},n.prototype.getTileCoord=function(){return this.tileCoord},n.prototype.getState=function(){return this.state},n.prototype.setState=function(t){if(3!==this.state&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},n.prototype.load=function(){P()},n.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else this.transitionStarts_[t]=i=e;var o=e-i+1e3/60;return o>=this.transition_?1:Qo(o/this.transition_)},n.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},n.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},n}(ln);var sh=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const uh=function(r){function n(t,e,i,o){var a=r.call(this)||this;return a.extent=t,a.pixelRatio_=i,a.resolution=e,a.state=o,a}return sh(n,r),n.prototype.changed=function(){this.dispatchEvent("change")},n.prototype.getExtent=function(){return this.extent},n.prototype.getImage=function(){return P()},n.prototype.getPixelRatio=function(){return this.pixelRatio_},n.prototype.getResolution=function(){return this.resolution},n.prototype.getState=function(){return this.state},n.prototype.load=function(){P()},n}(ln);var ch=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();function Ur(r,n,t){var e=r;if(e.src&&be){var i=e.decode(),o=!0;return i.then(function(){o&&n()}).catch(function(u){o&&("EncodingError"===u.name&&"Invalid image type."===u.message?n():t())}),function(){o=!1}}var l=[vi(e,"load",n),vi(e,"error",t)];return function(){l.forEach(ct)}}!function(r){function n(t,e,i,o,a,l){var u=r.call(this,t,e,i,0)||this;return u.src_=o,u.image_=new Image,null!==a&&(u.image_.crossOrigin=a),u.unlisten_=null,u.state=0,u.imageLoadFunction_=l,u}ch(n,r),n.prototype.getImage=function(){return this.image_},n.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.changed()},n.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Dt(this.extent)/this.image_.height),this.state=2,this.unlistenImage_(),this.changed()},n.prototype.load=function(){(0==this.state||3==this.state)&&(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=Ur(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},n.prototype.setImage=function(t){this.image_=t,this.resolution=Dt(this.extent)/this.image_.height},n.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}(uh);var hh=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const ph=function(r){function n(t,e,i,o,a,l){var u=r.call(this,t,e,l)||this;return u.crossOrigin_=o,u.src_=i,u.key=i,u.image_=new Image,null!==o&&(u.image_.crossOrigin=o),u.unlisten_=null,u.tileLoadFunction_=a,u}return hh(n,r),n.prototype.getImage=function(){return this.image_},n.prototype.setImage=function(t){this.image_=t,this.state=2,this.unlistenImage_(),this.changed()},n.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.image_=function(){var r=Nt(1,1);return r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1),r.canvas}(),this.changed()},n.prototype.handleImageLoad_=function(){var t=this.image_;this.state=t.naturalWidth&&t.naturalHeight?2:4,this.unlistenImage_(),this.changed()},n.prototype.load=function(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Ur(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},n.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},n}(Ia),mh=function(){function r(n,t,e,i,o,a){this.sourceProj_=n,this.targetProj_=t;var l={},u=qn(this.targetProj_,this.sourceProj_);this.transformInv_=function(m){var T=m[0]+"/"+m[1];return l[T]||(l[T]=u(m)),l[T]},this.maxSourceExtent_=i,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&ft(i)==ft(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ft(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ft(this.targetProj_.getExtent()):null;var c=ke(e),h=di(e),d=fi(e),f=hi(e),p=this.transformInv_(c),_=this.transformInv_(h),v=this.transformInv_(d),g=this.transformInv_(f),x=10+(a?Math.max(0,Math.ceil(Us(ci(e)/(a*a*256*256)))):0);if(this.addQuad_(c,h,d,f,p,_,v,g,x),this.wrapsXInSource_){var E=1/0;this.triangles_.forEach(function(m,T,A){E=Math.min(E,m.source[0][0],m.source[1][0],m.source[2][0])}),this.triangles_.forEach(function(m){if(Math.max(m.source[0][0],m.source[1][0],m.source[2][0])-E>this.sourceWorldWidth_/2){var T=[[m.source[0][0],m.source[0][1]],[m.source[1][0],m.source[1][1]],[m.source[2][0],m.source[2][1]]];T[0][0]-E>this.sourceWorldWidth_/2&&(T[0][0]-=this.sourceWorldWidth_),T[1][0]-E>this.sourceWorldWidth_/2&&(T[1][0]-=this.sourceWorldWidth_),T[2][0]-E>this.sourceWorldWidth_/2&&(T[2][0]-=this.sourceWorldWidth_);var A=Math.min(T[0][0],T[1][0],T[2][0]);Math.max(T[0][0],T[1][0],T[2][0])-A<this.sourceWorldWidth_/2&&(m.source=T)}}.bind(this))}l={}}return r.prototype.addTriangle_=function(n,t,e,i,o,a){this.triangles_.push({source:[i,o,a],target:[n,t,e]})},r.prototype.addQuad_=function(n,t,e,i,o,a,l,u,c){var h=ro([o,a,l,u]),d=this.sourceWorldWidth_?ft(h)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&d>.5&&d<1,_=!1;if(c>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(_=ft(ro([n,t,e,i]))/this.targetWorldWidth_>.25||_),!p&&this.sourceProj_.isGlobal()&&d&&(_=d>.25||_)),!(!_&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3]))||Mt(h,this.maxSourceExtent_)){var x=0;if(!(_||isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(l[0])&&isFinite(l[1])&&isFinite(u[0])&&isFinite(u[1])))if(c>0)_=!0;else if(1!=(x=(isFinite(o[0])&&isFinite(o[1])?0:8)+(isFinite(a[0])&&isFinite(a[1])?0:4)+(isFinite(l[0])&&isFinite(l[1])?0:2)+(isFinite(u[0])&&isFinite(u[1])?0:1))&&2!=x&&4!=x&&8!=x)return;if(c>0){if(!_){var m=this.transformInv_([(n[0]+e[0])/2,(n[1]+e[1])/2]),T=void 0;T=p?(sn(o[0],f)+sn(l[0],f))/2-sn(m[0],f):(o[0]+l[0])/2-m[0];var S=(o[1]+l[1])/2-m[1];_=T*T+S*S>this.errorThresholdSquared_}if(_){if(Math.abs(n[0]-e[0])<=Math.abs(n[1]-e[1])){var R=[(t[0]+e[0])/2,(t[1]+e[1])/2],M=this.transformInv_(R),k=[(i[0]+n[0])/2,(i[1]+n[1])/2],N=this.transformInv_(k);this.addQuad_(n,t,R,k,o,a,M,N,c-1),this.addQuad_(k,R,e,i,N,M,l,u,c-1)}else{var W=[(n[0]+t[0])/2,(n[1]+t[1])/2],U=this.transformInv_(W),J=[(e[0]+i[0])/2,(e[1]+i[1])/2],B=this.transformInv_(J);this.addQuad_(n,W,J,i,o,U,B,u,c-1),this.addQuad_(W,t,e,J,U,a,l,B,c-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&x)&&this.addTriangle_(n,e,i,o,l,u),0==(14&x)&&this.addTriangle_(n,e,t,o,l,a),x&&(0==(13&x)&&this.addTriangle_(t,i,n,a,u,o),0==(7&x)&&this.addTriangle_(t,i,e,a,u,l))}},r.prototype.calculateSourceExtent=function(){var n=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(t,e,i){var o=t.source;nn(n,o[0]),nn(n,o[1]),nn(n,o[2])}),n},r.prototype.getTriangles=function(){return this.triangles_},r}();var qr,Sa={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1};function Pa(r,n,t,e,i){r.beginPath(),r.moveTo(0,0),r.lineTo(n,t),r.lineTo(e,i),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(n,e)+1,Math.max(t,i)),r.restore()}function Yr(r,n){return Math.abs(r[4*n]-210)>2||Math.abs(r[4*n+3]-191.25)>2}function Ma(r,n,t,e){var i=Yn(t,n,r),o=Bo(n,e,t),a=n.getMetersPerUnit();void 0!==a&&(o*=a);var l=r.getMetersPerUnit();void 0!==l&&(o/=l);var u=r.getExtent();if(!u||ui(u,i)){var c=Bo(r,o,i)/o;isFinite(c)&&c>0&&(o/=c)}return o}var xh=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ah=function(r){function n(t,e,i,o,a,l,u,c,h,d,f,p){var _=r.call(this,a,0)||this;_.renderEdges_=void 0!==f&&f,_.contextOptions_=p,_.pixelRatio_=u,_.gutter_=c,_.canvas_=null,_.sourceTileGrid_=e,_.targetTileGrid_=o,_.wrappedTileCoord_=l||a,_.sourceTiles_=[],_.sourcesListenerKeys_=null,_.sourceZ_=0;var v=o.getTileCoordExtent(_.wrappedTileCoord_),g=_.targetTileGrid_.getExtent(),x=_.sourceTileGrid_.getExtent(),E=g?on(v,g):v;if(0===ci(E))return _.state=4,_;var m=t.getExtent();m&&(x=x?on(x,m):m);var T=o.getResolution(_.wrappedTileCoord_[0]),A=function(r,n,t,e){var i=rn(t),o=Ma(r,n,i,e);return(!isFinite(o)||o<=0)&&co(t,function(a){return o=Ma(r,n,a,e),isFinite(o)&&o>0}),o}(t,i,E,T);if(!isFinite(A)||A<=0)return _.state=4,_;if(_.triangulation_=new mh(t,i,E,x,A*(void 0!==d?d:.5),T),0===_.triangulation_.getTriangles().length)return _.state=4,_;_.sourceZ_=e.getZForResolution(A);var I=_.triangulation_.calculateSourceExtent();if(x&&(t.canWrapX()?(I[1]=gt(I[1],x[1],x[3]),I[3]=gt(I[3],x[1],x[3])):I=on(I,x)),ci(I)){for(var R=e.getTileRangeForExtentAndZ(I,_.sourceZ_),M=R.minX;M<=R.maxX;M++)for(var k=R.minY;k<=R.maxY;k++){var N=h(_.sourceZ_,M,k,u);N&&_.sourceTiles_.push(N)}0===_.sourceTiles_.length&&(_.state=4)}else _.state=4;return _}return xh(n,r),n.prototype.getImage=function(){return this.canvas_},n.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(h,d,f){h&&2==h.getState()&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(h.tileCoord),image:h.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=3;else{var e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),o="number"==typeof i?i:i[0],a="number"==typeof i?i:i[1],l=this.targetTileGrid_.getResolution(e),u=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function(r,n,t,e,i,o,a,l,u,c,h,d){var f=Nt(Math.round(t*r),Math.round(t*n));if(Et(f,d),0===u.length)return f.canvas;function p(T){return Math.round(T*t)/t}f.scale(t,t),f.globalCompositeOperation="lighter";var _=[1/0,1/0,-1/0,-1/0];u.forEach(function(T,A,S){!function(r,n){n[0]<r[0]&&(r[0]=n[0]),n[2]>r[2]&&(r[2]=n[2]),n[1]<r[1]&&(r[1]=n[1]),n[3]>r[3]&&(r[3]=n[3])}(_,T.extent)});var v=ft(_),g=Dt(_),x=Nt(Math.round(t*v/e),Math.round(t*g/e));Et(x,d);var E=t/e;u.forEach(function(T,A,S){var I=T.extent[0]-_[0],R=-(T.extent[3]-_[3]),M=ft(T.extent),k=Dt(T.extent);T.image.width>0&&T.image.height>0&&x.drawImage(T.image,c,c,T.image.width-2*c,T.image.height-2*c,I*E,R*E,M*E,k*E)});var m=ke(a);return l.getTriangles().forEach(function(T,A,S){var I=T.source,R=T.target,M=I[0][0],k=I[0][1],N=I[1][0],W=I[1][1],U=I[2][0],J=I[2][1],B=p((R[0][0]-m[0])/o),V=p(-(R[0][1]-m[1])/o),j=p((R[1][0]-m[0])/o),nt=p(-(R[1][1]-m[1])/o),tt=p((R[2][0]-m[0])/o),ot=p(-(R[2][1]-m[1])/o),pt=M,w=k;M=0,k=0;var H=function(r){for(var n=r.length,t=0;t<n;t++){for(var e=t,i=Math.abs(r[t][t]),o=t+1;o<n;o++){var a=Math.abs(r[o][t]);a>i&&(i=a,e=o)}if(0===i)return null;var l=r[e];r[e]=r[t],r[t]=l;for(var u=t+1;u<n;u++)for(var c=-r[u][t]/r[t][t],h=t;h<n+1;h++)t==h?r[u][h]=0:r[u][h]+=c*r[t][h]}for(var d=new Array(n),f=n-1;f>=0;f--){d[f]=r[f][n]/r[f][f];for(var p=f-1;p>=0;p--)r[p][n]-=r[p][f]*d[f]}return d}([[N-=pt,W-=w,0,0,j-B],[U-=pt,J-=w,0,0,tt-B],[0,0,N,W,nt-V],[0,0,U,J,ot-V]]);if(H){if(f.save(),f.beginPath(),function(){if(void 0===qr){var r=document.createElement("canvas").getContext("2d");r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",Pa(r,4,5,4,0),Pa(r,4,5,0,5);var n=r.getImageData(0,0,3,3).data;qr=Yr(n,0)||Yr(n,4)||Yr(n,8)}return qr}()||d===Sa){f.moveTo(j,nt);for(var Ot=B-j,Zt=V-nt,St=0;St<4;St++)f.lineTo(j+p((St+1)*Ot/4),nt+p(St*Zt/3)),3!=St&&f.lineTo(j+p((St+1)*Ot/4),nt+p((St+1)*Zt/3));f.lineTo(tt,ot)}else f.moveTo(j,nt),f.lineTo(B,V),f.lineTo(tt,ot);f.clip(),f.transform(H[0],H[2],H[1],H[3],B,V),f.translate(_[0]-pt,_[3]-w),f.scale(e/t,-e/t),f.drawImage(x.canvas,0,0),f.restore()}}),h&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,l.getTriangles().forEach(function(T,A,S){var I=T.target,R=(I[0][0]-m[0])/o,M=-(I[0][1]-m[1])/o,k=(I[1][0]-m[0])/o,N=-(I[1][1]-m[1])/o,W=(I[2][0]-m[0])/o,U=-(I[2][1]-m[1])/o;f.beginPath(),f.moveTo(k,N),f.lineTo(R,M),f.lineTo(W,U),f.closePath(),f.stroke()}),f.restore()),f.canvas}(o,a,this.pixelRatio_,u,this.sourceTileGrid_.getExtent(),l,c,this.triangulation_,t,this.gutter_,this.renderEdges_,this.contextOptions_),this.state=2}this.changed()},n.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,i,o){var a=e.getState();if(0==a||1==a){t++;var l=rt(e,"change",function(u){var c=e.getState();(2==c||3==c||4==c)&&(ct(l),0==--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(l)}}.bind(this)),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e,i,o){0==e.getState()&&e.load()})}},n.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(ct),this.sourcesListenerKeys_=null},n}(Ia),Oh=function(){function r(n){this.highWaterMark=void 0!==n?n:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return r.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},r.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},r.prototype.containsKey=function(n){return this.entries_.hasOwnProperty(n)},r.prototype.forEach=function(n){for(var t=this.oldest_;t;)n(t.value_,t.key_,this),t=t.newer},r.prototype.get=function(n,t){var e=this.entries_[n];return Q(void 0!==e,15),e===this.newest_||(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,this.newest_=e),e.value_},r.prototype.remove=function(n){var t=this.entries_[n];return Q(void 0!==t,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[n],--this.count_,t.value_},r.prototype.getCount=function(){return this.count_},r.prototype.getKeys=function(){var e,n=new Array(this.count_),t=0;for(e=this.newest_;e;e=e.older)n[t++]=e.key_;return n},r.prototype.getValues=function(){var e,n=new Array(this.count_),t=0;for(e=this.newest_;e;e=e.older)n[t++]=e.value_;return n},r.prototype.peekLast=function(){return this.oldest_.value_},r.prototype.peekLastKey=function(){return this.oldest_.key_},r.prototype.peekFirstKey=function(){return this.newest_.key_},r.prototype.pop=function(){var n=this.oldest_;return delete this.entries_[n.key_],n.newer&&(n.newer.older=null),this.oldest_=n.newer,this.oldest_||(this.newest_=null),--this.count_,n.value_},r.prototype.replace=function(n,t){this.get(n),this.entries_[n].value_=t},r.prototype.set=function(n,t){Q(!(n in this.entries_),16);var e={key_:n,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=e:this.oldest_=e,this.newest_=e,this.entries_[n]=e,++this.count_},r.prototype.setSize=function(n){this.highWaterMark=n},r}();function La(r,n,t,e){return void 0!==e?(e[0]=r,e[1]=n,e[2]=t,e):[r,n,t]}function Xn(r,n,t){return r+"/"+n+"/"+t}function Za(r){return Xn(r[0],r[1],r[2])}var Ph=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const Fa=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return Ph(n,r),n.prototype.expireCache=function(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()},n.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var i=function(r){return r.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(o){o.tileCoord[0]!==i&&(this.remove(Za(o.tileCoord)),o.release())}.bind(this))}},n}(Oh);var Lh=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();function Da(r){return r?Array.isArray(r)?function(n){return r}:"function"==typeof r?r:function(n){return[r]}:null}const Na=function(r){function n(t){var e=r.call(this)||this;e.projection=At(t.projection),e.attributions_=Da(t.attributions),e.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,e.loading=!1,e.state_=void 0!==t.state?t.state:"ready",e.wrapX_=void 0!==t.wrapX&&t.wrapX,e.viewResolver=null,e.viewRejector=null;var i=e;return e.viewPromise_=new Promise(function(o,a){i.viewResolver=o,i.viewRejector=a}),e}return Lh(n,r),n.prototype.getAttributions=function(){return this.attributions_},n.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},n.prototype.getProjection=function(){return this.projection},n.prototype.getResolutions=function(){return P()},n.prototype.getView=function(){return this.viewPromise_},n.prototype.getState=function(){return this.state_},n.prototype.getWrapX=function(){return this.wrapX_},n.prototype.getContextOptions=function(){},n.prototype.refresh=function(){this.changed()},n.prototype.setAttributions=function(t){this.attributions_=Da(t),this.changed()},n.prototype.setState=function(t){this.state_=t,this.changed()},n}(Ht);var ba=function(){function r(n,t,e,i){this.minX=n,this.maxX=t,this.minY=e,this.maxY=i}return r.prototype.contains=function(n){return this.containsXY(n[1],n[2])},r.prototype.containsTileRange=function(n){return this.minX<=n.minX&&n.maxX<=this.maxX&&this.minY<=n.minY&&n.maxY<=this.maxY},r.prototype.containsXY=function(n,t){return this.minX<=n&&n<=this.maxX&&this.minY<=t&&t<=this.maxY},r.prototype.equals=function(n){return this.minX==n.minX&&this.minY==n.minY&&this.maxX==n.maxX&&this.maxY==n.maxY},r.prototype.extend=function(n){n.minX<this.minX&&(this.minX=n.minX),n.maxX>this.maxX&&(this.maxX=n.maxX),n.minY<this.minY&&(this.minY=n.minY),n.maxY>this.maxY&&(this.maxY=n.maxY)},r.prototype.getHeight=function(){return this.maxY-this.minY+1},r.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},r.prototype.getWidth=function(){return this.maxX-this.minX+1},r.prototype.intersects=function(n){return this.minX<=n.maxX&&this.maxX>=n.minX&&this.minY<=n.maxY&&this.maxY>=n.minY},r}();function vn(r,n,t,e,i){return void 0!==i?(i.minX=r,i.maxX=n,i.minY=t,i.maxY=e,i):new ba(r,n,t,e)}const ka=ba;var Fh=[0,0,0];const Ga=function(){function r(n){var t;if(this.minZoom=void 0!==n.minZoom?n.minZoom:0,this.resolutions_=n.resolutions,Q(function(r,n,t){var e=function(a,l){return l-a}||re;return r.every(function(i,o){if(0===o)return!0;var a=e(r[o-1],i);return!(a>0||0===a)})}(this.resolutions_),17),!n.origins)for(var e=0,i=this.resolutions_.length-1;e<i;++e)if(t){if(this.resolutions_[e]/this.resolutions_[e+1]!==t){t=void 0;break}}else t=this.resolutions_[e]/this.resolutions_[e+1];this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==n.origin?n.origin:null,this.origins_=null,void 0!==n.origins&&(this.origins_=n.origins,Q(this.origins_.length==this.resolutions_.length,20));var o=n.extent;void 0!==o&&!this.origin_&&!this.origins_&&(this.origin_=ke(o)),Q(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==n.tileSizes&&(this.tileSizes_=n.tileSizes,Q(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==n.tileSize?n.tileSize:this.tileSizes_?null:256,Q(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==o?o:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==n.sizes?this.fullTileRanges_=n.sizes.map(function(a,l){var u=new ka(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1));if(o){var c=this.getTileRangeForExtentAndZ(o,l);u.minX=Math.max(c.minX,u.minX),u.maxX=Math.min(c.maxX,u.maxX),u.minY=Math.max(c.minY,u.minY),u.maxY=Math.min(c.maxY,u.maxY)}return u},this):o&&this.calculateTileRanges_(o)}return r.prototype.forEachTileCoord=function(n,t,e){for(var i=this.getTileRangeForExtentAndZ(n,t),o=i.minX,a=i.maxX;o<=a;++o)for(var l=i.minY,u=i.maxY;l<=u;++l)e([t,o,l])},r.prototype.forEachTileCoordParentTileRange=function(n,t,e,i){var a,l,u=null,c=n[0]-1;for(2===this.zoomFactor_?(a=n[1],l=n[2]):u=this.getTileCoordExtent(n,i);c>=this.minZoom;){if(t(c,2===this.zoomFactor_?vn(a=Math.floor(a/2),a,l=Math.floor(l/2),l,e):this.getTileRangeForExtentAndZ(u,c,e)))return!0;--c}return!1},r.prototype.getExtent=function(){return this.extent_},r.prototype.getMaxZoom=function(){return this.maxZoom},r.prototype.getMinZoom=function(){return this.minZoom},r.prototype.getOrigin=function(n){return this.origin_?this.origin_:this.origins_[n]},r.prototype.getResolution=function(n){return this.resolutions_[n]},r.prototype.getResolutions=function(){return this.resolutions_},r.prototype.getTileCoordChildTileRange=function(n,t,e){if(n[0]<this.maxZoom){if(2===this.zoomFactor_){var i=2*n[1],o=2*n[2];return vn(i,i+1,o,o+1,t)}var a=this.getTileCoordExtent(n,e||this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,n[0]+1,t)}return null},r.prototype.getTileRangeForTileCoordAndZ=function(n,t,e){if(t>this.maxZoom||t<this.minZoom)return null;var i=n[0],o=n[1],a=n[2];if(t===i)return vn(o,a,o,a,e);if(this.zoomFactor_){var l=Math.pow(this.zoomFactor_,t-i),u=Math.floor(o*l),c=Math.floor(a*l);return t<i?vn(u,u,c,c,e):vn(u,Math.floor(l*(o+1))-1,c,Math.floor(l*(a+1))-1,e)}var f=this.getTileCoordExtent(n,this.tmpExtent_);return this.getTileRangeForExtentAndZ(f,t,e)},r.prototype.getTileRangeExtent=function(n,t,e){var i=this.getOrigin(n),o=this.getResolution(n),a=Jt(this.getTileSize(n),this.tmpSize_);return zt(i[0]+t.minX*a[0]*o,i[1]+t.minY*a[1]*o,i[0]+(t.maxX+1)*a[0]*o,i[1]+(t.maxY+1)*a[1]*o,e)},r.prototype.getTileRangeForExtentAndZ=function(n,t,e){var i=Fh;this.getTileCoordForXYAndZ_(n[0],n[3],t,!1,i);var o=i[1],a=i[2];return this.getTileCoordForXYAndZ_(n[2],n[1],t,!0,i),vn(o,i[1],a,i[2],e)},r.prototype.getTileCoordCenter=function(n){var t=this.getOrigin(n[0]),e=this.getResolution(n[0]),i=Jt(this.getTileSize(n[0]),this.tmpSize_);return[t[0]+(n[1]+.5)*i[0]*e,t[1]-(n[2]+.5)*i[1]*e]},r.prototype.getTileCoordExtent=function(n,t){var e=this.getOrigin(n[0]),i=this.getResolution(n[0]),o=Jt(this.getTileSize(n[0]),this.tmpSize_),a=e[0]+n[1]*o[0]*i,l=e[1]-(n[2]+1)*o[1]*i;return zt(a,l,a+o[0]*i,l+o[1]*i,t)},r.prototype.getTileCoordForCoordAndResolution=function(n,t,e){return this.getTileCoordForXYAndResolution_(n[0],n[1],t,!1,e)},r.prototype.getTileCoordForXYAndResolution_=function(n,t,e,i,o){var a=this.getZForResolution(e),l=e/this.getResolution(a),u=this.getOrigin(a),c=Jt(this.getTileSize(a),this.tmpSize_),d=i?.5:0,f=Math.floor((n-u[0])/e+(i?.5:0)),p=Math.floor((u[1]-t)/e+d),_=l*f/c[0],v=l*p/c[1];return i?(_=Math.ceil(_)-1,v=Math.ceil(v)-1):(_=Math.floor(_),v=Math.floor(v)),La(a,_,v,o)},r.prototype.getTileCoordForXYAndZ_=function(n,t,e,i,o){var a=this.getOrigin(e),l=this.getResolution(e),u=Jt(this.getTileSize(e),this.tmpSize_),h=i?.5:0,d=Math.floor((n-a[0])/l+(i?.5:0)),f=Math.floor((a[1]-t)/l+h),p=d/u[0],_=f/u[1];return i?(p=Math.ceil(p)-1,_=Math.ceil(_)-1):(p=Math.floor(p),_=Math.floor(_)),La(e,p,_,o)},r.prototype.getTileCoordForCoordAndZ=function(n,t,e){return this.getTileCoordForXYAndZ_(n[0],n[1],t,!1,e)},r.prototype.getTileCoordResolution=function(n){return this.resolutions_[n[0]]},r.prototype.getTileSize=function(n){return this.tileSize_?this.tileSize_:this.tileSizes_[n]},r.prototype.getFullTileRange=function(n){return this.fullTileRanges_?this.fullTileRanges_[n]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,n):null},r.prototype.getZForResolution=function(n,t){return gt(_e(this.resolutions_,n,t||0),this.minZoom,this.maxZoom)},r.prototype.calculateTileRanges_=function(n){for(var t=this.resolutions_.length,e=new Array(t),i=this.minZoom;i<t;++i)e[i]=this.getTileRangeForExtentAndZ(n,i);this.fullTileRanges_=e},r}();function Ua(r){var n=r.getDefaultTileGrid();return n||(n=function(r,n,t,e){return function(r,n,t,e){var o=qa(r,undefined,t);return new Ga({extent:r,origin:Fs(r,"top-left"),resolutions:o,tileSize:t})}(Br(r),0,void 0)}(r),r.setDefaultTileGrid(n)),n}function qa(r,n,t,e){for(var i=void 0!==n?n:42,o=Dt(r),a=ft(r),l=Jt(void 0!==t?t:256),u=e>0?e:Math.max(a/l[0],o/l[1]),c=i+1,h=new Array(c),d=0;d<c;++d)h[d]=u/Math.pow(2,d);return h}function Br(r){var n=(r=At(r)).getExtent();if(!n){var t=180*kt[Te.DEGREES]/r.getMetersPerUnit();n=zt(-t,-t,t,t)}return n}var Ya=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Uh=function(r){function n(t){var e=r.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX})||this;e.opaque_=void 0!==t.opaque&&t.opaque,e.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,e.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;var o=t.tileGrid;return o&&Jt(o.getTileSize(o.getMinZoom()),[256,256]),e.tileCache=new Fa(t.cacheSize||0),e.tmpSize=[0,0],e.key_=t.key||"",e.tileOptions={transition:t.transition},e.zDirection=t.zDirection?t.zDirection:0,e}return Ya(n,r),n.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},n.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},n.prototype.forEachLoadedTile=function(t,e,i,o){var a=this.getTileCacheForProjection(t);if(!a)return!1;for(var u,c,h,l=!0,d=i.minX;d<=i.maxX;++d)for(var f=i.minY;f<=i.maxY;++f)c=Xn(e,d,f),h=!1,a.containsKey(c)&&(h=2===(u=a.get(c)).getState())&&(h=!1!==o(u)),h||(l=!1);return l},n.prototype.getGutterForProjection=function(t){return 0},n.prototype.getKey=function(){return this.key_},n.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},n.prototype.getOpaque=function(t){return this.opaque_},n.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},n.prototype.getTile=function(t,e,i,o,a){return P()},n.prototype.getTileGrid=function(){return this.tileGrid},n.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Ua(t)},n.prototype.getTileCacheForProjection=function(t){return Q(dn(this.getProjection(),t),68),this.tileCache},n.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},n.prototype.getTilePixelSize=function(t,e,i){var o=this.getTileGridForProjection(i),a=this.getTilePixelRatio(e),l=Jt(o.getTileSize(t),this.tmpSize);return 1==a?l:function(r,n,t){return void 0===t&&(t=[0,0]),t[0]=r[0]*n+.5|0,t[1]=r[1]*n+.5|0,t}(l,a,this.tmpSize)},n.prototype.getTileCoordForTileUrlFunction=function(t,e){var i=void 0!==e?e:this.getProjection(),o=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=function(r,n,t){var e=n[0],i=r.getTileCoordCenter(n),o=Br(t);if(ui(o,i))return n;var a=ft(o),l=Math.ceil((o[0]-i[0])/a);return i[0]+=a*l,r.getTileCoordForCoordAndZ(i,e)}(o,t,i)),function(r,n){var t=r[0],e=r[1],i=r[2];if(n.getMinZoom()>t||t>n.getMaxZoom())return!1;var o=n.getFullTileRange(t);return!o||o.containsXY(e,i)}(t,o)?t:null},n.prototype.clear=function(){this.tileCache.clear()},n.prototype.refresh=function(){this.clear(),r.prototype.refresh.call(this)},n.prototype.updateCacheSize=function(t,e){var i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)},n.prototype.useTile=function(t,e,i,o){},n}(Na),qh=function(r){function n(t,e){var i=r.call(this,t)||this;return i.tile=e,i}return Ya(n,r),n}(ye);const Yh=Uh;function jh(r,n){var t=/\{z\}/g,e=/\{x\}/g,i=/\{y\}/g,o=/\{-y\}/g;return function(a,l,u){if(a)return r.replace(t,a[0].toString()).replace(e,a[1].toString()).replace(i,a[2].toString()).replace(o,function(){var h=n.getFullTileRange(a[0]);return Q(h,55),(h.getHeight()-a[2]-1).toString()})}}var Vh=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const Hh=function(r){function n(t){var e=r.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return e.generateTileUrlFunction_=e.tileUrlFunction===n.prototype.tileUrlFunction,e.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(e.tileUrlFunction=t.tileUrlFunction),e.urls=null,t.urls?e.setUrls(t.urls):t.url&&e.setUrl(t.url),e.tileLoadingKeys_={},e}return Vh(n,r),n.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},n.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},n.prototype.getUrls=function(){return this.urls},n.prototype.handleTileChange=function(t){var a,e=t.target,i=G(e),o=e.getState();1==o?(this.tileLoadingKeys_[i]=!0,a="tileloadstart"):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],a=3==o?"tileloaderror":2==o?"tileloadend":void 0),null!=a&&this.dispatchEvent(new qh(a,e))},n.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},n.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},n.prototype.setUrl=function(t){var e=function(r){var n=[],t=/\{([a-z])-([a-z])\}/.exec(r);if(t){var e=t[1].charCodeAt(0),i=t[2].charCodeAt(0),o=void 0;for(o=e;o<=i;++o)n.push(r.replace(t[0],String.fromCharCode(o)));return n}if(t=/\{(\d+)-(\d+)\}/.exec(r)){for(var a=parseInt(t[2],10),l=parseInt(t[1],10);l<=a;l++)n.push(r.replace(t[0],l.toString()));return n}return n.push(r),n}(t);this.urls=e,this.setUrls(e)},n.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function(r,n){for(var t=r.length,e=new Array(t),i=0;i<t;++i)e[i]=jh(r[i],n);return function(r){return 1===r.length?r[0]:function(n,t,e){if(n){var o=sn(function(r){return(r[1]<<r[0])+r[2]}(n),r.length);return r[o](n,t,e)}}}(e)}(t,this.tileGrid),e):this.setKey(e)},n.prototype.tileUrlFunction=function(t,e,i){},n.prototype.useTile=function(t,e,i){var o=Xn(t,e,i);this.tileCache.containsKey(o)&&this.tileCache.get(o)},n}(Yh);var Kh=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();function Qh(r,n){r.getImage().src=n}const $h=function(r){function n(t){var e=r.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Qh,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return e.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,e.tileClass=void 0!==t.tileClass?t.tileClass:ph,e.tileCacheForProjection={},e.tileGridForProjection={},e.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,e.contextOptions_=!1===t.imageSmoothing?Sa:void 0,e.renderReprojectionEdges_=!1,e}return Kh(n,r),n.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},n.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);for(var o in this.tileCache.expireCache(this.tileCache==i?e:{}),this.tileCacheForProjection){var a=this.tileCacheForProjection[o];a.expireCache(a==i?e:{})}},n.prototype.getContextOptions=function(){return this.contextOptions_},n.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!dn(this.getProjection(),t)?0:this.getGutter()},n.prototype.getGutter=function(){return 0},n.prototype.getKey=function(){return r.prototype.getKey.call(this)+(this.contextOptions_?"\n"+JSON.stringify(this.contextOptions_):"")},n.prototype.getOpaque=function(t){return!(this.getProjection()&&t&&!dn(this.getProjection(),t))&&r.prototype.getOpaque.call(this,t)},n.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(this.tileGrid&&(!e||dn(e,t)))return this.tileGrid;var i=G(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Ua(t)),this.tileGridForProjection[i]},n.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||dn(e,t))return this.tileCache;var i=G(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Fa(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},n.prototype.createTile_=function(t,e,i,o,a,l){var u=[t,e,i],c=this.getTileCoordForTileUrlFunction(u,a),h=c?this.tileUrlFunction(c,o,a):void 0,d=new this.tileClass(u,void 0!==h?0:4,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return d.key=l,d.addEventListener("change",this.handleTileChange.bind(this)),d},n.prototype.getTile=function(t,e,i,o,a){var l=this.getProjection();if(!l||!a||dn(l,a))return this.getTileInternal(t,e,i,o,l||a);var u=this.getTileCacheForProjection(a),c=[t,e,i],h=void 0,d=Za(c);u.containsKey(d)&&(h=u.get(d));var f=this.getKey();if(h&&h.key==f)return h;var p=this.getTileGridForProjection(l),_=this.getTileGridForProjection(a),v=this.getTileCoordForTileUrlFunction(c,a),g=new Ah(l,p,a,_,c,v,this.getTilePixelRatio(o),this.getGutter(),function(x,E,m,T){return this.getTileInternal(x,E,m,T,l)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.contextOptions_);return g.key=f,h?(g.interimTile=h,g.refreshInterimChain(),u.replace(d,g)):u.set(d,g),g},n.prototype.getTileInternal=function(t,e,i,o,a){var l=null,u=Xn(t,e,i),c=this.getKey();if(this.tileCache.containsKey(u)){if((l=this.tileCache.get(u)).key!=c){var h=l;(l=this.createTile_(t,e,i,o,a,c)).interimTile=0==h.getState()?h.interimTile:h,l.refreshInterimChain(),this.tileCache.replace(u,l)}}else l=this.createTile_(t,e,i,o,a,c),this.tileCache.set(u,l);return l},n.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},n.prototype.setTileGridForProjection=function(t,e){var i=At(t);if(i){var o=G(i);o in this.tileGridForProjection||(this.tileGridForProjection[o]=e)}},n}(Hh);var tf=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const nf=function(r){function n(t){var i=t||{},o=void 0!==i.projection?i.projection:"EPSG:3857",a=void 0!==i.tileGrid?i.tileGrid:function(r){var n=r||{},t=n.extent||At("EPSG:3857").getExtent(),e={extent:t,minZoom:n.minZoom,tileSize:n.tileSize,resolutions:qa(t,n.maxZoom,n.tileSize,n.maxResolution)};return new Ga(e)}({extent:Br(o),maxResolution:i.maxResolution,maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});return r.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,imageSmoothing:i.imageSmoothing,opaque:i.opaque,projection:o,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:a,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this}return tf(n,r),n}($h);var rf=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const sf=function(r){function n(t){var i=t||{};return r.call(this,{attributions:void 0!==i.attributions?i.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],attributionsCollapsible:!1,cacheSize:i.cacheSize,crossOrigin:void 0!==i.crossOrigin?i.crossOrigin:"anonymous",imageSmoothing:i.imageSmoothing,maxZoom:void 0!==i.maxZoom?i.maxZoom:19,opaque:void 0===i.opaque||i.opaque,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,transition:i.transition,url:void 0!==i.url?i.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:i.wrapX,zDirection:i.zDirection})||this}return rf(n,r),n}(nf);var lf=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const cf=function(r){function n(t){var e=this,i=t||{},o=Et({},i);return delete o.preload,delete o.useInterimTilesOnError,(e=r.call(this,o)||this).setPreload(void 0!==i.preload?i.preload:0),e.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),e}return lf(n,r),n.prototype.getPreload=function(){return this.get("preload")},n.prototype.setPreload=function(t){this.set("preload",t)},n.prototype.getUseInterimTilesOnError=function(){return this.get("useInterimTilesOnError")},n.prototype.setUseInterimTilesOnError=function(t){this.set("useInterimTilesOnError",t)},n}(wo);var hf=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const df=function(r){function n(t){var e=r.call(this)||this;return e.boundHandleImageChange_=e.handleImageChange_.bind(e),e.layer_=t,e.declutterExecutorGroup=null,e}return hf(n,r),n.prototype.getFeatures=function(t){return P()},n.prototype.prepareFrame=function(t){return P()},n.prototype.renderFrame=function(t,e){return P()},n.prototype.loadedTileCallback=function(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i},n.prototype.createLoadedTileFinder=function(t,e,i){return function(o,a){var l=this.loadedTileCallback.bind(this,i,o);return t.forEachLoadedTile(e,o,a,l)}.bind(this)},n.prototype.forEachFeatureAtCoordinate=function(t,e,i,o,a){},n.prototype.getDataAtPixel=function(t,e,i){return null},n.prototype.getLayer=function(){return this.layer_},n.prototype.handleFontsChanged=function(){},n.prototype.handleImageChange_=function(t){2===t.target.getState()&&this.renderIfReadyAndVisible()},n.prototype.loadImage=function(t){var e=t.getState();return 2!=e&&3!=e&&t.addEventListener("change",this.boundHandleImageChange_),0==e&&(t.load(),e=t.getState()),2==e},n.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&"ready"==t.getSourceState()&&t.changed()},n}(To);var pf=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const ja=function(r){function n(t){var e=r.call(this,t)||this;return e.container=null,e.tempTransform=[1,0,0,1,0,0],e.pixelTransform=[1,0,0,1,0,0],e.inversePixelTransform=[1,0,0,1,0,0],e.context=null,e.containerReused=!1,e}return pf(n,r),n.prototype.useContainer=function(t,e,i){var a,l,o=this.getLayer().getClassName();if(t&&t.style.opacity===lr(i)&&t.className===o&&(u=t.firstElementChild)instanceof HTMLCanvasElement&&(l=u.getContext("2d")),l&&l.canvas.style.transform===e?(this.container=t,this.context=l,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(a=document.createElement("div")).className=o;var u,c=a.style;c.position="absolute",c.width="100%",c.height="100%",l=Nt(),a.appendChild(u=l.canvas),(c=u.style).position="absolute",c.left="0",c.transformOrigin="top left",this.container=a,this.context=l}},n.prototype.clipUnrotated=function(t,e,i){var o=ke(i),a=di(i),l=fi(i),u=hi(i);mt(e.coordinateToPixelTransform,o),mt(e.coordinateToPixelTransform,a),mt(e.coordinateToPixelTransform,l),mt(e.coordinateToPixelTransform,u);var c=this.inversePixelTransform;mt(c,o),mt(c,a),mt(c,l),mt(c,u),t.save(),t.beginPath(),t.moveTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(l[0]),Math.round(l[1])),t.lineTo(Math.round(u[0]),Math.round(u[1])),t.clip()},n.prototype.dispatchRenderEvent_=function(t,e,i){var o=this.getLayer();if(o.hasListener(t)){var a=new So(t,this.inversePixelTransform,i,e);o.dispatchEvent(a)}},n.prototype.preRender=function(t,e){this.dispatchRenderEvent_("prerender",t,e)},n.prototype.postRender=function(t,e){this.dispatchRenderEvent_("postrender",t,e)},n.prototype.getRenderTransform=function(t,e,i,o,a,l,u){var d=o/e;return Vt(this.tempTransform,a/2,l/2,d,-d,-i,-t[0]+u,-t[1])},n.prototype.getDataAtPixel=function(t,e,i){var h,o=mt(this.inversePixelTransform,t.slice()),a=this.context,u=this.getLayer().getExtent();if(u&&!ui(u,mt(e.pixelToCoordinateTransform,t.slice())))return null;try{var d=Math.round(o[0]),f=Math.round(o[1]),p=document.createElement("canvas"),_=p.getContext("2d");p.width=1,p.height=1,_.clearRect(0,0,1,1),_.drawImage(a.canvas,d,f,1,1,0,0,1,1),h=_.getImageData(0,0,1,1).data}catch(v){return"SecurityError"===v.name?new Uint8Array:h}return 0===h[3]?null:h},n}(df);var vf=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const gf=function(r){function n(t){var e=r.call(this,t)||this;return e.extentChanged=!0,e.renderedExtent_=null,e.renderedProjection=null,e.renderedTiles=[],e.newTiles_=!1,e.tmpExtent=[1/0,1/0,-1/0,-1/0],e.tmpTileRange_=new ka(0,0,0,0),e}return vf(n,r),n.prototype.isDrawableTile=function(t){var e=this.getLayer(),i=t.getState(),o=e.getUseInterimTilesOnError();return 2==i||4==i||3==i&&!o},n.prototype.getTile=function(t,e,i,o){var a=o.pixelRatio,l=o.viewState.projection,u=this.getLayer(),h=u.getSource().getTile(t,e,i,a,l);return 3==h.getState()&&(u.getUseInterimTilesOnError()?u.getPreload()>0&&(this.newTiles_=!0):h.setState(2)),this.isDrawableTile(h)||(h=h.getInterimTile()),h},n.prototype.loadedTileCallback=function(t,e,i){return!!this.isDrawableTile(i)&&r.prototype.loadedTileCallback.call(this,t,e,i)},n.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},n.prototype.renderFrame=function(t,e){var i=t.layerStatesArray[t.layerIndex],o=t.viewState,a=o.projection,l=o.resolution,u=o.center,c=o.rotation,h=t.pixelRatio,d=this.getLayer(),f=d.getSource(),p=f.getRevision(),_=f.getTileGridForProjection(a),v=_.getZForResolution(l,f.zDirection),g=_.getResolution(v),x=t.extent,E=i.extent&&Xe(i.extent);E&&(x=on(x,Xe(i.extent)));var m=f.getTilePixelRatio(h),T=Math.round(t.size[0]*m),A=Math.round(t.size[1]*m);if(c){var S=Math.round(Math.sqrt(T*T+A*A));T=S,A=S}var I=g*T/2/m,R=g*A/2/m,M=[u[0]-I,u[1]-R,u[0]+I,u[1]+R],k=_.getTileRangeForExtentAndZ(x,v),N={};N[v]={};var W=this.createLoadedTileFinder(f,a,N),U=this.tmpExtent,J=this.tmpTileRange_;this.newTiles_=!1;for(var B=k.minX;B<=k.maxX;++B)for(var V=k.minY;V<=k.maxY;++V){var j=this.getTile(v,B,V,t);if(this.isDrawableTile(j)){var nt=G(this);if(2==j.getState()){N[v][j.tileCoord.toString()]=j;var tt=j.inTransition(nt);!this.newTiles_&&(tt||-1===this.renderedTiles.indexOf(j))&&(this.newTiles_=!0)}if(1===j.getAlpha(nt,t.time))continue}var ot=_.getTileCoordChildTileRange(j.tileCoord,J,U),pt=!1;ot&&(pt=W(v+1,ot)),pt||_.forEachTileCoordParentTileRange(j.tileCoord,W,J,U)}var w=g/l;Vt(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/m,1/m,c,-T/2,-A/2);var Tt=tr(this.pixelTransform);this.useContainer(e,Tt,i.opacity);var H=this.context,_t=H.canvas;li(this.inversePixelTransform,this.pixelTransform),Vt(this.tempTransform,T/2,A/2,w,w,0,-T/2,-A/2),_t.width!=T||_t.height!=A?(_t.width=T,_t.height=A):this.containerReused||H.clearRect(0,0,T,A),E&&this.clipUnrotated(H,t,E),Et(H,f.getContextOptions()),this.preRender(H,t),this.renderedTiles.length=0;var Zt,St,Ft,Ot=Object.keys(N).map(Number);Ot.sort(re),1!==i.opacity||this.containerReused&&!f.getOpaque(t.viewState.projection)?(Zt=[],St=[]):Ot=Ot.reverse();for(var En=Ot.length-1;En>=0;--En){var ee=Ot[En],Yi=f.getTilePixelSize(ee,h,a),Se=_.getResolution(ee)/g,Tn=Yi[0]*Se*w,Bi=Yi[1]*Se*w,Jn=_.getTileCoordForCoordAndZ(ke(M),ee),Xi=_.getTileCoordExtent(Jn),Je=mt(this.tempTransform,[m*(Xi[0]-M[0])/g,m*(M[3]-Xi[3])/g]),Qn=m*f.getGutterForProjection(a),Wi=N[ee];for(var xn in Wi){var Pe=(j=Wi[xn]).tileCoord,Cn=Jn[1]-Pe[1],Hr=Math.round(Je[0]-(Cn-1)*Tn),Vi=Jn[2]-Pe[2],$n=Math.round(Je[1]-(Vi-1)*Bi),Me=Hr-(B=Math.round(Je[0]-Cn*Tn)),pe=$n-(V=Math.round(Je[1]-Vi*Bi)),Qe=v===ee;if(!(tt=Qe&&1!==j.getAlpha(G(this),t.time)))if(Zt){H.save(),Ft=[B,V,B+Me,V,B+Me,V+pe,B,V+pe];for(var An=0,Xt=Zt.length;An<Xt;++An)if(v!==ee&&ee<St[An]){var Wt=Zt[An];H.beginPath(),H.moveTo(Ft[0],Ft[1]),H.lineTo(Ft[2],Ft[3]),H.lineTo(Ft[4],Ft[5]),H.lineTo(Ft[6],Ft[7]),H.moveTo(Wt[6],Wt[7]),H.lineTo(Wt[4],Wt[5]),H.lineTo(Wt[2],Wt[3]),H.lineTo(Wt[0],Wt[1]),H.clip()}Zt.push(Ft),St.push(ee)}else H.clearRect(B,V,Me,pe);this.drawTileImage(j,t,B,V,Me,pe,Qn,Qe),Zt&&!tt?(H.restore(),this.renderedTiles.unshift(j)):this.renderedTiles.push(j),this.updateUsedTiles(t.usedTiles,f,j)}}this.renderedRevision=p,this.renderedResolution=g,this.extentChanged=!this.renderedExtent_||!Pn(this.renderedExtent_,M),this.renderedExtent_=M,this.renderedPixelRatio=h,this.renderedProjection=a,this.manageTilePyramid(t,f,_,h,a,x,v,d.getPreload()),this.scheduleExpireCache(t,f),this.postRender(H,t),i.extent&&H.restore(),Tt!==_t.style.transform&&(_t.style.transform=Tt);var $e=lr(i.opacity),wn=this.container;return $e!==wn.style.opacity&&(wn.style.opacity=$e),this.container},n.prototype.drawTileImage=function(t,e,i,o,a,l,u,c){var h=this.getTileImage(t);if(h){var d=G(this),f=c?t.getAlpha(d,e.time):1,p=f!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(h,u,u,h.width-2*u,h.height-2*u,i,o,a,l),p&&this.context.restore(),1!==f?e.animate=!0:c&&t.endTransition(d)}},n.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},n.prototype.getTileImage=function(t){return t.getImage()},n.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var i=function(o,a,l){var u=G(o);u in l.usedTiles&&o.expireCache(l.viewState.projection,l.usedTiles[u])}.bind(null,e);t.postRenderFunctions.push(i)}},n.prototype.updateUsedTiles=function(t,e,i){var o=G(e);o in t||(t[o]={}),t[o][i.getKey()]=!0},n.prototype.manageTilePyramid=function(t,e,i,o,a,l,u,c,h){var d=G(e);d in t.wantedTiles||(t.wantedTiles[d]={});var g,x,E,m,T,A,f=t.wantedTiles[d],p=t.tileQueue,v=0;for(A=i.getMinZoom();A<=u;++A)for(x=i.getTileRangeForExtentAndZ(l,A,x),E=i.getResolution(A),m=x.minX;m<=x.maxX;++m)for(T=x.minY;T<=x.maxY;++T)u-A<=c?(++v,0==(g=e.getTile(A,m,T,o,a)).getState()&&(f[g.getKey()]=!0,p.isKeyQueued(g.getKey())||p.enqueue([g,d,i.getTileCoordCenter(g.tileCoord),E])),void 0!==h&&h(g)):e.useTile(A,m,T,a);e.updateCacheSize(v,a)},n}(ja);var mf=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ef=function(r){function n(t){return r.call(this,t)||this}return mf(n,r),n.prototype.createRenderer=function(){return new gf(this)},n}(cf);var Tf=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const Af=function(r){function n(t){var e=r.call(this)||this;return e.id_=void 0,e.geometryName_="geometry",e.style_=null,e.styleFunction_=void 0,e.geometryChangeKey_=null,e.addChangeListener(e.geometryName_,e.handleGeometryChanged_),t&&("function"==typeof t.getSimplifiedGeometry?e.setGeometry(t):e.setProperties(t)),e}return Tf(n,r),n.prototype.clone=function(){var t=new n(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var e=this.getGeometry();e&&t.setGeometry(e.clone());var i=this.getStyle();return i&&t.setStyle(i),t},n.prototype.getGeometry=function(){return this.get(this.geometryName_)},n.prototype.getId=function(){return this.id_},n.prototype.getGeometryName=function(){return this.geometryName_},n.prototype.getStyle=function(){return this.style_},n.prototype.getStyleFunction=function(){return this.styleFunction_},n.prototype.handleGeometryChange_=function(){this.changed()},n.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(ct(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=rt(t,"change",this.handleGeometryChange_,this)),this.changed()},n.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},n.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function(r){return"function"==typeof r?r:(Array.isArray(r)?n=r:(Q("function"==typeof r.getZIndex,41),n=[r]),function(){return n});var n}(t):void 0,this.changed()},n.prototype.setId=function(t){this.id_=t,this.changed()},n.prototype.setGeometryName=function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},n}(Ht);var Xa=ht(3036);const Wa=function(){function r(n){this.rbush_=new Xa(n),this.items_={}}return r.prototype.insert=function(n,t){var e={minX:n[0],minY:n[1],maxX:n[2],maxY:n[3],value:t};this.rbush_.insert(e),this.items_[G(t)]=e},r.prototype.load=function(n,t){for(var e=new Array(t.length),i=0,o=t.length;i<o;i++){var a=n[i],l=t[i],u={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:l};e[i]=u,this.items_[G(l)]=u}this.rbush_.load(e)},r.prototype.remove=function(n){var t=G(n),e=this.items_[t];return delete this.items_[t],null!==this.rbush_.remove(e)},r.prototype.update=function(n,t){var e=this.items_[G(t)];Pn([e.minX,e.minY,e.maxX,e.maxY],n)||(this.remove(t),this.insert(n,t))},r.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},r.prototype.getInExtent=function(n){return this.rbush_.search({minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}).map(function(i){return i.value})},r.prototype.forEach=function(n){return this.forEach_(this.getAll(),n)},r.prototype.forEachInExtent=function(n,t){return this.forEach_(this.getInExtent(n),t)},r.prototype.forEach_=function(n,t){for(var e,i=0,o=n.length;i<o;i++)if(e=t(n[i]))return e;return e},r.prototype.isEmpty=function(){return Ln(this.items_)},r.prototype.clear=function(){this.rbush_.clear(),this.items_={}},r.prototype.getExtent=function(n){var t=this.rbush_.toJSON();return zt(t.minX,t.minY,t.maxX,t.maxY,n)},r.prototype.concat=function(n){for(var t in this.rbush_.load(n.rbush_.all()),n.items_)this.items_[t]=n.items_[t]},r}();function Of(r,n){return[[-1/0,-1/0,1/0,1/0]]}function za(r,n){return function(t,e,i,o,a){var l=this;!function(r,n,t,e,i,o,a){var l=new XMLHttpRequest;l.open("GET","function"==typeof r?r(t,e,i):r,!0),"arraybuffer"==n.getType()&&(l.responseType="arraybuffer"),l.withCredentials=false,l.onload=function(u){if(!l.status||l.status>=200&&l.status<300){var c=n.getType(),h=void 0;"json"==c||"text"==c?h=l.responseText:"xml"==c?(h=l.responseXML)||(h=(new DOMParser).parseFromString(l.responseText,"application/xml")):"arraybuffer"==c&&(h=l.response),h?o(n.readFeatures(h,{extent:t,featureProjection:i}),n.readProjection(h)):a()}else a()},l.onerror=a,l.send()}(r,n,t,e,i,function(u,c){l.addFeatures(u),void 0!==o&&o(u)},a||F)}}var Ha=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),xe=function(r){function n(t,e,i){var o=r.call(this,t)||this;return o.feature=e,o.features=i,o}return Ha(n,r),n}(ye);const Sf=function(r){function n(t){var e=this,i=t||{};(e=r.call(this,{attributions:i.attributions,projection:void 0,state:"ready",wrapX:void 0===i.wrapX||i.wrapX})||this).loader_=F,e.format_=i.format,e.overlaps_=void 0===i.overlaps||i.overlaps,e.url_=i.url,void 0!==i.loader?e.loader_=i.loader:void 0!==e.url_&&(Q(e.format_,7),e.loader_=za(e.url_,e.format_)),e.strategy_=void 0!==i.strategy?i.strategy:Of;var a,l,o=void 0===i.useSpatialIndex||i.useSpatialIndex;return e.featuresRtree_=o?new Wa:null,e.loadedExtentsRtree_=new Wa,e.loadingExtentsCount_=0,e.nullGeometryFeatures_={},e.idIndex_={},e.uidIndex_={},e.featureChangeKeys_={},e.featuresCollection_=null,Array.isArray(i.features)?l=i.features:i.features&&(l=(a=i.features).getArray()),!o&&void 0===a&&(a=new bt(l)),void 0!==l&&e.addFeaturesInternal(l),void 0!==a&&e.bindFeaturesCollection_(a),e}return Ha(n,r),n.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},n.prototype.addFeatureInternal=function(t){var e=G(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var i=t.getGeometry();if(i){var o=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new xe("addfeature",t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},n.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[rt(e,"change",this.handleFeatureChange_,this),rt(e,"propertychange",this.handleFeatureChange_,this)]},n.prototype.addToIndex_=function(t,e){var i=!0,o=e.getId();return void 0!==o&&(o.toString()in this.idIndex_?i=!1:this.idIndex_[o.toString()]=e),i&&(Q(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i},n.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},n.prototype.addFeaturesInternal=function(t){for(var e=[],i=[],o=[],a=0,l=t.length;a<l;a++){var c=G(u=t[a]);this.addToIndex_(c,u)&&i.push(u)}a=0;for(var h=i.length;a<h;a++){var u;c=G(u=i[a]),this.setupChangeEvents_(c,u);var d=u.getGeometry();if(d){var f=d.getExtent();e.push(f),o.push(u)}else this.nullGeometryFeatures_[c]=u}this.featuresRtree_&&this.featuresRtree_.load(e,o),a=0;for(var p=i.length;a<p;a++)this.dispatchEvent(new xe("addfeature",i[a]))},n.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener("addfeature",function(i){e||(e=!0,t.push(i.feature),e=!1)}),this.addEventListener("removefeature",function(i){e||(e=!0,t.remove(i.feature),e=!1)}),t.addEventListener("add",function(i){e||(e=!0,this.addFeature(i.element),e=!1)}.bind(this)),t.addEventListener("remove",function(i){e||(e=!0,this.removeFeature(i.element),e=!1)}.bind(this)),this.featuresCollection_=t},n.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_)this.featureChangeKeys_[e].forEach(ct);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var o in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[o]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var a=new xe("clear");this.dispatchEvent(a),this.changed()},n.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},n.prototype.forEachFeatureAtCoordinateDirect=function(t,e){return this.forEachFeatureInExtent([t[0],t[1],t[0],t[1]],function(o){if(o.getGeometry().intersectsCoordinate(t))return e(o)})},n.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},n.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){var a=e(i);if(a)return a}})},n.prototype.getFeaturesCollection=function(){return this.featuresCollection_},n.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Ln(this.nullGeometryFeatures_)||Fe(t,Eo(this.nullGeometryFeatures_))),t},n.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){e.push(i)}),e},n.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},n.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],o=t[1],a=null,l=[NaN,NaN],u=1/0,c=[-1/0,-1/0,1/0,1/0],h=e||L;return this.featuresRtree_.forEachInExtent(c,function(d){if(h(d)){var f=d.getGeometry(),p=u;if((u=f.closestPointXY(i,o,l,u))<p){a=d;var _=Math.sqrt(u);c[0]=i-_,c[1]=o-_,c[2]=i+_,c[3]=o+_}}}),a},n.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},n.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},n.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},n.prototype.getFormat=function(){return this.format_},n.prototype.getOverlaps=function(){return this.overlaps_},n.prototype.getUrl=function(){return this.url_},n.prototype.handleFeatureChange_=function(t){var e=t.target,i=G(e),o=e.getGeometry();if(o){var a=o.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(a,e)):this.featuresRtree_&&this.featuresRtree_.update(a,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);var l=e.getId();if(void 0!==l){var u=l.toString();this.idIndex_[u]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[u]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new xe("changefeature",e))},n.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:G(t)in this.uidIndex_},n.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Ln(this.nullGeometryFeatures_)},n.prototype.loadFeatures=function(t,e,i){for(var o=this.loadedExtentsRtree_,a=this.strategy_(t,e,i),l=function(d,f){var p=a[d];o.forEachInExtent(p,function(v){return tn(v.extent,p)})||(++u.loadingExtentsCount_,u.dispatchEvent(new xe("featuresloadstart")),u.loader_.call(u,p,e,i,function(v){--this.loadingExtentsCount_,this.dispatchEvent(new xe("featuresloadend",void 0,v))}.bind(u),function(){--this.loadingExtentsCount_,this.dispatchEvent(new xe("featuresloaderror"))}.bind(u)),o.insert(p,{extent:p.slice()}))},u=this,c=0,h=a.length;c<h;++c)l(c);this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0},n.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),r.prototype.refresh.call(this)},n.prototype.removeLoadedExtent=function(t){var i,e=this.loadedExtentsRtree_;e.forEachInExtent(t,function(o){if(Pn(o.extent,t))return i=o,!0}),i&&e.remove(i)},n.prototype.removeFeature=function(t){var e=G(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},n.prototype.removeFeatureInternal=function(t){var e=G(t);this.featureChangeKeys_[e].forEach(ct),delete this.featureChangeKeys_[e];var i=t.getId();void 0!==i&&delete this.idIndex_[i.toString()],delete this.uidIndex_[e],this.dispatchEvent(new xe("removefeature",t))},n.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},n.prototype.setLoader=function(t){this.loader_=t},n.prototype.setUrl=function(t){Q(this.format_,7),this.url_=t,this.setLoader(za(t,this.format_))},n}(Na),Ka=function(){function r(n){this.opacity_=n.opacity,this.rotateWithView_=n.rotateWithView,this.rotation_=n.rotation,this.scale_=n.scale,this.scaleArray_=Jt(n.scale),this.displacement_=n.displacement}return r.prototype.clone=function(){var n=this.getScale();return new r({opacity:this.getOpacity(),scale:Array.isArray(n)?n.slice():n,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},r.prototype.getOpacity=function(){return this.opacity_},r.prototype.getRotateWithView=function(){return this.rotateWithView_},r.prototype.getRotation=function(){return this.rotation_},r.prototype.getScale=function(){return this.scale_},r.prototype.getScaleArray=function(){return this.scaleArray_},r.prototype.getDisplacement=function(){return this.displacement_},r.prototype.getAnchor=function(){return P()},r.prototype.getImage=function(n){return P()},r.prototype.getHitDetectionImage=function(){return P()},r.prototype.getPixelRatio=function(n){return 1},r.prototype.getImageState=function(){return P()},r.prototype.getImageSize=function(){return P()},r.prototype.getOrigin=function(){return P()},r.prototype.getSize=function(){return P()},r.prototype.setOpacity=function(n){this.opacity_=n},r.prototype.setRotateWithView=function(n){this.rotateWithView_=n},r.prototype.setRotation=function(n){this.rotation_=n},r.prototype.setScale=function(n){this.scale_=n,this.scaleArray_=Jt(n)},r.prototype.listenImageChange=function(n){P()},r.prototype.load=function(){P()},r.prototype.unlistenImageChange=function(n){P()},r}();function $t(r){return Array.isArray(r)?mo(r):r}var Mf=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const Zf=function(r){function n(t){var e=this;return(e=r.call(this,{opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0]})||this).canvas_=void 0,e.hitDetectionCanvas_=null,e.fill_=void 0!==t.fill?t.fill:null,e.origin_=[0,0],e.points_=t.points,e.radius_=void 0!==t.radius?t.radius:t.radius1,e.radius2_=t.radius2,e.angle_=void 0!==t.angle?t.angle:0,e.stroke_=void 0!==t.stroke?t.stroke:null,e.anchor_=null,e.size_=null,e.renderOptions_=null,e.render(),e}return Mf(n,r),n.prototype.clone=function(){var t=this.getScale(),e=new n({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return e.setOpacity(this.getOpacity()),e},n.prototype.getAnchor=function(){return this.anchor_},n.prototype.getAngle=function(){return this.angle_},n.prototype.getFill=function(){return this.fill_},n.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},n.prototype.getImage=function(t){var e=this.canvas_[t];if(!e){var i=this.renderOptions_,o=Nt(i.size*t,i.size*t);this.draw_(i,o,t),this.canvas_[t]=e=o.canvas}return e},n.prototype.getPixelRatio=function(t){return t},n.prototype.getImageSize=function(){return this.size_},n.prototype.getImageState=function(){return 2},n.prototype.getOrigin=function(){return this.origin_},n.prototype.getPoints=function(){return this.points_},n.prototype.getRadius=function(){return this.radius_},n.prototype.getRadius2=function(){return this.radius2_},n.prototype.getSize=function(){return this.size_},n.prototype.getStroke=function(){return this.stroke_},n.prototype.listenImageChange=function(t){},n.prototype.load=function(){},n.prototype.unlistenImageChange=function(t){},n.prototype.calculateLineJoinSize_=function(t,e,i){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;var o=this.radius_,a=void 0===this.radius2_?o:this.radius2_;if(o<a){var l=o;o=a,a=l}var c=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),h=a*Math.sin(c),f=o-Math.sqrt(a*a-h*h),p=Math.sqrt(h*h+f*f),_=p/h;if("miter"===t&&_<=i)return _*e;var v=e/2/_,g=e/2*(f/p),E=Math.sqrt((o+v)*(o+v)+g*g)-o;if(void 0===this.radius2_||"bevel"===t)return 2*E;var m=o*Math.sin(c),A=a-Math.sqrt(o*o-m*m),I=Math.sqrt(m*m+A*A)/m;return I<=i?2*Math.max(E,I*e/2-a-o):2*E},n.prototype.createRenderOptions=function(){var a,t=un,e=0,i=null,o=0,l=0;this.stroke_&&(null===(a=this.stroke_.getColor())&&(a=Nn),a=$t(a),void 0===(l=this.stroke_.getWidth())&&(l=1),i=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),void 0===(t=this.stroke_.getLineJoin())&&(t=un),void 0===(e=this.stroke_.getMiterLimit())&&(e=10));var u=this.calculateLineJoinSize_(t,l,e),c=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:a,strokeWidth:l,size:Math.ceil(2*c+u),lineDash:i,lineDashOffset:o,lineJoin:t,miterLimit:e}},n.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size,e=this.getDisplacement();this.canvas_={},this.anchor_=[t/2-e[0],t/2+e[1]],this.size_=[t,t]},n.prototype.draw_=function(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){var o=this.fill_.getColor();null===o&&(o=ae),e.fillStyle=$t(o),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())},n.prototype.createHitDetectionCanvas_=function(t){if(this.fill_){var e=this.fill_.getColor(),i=0;if("string"==typeof e&&(e=vo(e)),null===e?i=1:Array.isArray(e)&&(i=4===e.length?e[3]:1),0===i){var o=Nt(t.size,t.size);this.hitDetectionCanvas_=o.canvas,this.drawHitDetectionCanvas_(t,o)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},n.prototype.createPath_=function(t){var e=this.points_,i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{var o=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(e*=2);for(var a=this.angle_-Math.PI/2,l=2*Math.PI/e,u=0;u<e;u++){var c=a+u*l,h=u%2==0?i:o;t.lineTo(h*Math.cos(c),h*Math.sin(c))}t.closePath()}},n.prototype.drawHitDetectionCanvas_=function(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=ae,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())},n}(Ka);var Ff=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const Nf=function(r){function n(t){var i=t||{};return r.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,scale:void 0!==i.scale?i.scale:1,rotation:void 0!==i.rotation?i.rotation:0,rotateWithView:void 0!==i.rotateWithView&&i.rotateWithView,displacement:void 0!==i.displacement?i.displacement:[0,0]})||this}return Ff(n,r),n.prototype.clone=function(){var t=this.getScale(),e=new n({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return e.setOpacity(this.getOpacity()),e},n.prototype.setRadius=function(t){this.radius_=t,this.render()},n}(Zf),kf=function(){function r(n){var t=n||{};this.color_=void 0!==t.color?t.color:null}return r.prototype.clone=function(){var n=this.getColor();return new r({color:Array.isArray(n)?n.slice():n||void 0})},r.prototype.getColor=function(){return this.color_},r.prototype.setColor=function(n){this.color_=n},r}(),Uf=function(){function r(n){var t=n||{};this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}return r.prototype.clone=function(){var n=this.getColor();return new r({color:Array.isArray(n)?n.slice():n||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},r.prototype.getColor=function(){return this.color_},r.prototype.getLineCap=function(){return this.lineCap_},r.prototype.getLineDash=function(){return this.lineDash_},r.prototype.getLineDashOffset=function(){return this.lineDashOffset_},r.prototype.getLineJoin=function(){return this.lineJoin_},r.prototype.getMiterLimit=function(){return this.miterLimit_},r.prototype.getWidth=function(){return this.width_},r.prototype.setColor=function(n){this.color_=n},r.prototype.setLineCap=function(n){this.lineCap_=n},r.prototype.setLineDash=function(n){this.lineDash_=n},r.prototype.setLineDashOffset=function(n){this.lineDashOffset_=n},r.prototype.setLineJoin=function(n){this.lineJoin_=n},r.prototype.setMiterLimit=function(n){this.miterLimit_=n},r.prototype.setWidth=function(n){this.width_=n},r}();var gn=function(){function r(n){var t=n||{};this.geometry_=null,this.geometryFunction_=Ja,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}return r.prototype.clone=function(){var n=this.getGeometry();return n&&"object"==typeof n&&(n=n.clone()),new r({geometry:n,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},r.prototype.getRenderer=function(){return this.renderer_},r.prototype.setRenderer=function(n){this.renderer_=n},r.prototype.setHitDetectionRenderer=function(n){this.hitDetectionRenderer_=n},r.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},r.prototype.getGeometry=function(){return this.geometry_},r.prototype.getGeometryFunction=function(){return this.geometryFunction_},r.prototype.getFill=function(){return this.fill_},r.prototype.setFill=function(n){this.fill_=n},r.prototype.getImage=function(){return this.image_},r.prototype.setImage=function(n){this.image_=n},r.prototype.getStroke=function(){return this.stroke_},r.prototype.setStroke=function(n){this.stroke_=n},r.prototype.getText=function(){return this.text_},r.prototype.setText=function(n){this.text_=n},r.prototype.getZIndex=function(){return this.zIndex_},r.prototype.setGeometry=function(n){"function"==typeof n?this.geometryFunction_=n:"string"==typeof n?this.geometryFunction_=function(t){return t.get(n)}:n?void 0!==n&&(this.geometryFunction_=function(){return n}):this.geometryFunction_=Ja,this.geometry_=n},r.prototype.setZIndex=function(n){this.zIndex_=n},r}(),Xr=null;function Yf(r,n){if(!Xr){var t=new kf({color:"rgba(255,255,255,0.4)"}),e=new Uf({color:"#3399CC",width:1.25});Xr=[new gn({image:new Nf({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return Xr}function Ja(r){return r.getGeometry()}const jf=gn;var Bf=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const Wf=function(r){function n(t){var e=this,i=t||{},o=Et({},i);return delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,(e=r.call(this,o)||this).declutter_=void 0!==i.declutter&&i.declutter,e.renderBuffer_=void 0!==i.renderBuffer?i.renderBuffer:100,e.style_=null,e.styleFunction_=void 0,e.setStyle(i.style),e.updateWhileAnimating_=void 0!==i.updateWhileAnimating&&i.updateWhileAnimating,e.updateWhileInteracting_=void 0!==i.updateWhileInteracting&&i.updateWhileInteracting,e}return Bf(n,r),n.prototype.getDeclutter=function(){return this.declutter_},n.prototype.getFeatures=function(t){return r.prototype.getFeatures.call(this,t)},n.prototype.getRenderBuffer=function(){return this.renderBuffer_},n.prototype.getRenderOrder=function(){return this.get("renderOrder")},n.prototype.getStyle=function(){return this.style_},n.prototype.getStyleFunction=function(){return this.styleFunction_},n.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},n.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},n.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new Xa(9)),this.getRenderer().renderDeclutter(t)},n.prototype.setRenderOrder=function(t){this.set("renderOrder",t)},n.prototype.setStyle=function(t){this.style_=void 0!==t?t:Yf,this.styleFunction_=null===t?void 0:function(r){var n,t;"function"==typeof r?n=r:(Array.isArray(r)?t=r:(Q("function"==typeof r.getZIndex,41),t=[r]),n=function(){return t});return n}(this.style_),this.changed()},n}(wo);var Vn={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},ki=[Vn.FILL],Ce=[Vn.STROKE],Ke=[Vn.BEGIN_PATH],$a=[Vn.CLOSE_PATH];const q=Vn,ts=function(){function r(){}return r.prototype.drawCustom=function(n,t,e,i){},r.prototype.drawGeometry=function(n){},r.prototype.setStyle=function(n){},r.prototype.drawCircle=function(n,t){},r.prototype.drawFeature=function(n,t){},r.prototype.drawGeometryCollection=function(n,t){},r.prototype.drawLineString=function(n,t){},r.prototype.drawMultiLineString=function(n,t){},r.prototype.drawMultiPoint=function(n,t){},r.prototype.drawMultiPolygon=function(n,t){},r.prototype.drawPoint=function(n,t){},r.prototype.drawPolygon=function(n,t){},r.prototype.drawText=function(n,t){},r.prototype.setFillStrokeStyle=function(n,t){},r.prototype.setImageStyle=function(n,t){},r.prototype.setTextStyle=function(n,t){},r}();var zf=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const zn=function(r){function n(t,e,i,o){var a=r.call(this)||this;return a.tolerance=t,a.maxExtent=e,a.pixelRatio=o,a.maxLineWidth=0,a.resolution=i,a.beginGeometryInstruction1_=null,a.beginGeometryInstruction2_=null,a.bufferedMaxExtent_=null,a.instructions=[],a.coordinates=[],a.tmpCoordinate_=[],a.hitDetectionInstructions=[],a.state={},a}return zf(n,r),n.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(i){return i*e})},n.prototype.appendFlatPointCoordinates=function(t,e){for(var i=this.getBufferedMaxExtent(),o=this.tmpCoordinate_,a=this.coordinates,l=a.length,u=0,c=t.length;u<c;u+=e)o[0]=t[u],o[1]=t[u+1],ui(i,o)&&(a[l++]=o[0],a[l++]=o[1]);return l},n.prototype.appendFlatLineCoordinates=function(t,e,i,o,a,l){var u=this.coordinates,c=u.length,h=this.getBufferedMaxExtent();l&&(e+=o);var v,g,x,d=t[e],f=t[e+1],p=this.tmpCoordinate_,_=!0;for(v=e+o;v<i;v+=o)p[0]=t[v],p[1]=t[v+1],(x=nr(h,p))!==g?(_&&(u[c++]=d,u[c++]=f,_=!1),u[c++]=p[0],u[c++]=p[1]):1===x?(u[c++]=p[0],u[c++]=p[1],_=!1):_=!0,d=p[0],f=p[1],g=x;return(a&&_||v===e+o)&&(u[c++]=d,u[c++]=f),c},n.prototype.drawCustomCoordinates_=function(t,e,i,o,a){for(var l=0,u=i.length;l<u;++l){var c=i[l],h=this.appendFlatLineCoordinates(t,e,c,o,!1,!1);a.push(h),e=c}return e},n.prototype.drawCustom=function(t,e,i,o){this.beginGeometry(t,e);var c,h,d,f,p,a=t.getType(),l=t.getStride(),u=this.coordinates.length;switch(a){case"MultiPolygon":c=t.getOrientedFlatCoordinates(),f=[];var _=t.getEndss();p=0;for(var v=0,g=_.length;v<g;++v){var x=[];p=this.drawCustomCoordinates_(c,p,_[v],l,x),f.push(x)}this.instructions.push([q.CUSTOM,u,f,t,i,ca]),this.hitDetectionInstructions.push([q.CUSTOM,u,f,t,o||i,ca]);break;case"Polygon":case"MultiLineString":d=[],c="Polygon"==a?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),p=this.drawCustomCoordinates_(c,0,t.getEnds(),l,d),this.instructions.push([q.CUSTOM,u,d,t,i,Zi]),this.hitDetectionInstructions.push([q.CUSTOM,u,d,t,o||i,Zi]);break;case"LineString":case"Circle":c=t.getFlatCoordinates(),h=this.appendFlatLineCoordinates(c,0,c.length,l,!1,!1),this.instructions.push([q.CUSTOM,u,h,t,i,_n]),this.hitDetectionInstructions.push([q.CUSTOM,u,h,t,o||i,_n]);break;case"MultiPoint":c=t.getFlatCoordinates(),(h=this.appendFlatPointCoordinates(c,l))>u&&(this.instructions.push([q.CUSTOM,u,h,t,i,_n]),this.hitDetectionInstructions.push([q.CUSTOM,u,h,t,o||i,_n]));break;case"Point":c=t.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),this.instructions.push([q.CUSTOM,u,h=this.coordinates.length,t,i]),this.hitDetectionInstructions.push([q.CUSTOM,u,h,t,o||i])}this.endGeometry(e)},n.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[q.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[q.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},n.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},n.prototype.reverseHitDetectionInstructions=function(){var t=this.hitDetectionInstructions;t.reverse();var e,o,a,i=t.length,l=-1;for(e=0;e<i;++e)(a=(o=t[e])[0])==q.END_GEOMETRY?l=e:a==q.BEGIN_GEOMETRY&&(o[2]=e,In(this.hitDetectionInstructions,l,e),l=-1)},n.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var o=t.getColor();i.fillStyle=$t(o||ae)}else i.fillStyle=void 0;if(e){var a=e.getColor();i.strokeStyle=$t(a||Nn);var l=e.getLineCap();i.lineCap=void 0!==l?l:Ti;var u=e.getLineDash();i.lineDash=u?u.slice():Zn;var c=e.getLineDashOffset();i.lineDashOffset=c||0;var h=e.getLineJoin();i.lineJoin=void 0!==h?h:un;var d=e.getWidth();i.lineWidth=void 0!==d?d:1;var f=e.getMiterLimit();i.miterLimit=void 0!==f?f:10,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},n.prototype.createFill=function(t){var e=t.fillStyle,i=[q.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(!0),i},n.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},n.prototype.createStroke=function(t){return[q.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},n.prototype.updateFillStyle=function(t,e){var i=t.fillStyle;("string"!=typeof i||t.currentFillStyle!=i)&&(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)},n.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,o=t.lineCap,a=t.lineDash,l=t.lineDashOffset,u=t.lineJoin,c=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=o||a!=t.currentLineDash&&!y(t.currentLineDash,a)||t.currentLineDashOffset!=l||t.currentLineJoin!=u||t.currentLineWidth!=c||t.currentMiterLimit!=h)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=o,t.currentLineDash=a,t.currentLineDashOffset=l,t.currentLineJoin=u,t.currentLineWidth=c,t.currentMiterLimit=h)},n.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[q.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},n.prototype.getBufferedMaxExtent=function(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=oo(this.maxExtent),this.maxLineWidth>0)&&er(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_},n}(ts);var Kf=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const Qf=function(r){function n(t,e,i,o){var a=r.call(this,t,e,i,o)||this;return a.hitDetectionImage_=null,a.image_=null,a.imagePixelRatio_=void 0,a.anchorX_=void 0,a.anchorY_=void 0,a.height_=void 0,a.opacity_=void 0,a.originX_=void 0,a.originY_=void 0,a.rotateWithView_=void 0,a.rotation_=void 0,a.scale_=void 0,a.width_=void 0,a.declutterImageWithText_=void 0,a}return Kf(n,r),n.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),o=t.getStride(),a=this.coordinates.length,l=this.appendFlatPointCoordinates(i,o);this.instructions.push([q.DRAW_IMAGE,a,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([q.DRAW_IMAGE,a,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(e)}},n.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),o=t.getStride(),a=this.coordinates.length,l=this.appendFlatPointCoordinates(i,o);this.instructions.push([q.DRAW_IMAGE,a,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([q.DRAW_IMAGE,a,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(e)}},n.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,r.prototype.finish.call(this)},n.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),o=t.getSize(),a=t.getHitDetectionImage(),l=t.getImage(this.pixelRatio),u=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=a,this.image_=l,this.height_=o[1],this.opacity_=t.getOpacity(),this.originX_=u[0]*this.imagePixelRatio_,this.originY_=u[1]*this.imagePixelRatio_,this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=o[0],this.declutterImageWithText_=e},n}(zn);var $f=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const ed=function(r){function n(t,e,i,o){return r.call(this,t,e,i,o)||this}return $f(n,r),n.prototype.drawFlatCoordinates_=function(t,e,i,o){var a=this.coordinates.length,l=this.appendFlatLineCoordinates(t,e,i,o,!1,!1),u=[q.MOVE_TO_LINE_TO,a,l];return this.instructions.push(u),this.hitDetectionInstructions.push(u),i},n.prototype.drawLineString=function(t,e){var i=this.state;if(void 0!==i.strokeStyle&&void 0!==i.lineWidth){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([q.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Zn,0],Ke);var l=t.getFlatCoordinates(),u=t.getStride();this.drawFlatCoordinates_(l,0,l.length,u),this.hitDetectionInstructions.push(Ce),this.endGeometry(e)}},n.prototype.drawMultiLineString=function(t,e){var i=this.state;if(void 0!==i.strokeStyle&&void 0!==i.lineWidth){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([q.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Ke);for(var l=t.getEnds(),u=t.getFlatCoordinates(),c=t.getStride(),h=0,d=0,f=l.length;d<f;++d)h=this.drawFlatCoordinates_(u,h,l[d],c);this.hitDetectionInstructions.push(Ce),this.endGeometry(e)}},n.prototype.finish=function(){var t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Ce),this.reverseHitDetectionInstructions(),this.state=null,r.prototype.finish.call(this)},n.prototype.applyStroke=function(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Ce),t.lastStroke=this.coordinates.length),t.lastStroke=0,r.prototype.applyStroke.call(this,t),this.instructions.push(Ke)},n}(zn);var nd=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const es=function(r){function n(t,e,i,o){return r.call(this,t,e,i,o)||this}return nd(n,r),n.prototype.drawFlatCoordinatess_=function(t,e,i,o){var a=this.state,l=void 0!==a.fillStyle,u=void 0!==a.strokeStyle,c=i.length;this.instructions.push(Ke),this.hitDetectionInstructions.push(Ke);for(var h=0;h<c;++h){var d=i[h],f=this.coordinates.length,p=this.appendFlatLineCoordinates(t,e,d,o,!0,!u),_=[q.MOVE_TO_LINE_TO,f,p];this.instructions.push(_),this.hitDetectionInstructions.push(_),u&&(this.instructions.push($a),this.hitDetectionInstructions.push($a)),e=d}return l&&(this.instructions.push(ki),this.hitDetectionInstructions.push(ki)),u&&(this.instructions.push(Ce),this.hitDetectionInstructions.push(Ce)),e},n.prototype.drawCircle=function(t,e){var i=this.state;if(void 0!==i.fillStyle||void 0!==i.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([q.SET_FILL_STYLE,ae]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([q.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var l=t.getFlatCoordinates(),u=t.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(l,0,l.length,u,!1,!1);var h=[q.CIRCLE,c];this.instructions.push(Ke,h),this.hitDetectionInstructions.push(Ke,h),void 0!==i.fillStyle&&(this.instructions.push(ki),this.hitDetectionInstructions.push(ki)),void 0!==i.strokeStyle&&(this.instructions.push(Ce),this.hitDetectionInstructions.push(Ce)),this.endGeometry(e)}},n.prototype.drawPolygon=function(t,e){var i=this.state;if(void 0!==i.fillStyle||void 0!==i.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([q.SET_FILL_STYLE,ae]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([q.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var l=t.getEnds(),u=t.getOrientedFlatCoordinates(),c=t.getStride();this.drawFlatCoordinatess_(u,0,l,c),this.endGeometry(e)}},n.prototype.drawMultiPolygon=function(t,e){var i=this.state;if(void 0!==i.fillStyle||void 0!==i.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([q.SET_FILL_STYLE,ae]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([q.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var l=t.getEndss(),u=t.getOrientedFlatCoordinates(),c=t.getStride(),h=0,d=0,f=l.length;d<f;++d)h=this.drawFlatCoordinatess_(u,h,l[d],c);this.endGeometry(e)}},n.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var e=this.coordinates,i=0,o=e.length;i<o;++i)e[i]=Ve(e[i],t);return r.prototype.finish.call(this)},n.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},n}(zn);function od(r,n,t,e,i){var d,f,p,_,v,g,x,E,m,o=t,a=t,l=0,u=0,c=t;for(d=t;d<e;d+=i){var T=n[d],A=n[d+1];void 0!==_&&(E=T-_,m=A-v,p=Math.sqrt(E*E+m*m),void 0!==g&&(u+=f,Math.acos((g*E+x*m)/(f*p))>r&&(u>l&&(l=u,o=c,a=d),u=0,c=d-i)),f=p,g=E,x=m),_=T,v=A}return(u+=p)>l?[c,d]:[o,a]}var ad=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gi={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},ld={Circle:es,Default:zn,Image:Qf,LineString:ed,Polygon:es,Text:function(r){function n(t,e,i,o){var a=r.call(this,t,e,i,o)||this;return a.labels_=null,a.text_="",a.textOffsetX_=0,a.textOffsetY_=0,a.textRotateWithView_=void 0,a.textRotation_=0,a.textFillState_=null,a.fillStates={},a.textStrokeState_=null,a.strokeStates={},a.textState_={},a.textStates={},a.textKey_="",a.fillKey_="",a.strokeKey_="",a.declutterImageWithText_=void 0,a}return ad(n,r),n.prototype.finish=function(){var t=r.prototype.finish.call(this);return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t},n.prototype.drawText=function(t,e){var a=this.textState_;if(""!==this.text_&&a&&(this.textFillState_||this.textStrokeState_)){var l=this.coordinates,u=l.length,c=t.getType(),h=null,d=t.getStride();if("line"!==a.placement||"LineString"!=c&&"MultiLineString"!=c&&"Polygon"!=c&&"MultiPolygon"!=c){var I=a.overflow?null:[];switch(c){case"Point":case"MultiPoint":h=t.getFlatCoordinates();break;case"LineString":h=t.getFlatMidpoint();break;case"Circle":h=t.getCenter();break;case"MultiLineString":h=t.getFlatMidpoints(),d=2;break;case"Polygon":h=t.getFlatInteriorPoint(),a.overflow||I.push(h[2]/this.resolution),d=3;break;case"MultiPolygon":var R=t.getFlatInteriorPoints();for(h=[],_=0,v=R.length;_<v;_+=3)a.overflow||I.push(R[_+2]/this.resolution),h.push(R[_],R[_+1]);if(0===h.length)return;d=2}if((S=this.appendFlatPointCoordinates(h,d))===u)return;if(I&&(S-u)/2!=h.length/d){var M=u/2;I=I.filter(function(nt,tt){var ot=l[2*(M+tt)]===h[tt*d]&&l[2*(M+tt)+1]===h[tt*d+1];return ot||--M,ot})}this.saveTextStates_(),(a.backgroundFill||a.backgroundStroke)&&(this.setFillStrokeStyle(a.backgroundFill,a.backgroundStroke),a.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),a.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var k=a.padding;if(k!=je&&(a.scale[0]<0||a.scale[1]<0)){var N=a.padding[0],W=a.padding[1],U=a.padding[2],J=a.padding[3];a.scale[0]<0&&(W=-W,J=-J),a.scale[1]<0&&(N=-N,U=-U),k=[N,W,U,J]}var B=this.pixelRatio;this.instructions.push([q.DRAW_IMAGE,u,S,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,k==je?je:k.map(function(nt){return nt*B}),!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,I]);var V=1/B;this.hitDetectionInstructions.push([q.DRAW_IMAGE,u,S,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[V,V],NaN,this.declutterImageWithText_,k,!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,I]),this.endGeometry(e)}else{if(!Mt(this.getBufferedMaxExtent(),t.getExtent()))return;var f=void 0;if(h=t.getFlatCoordinates(),"LineString"==c)f=[h.length];else if("MultiLineString"==c)f=t.getEnds();else if("Polygon"==c)f=t.getEnds().slice(0,1);else if("MultiPolygon"==c){var p=t.getEndss();f=[];for(var _=0,v=p.length;_<v;++_)f.push(p[_][0])}this.beginGeometry(t,e);for(var g=a.textAlign,x=0,E=void 0,m=0,T=f.length;m<T;++m){if(null==g){var A=od(a.maxAngle,h,x,f[m],d);x=A[0],E=A[1]}else E=f[m];for(_=x;_<E;_+=d)l.push(h[_],h[_+1]);var S;x=f[m],this.drawChars_(u,S=l.length),u=S}this.endGeometry(e)}}},n.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,o=this.strokeKey_;t&&(o in this.strokeStates||(this.strokeStates[o]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var a=this.textKey_;a in this.textStates||(this.textStates[a]={font:e.font,textAlign:e.textAlign||bn,textBaseline:e.textBaseline||xi,scale:e.scale});var l=this.fillKey_;i&&(l in this.fillStates||(this.fillStates[l]={fillStyle:i.fillStyle}))},n.prototype.drawChars_=function(t,e){var i=this.textStrokeState_,o=this.textState_,a=this.strokeKey_,l=this.textKey_,u=this.fillKey_;this.saveTextStates_();var c=this.pixelRatio,h=Gi[o.textBaseline],d=this.textOffsetY_*c,f=this.text_,p=i?i.lineWidth*Math.abs(o.scale[0])/2:0;this.instructions.push([q.DRAW_CHARS,t,e,h,o.overflow,u,o.maxAngle,c,d,a,p*c,f,l,1]),this.hitDetectionInstructions.push([q.DRAW_CHARS,t,e,h,o.overflow,u,o.maxAngle,1,d,a,p,f,l,1/c])},n.prototype.setTextStyle=function(t,e){var i,o,a;if(t){var l=t.getFill();l?((o=this.textFillState_)||(this.textFillState_=o={}),o.fillStyle=$t(l.getColor()||ae)):this.textFillState_=o=null;var u=t.getStroke();if(u){(a=this.textStrokeState_)||(this.textStrokeState_=a={});var c=u.getLineDash(),h=u.getLineDashOffset(),d=u.getWidth(),f=u.getMiterLimit();a.lineCap=u.getLineCap()||Ti,a.lineDash=c?c.slice():Zn,a.lineDashOffset=void 0===h?0:h,a.lineJoin=u.getLineJoin()||un,a.lineWidth=void 0===d?1:d,a.miterLimit=void 0===f?10:f,a.strokeStyle=$t(u.getColor()||Nn)}else this.textStrokeState_=a=null;i=this.textState_;var p=t.getFont()||Fo;ml(p);var _=t.getScaleArray();i.overflow=t.getOverflow(),i.font=p,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||xi,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||je,i.scale=void 0===_?[1,1]:_;var v=t.getOffsetX(),g=t.getOffsetY(),x=t.getRotateWithView(),E=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===v?0:v,this.textOffsetY_=void 0===g?0:g,this.textRotateWithView_=void 0!==x&&x,this.textRotation_=void 0===E?0:E,this.strokeKey_=a?("string"==typeof a.strokeStyle?a.strokeStyle:G(a.strokeStyle))+a.lineCap+a.lineDashOffset+"|"+a.lineWidth+a.lineJoin+a.miterLimit+"["+a.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.textBaseline||"?"),this.fillKey_=o?"string"==typeof o.fillStyle?o.fillStyle:"|"+G(o.fillStyle):""}else this.text_="";this.declutterImageWithText_=e},n}(zn)};const ns=function(){function r(n,t,e,i){this.tolerance_=n,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=e,this.buildersByZIndex_={}}return r.prototype.finish=function(){var n={};for(var t in this.buildersByZIndex_){n[t]=n[t]||{};var e=this.buildersByZIndex_[t];for(var i in e){var o=e[i].finish();n[t][i]=o}}return n},r.prototype.getBuilder=function(n,t){var e=void 0!==n?n.toString():"0",i=this.buildersByZIndex_[e];void 0===i&&(this.buildersByZIndex_[e]=i={});var o=i[t];return void 0===o&&(o=new(0,ld[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=o),o},r}();function cd(r,n,t,e,i,o,a,l,u,c,h,d){var f=r[n],p=r[n+1],_=0,v=0,g=0,x=0;function E(){_=f,v=p,f=r[n+=e],p=r[n+1],x+=g,g=Math.sqrt((f-_)*(f-_)+(p-v)*(p-v))}do{E()}while(n<t-e&&x+g<o);for(var m=0===g?0:(o-x)/g,T=Ge(_,f,m),A=Ge(v,p,m),S=n-e,I=x,R=o+l*u(c,i,h);n<t-e&&x+g<R;)E();var N,M=Ge(_,f,m=0===g?0:(R-x)/g),k=Ge(v,p,m);if(d){var W=[T,A,M,k];$o(W,0,4,2,d,W,W),N=W[0]>W[2]}else N=T>M;var V,U=Math.PI,J=[],B=S+e===n;if(g=0,x=I,f=r[n=S],p=r[n+1],B)return E(),V=Math.atan2(p-v,f-_),N&&(V+=V>0?-U:U),J[0]=[j=(M+T)/2,nt=(k+A)/2,(R-o)/2,V,i],J;for(var tt=0,ot=i.length;tt<ot;){E();var pt=Math.atan2(p-v,f-_);if(N&&(pt+=pt>0?-U:U),void 0!==V){var w=pt-V;if(w+=w>U?-2*U:w<-U?2*U:0,Math.abs(w)>a)return null}V=pt;for(var Tt=tt,H=0;tt<ot;++tt){var Ot=l*u(c,i[N?ot-tt-1:tt],h);if(n+e<t&&x+g<o+H+Ot/2)break;H+=Ot}if(tt!==Tt){var Zt=N?i.substring(ot-Tt,ot-tt):i.substring(Tt,tt),j=Ge(_,f,m=0===g?0:(o+H/2-x)/g),nt=Ge(v,p,m);J.push([j,nt,H/2,pt,Zt]),o+=H}}return J}function is(r,n,t,e){for(var i=r[n],o=r[n+1],a=0,l=n+e;l<t;l+=e){var u=r[l],c=r[l+1];a+=Math.sqrt((u-i)*(u-i)+(c-o)*(c-o)),i=u,o=c}return a}var mn=[1/0,1/0,-1/0,-1/0],Ae=[],he=[],fe=[],we=[];function rs(r){return r[3].declutterBox}var hd=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function os(r,n){return("start"===n||"end"===n)&&!hd.test(r)&&(n="start"===n?"left":"right"),Gi[n]}const dd=function(){function r(n,t,e,i){this.overlaps=e,this.pixelRatio=t,this.resolution=n,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={}}return r.prototype.createLabel=function(n,t,e,i){var o=n+t+e+i;if(this.labels_[o])return this.labels_[o];var a=i?this.strokeStates[i]:null,l=e?this.fillStates[e]:null,u=this.textStates[t],c=this.pixelRatio,h=[u.scale[0]*c,u.scale[1]*c],d=os(n,u.textAlign||bn),f=i&&a.lineWidth?a.lineWidth:0,p=n.split("\n"),_=p.length,v=[],g=function(r,n,t){for(var e=n.length,i=0,o=0;o<e;++o){var a=Ci(r,n[o]);i=Math.max(i,a),t.push(a)}return i}(u.font,p,v),x=yl(u.font),m=g+f,T=[],A=(m+2)*h[0],S=(x*_+f)*h[1],I={width:A<0?Math.floor(A):Math.ceil(A),height:S<0?Math.floor(S):Math.ceil(S),contextInstructions:T};(1!=h[0]||1!=h[1])&&T.push("scale",h),T.push("font",u.font),i&&(T.push("strokeStyle",a.strokeStyle),T.push("lineWidth",f),T.push("lineCap",a.lineCap),T.push("lineJoin",a.lineJoin),T.push("miterLimit",a.miterLimit),(oe?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(T.push("setLineDash",[a.lineDash]),T.push("lineDashOffset",a.lineDashOffset))),e&&T.push("fillStyle",l.fillStyle),T.push("textBaseline","middle"),T.push("textAlign","center");var N,M=.5-d,k=d*m+M*f;if(i)for(N=0;N<_;++N)T.push("strokeText",[p[N],k+M*v[N],.5*(f+x)+N*x]);if(e)for(N=0;N<_;++N)T.push("fillText",[p[N],k+M*v[N],.5*(f+x)+N*x]);return this.labels_[o]=I,I},r.prototype.replayTextBackground_=function(n,t,e,i,o,a,l){n.beginPath(),n.moveTo.apply(n,t),n.lineTo.apply(n,e),n.lineTo.apply(n,i),n.lineTo.apply(n,o),n.lineTo.apply(n,t),a&&(this.alignFill_=a[2],this.fill_(n)),l&&(this.setStrokeStyle_(n,l),n.stroke())},r.prototype.calculateImageOrLabelDimensions_=function(n,t,e,i,o,a,l,u,c,h,d,f,p,_,v,g){var M,x=e-(l*=f[0]),E=i-(u*=f[1]),m=o+c>n?n-c:o,T=a+h>t?t-h:a,A=_[3]+m*f[0]+_[1],S=_[0]+T*f[1]+_[2],I=x-_[3],R=E-_[0];return(v||0!==d)&&(Ae[0]=I,we[0]=I,Ae[1]=R,he[1]=R,he[0]=I+A,fe[0]=he[0],fe[1]=R+S,we[1]=fe[1]),0!==d?(mt(M=Vt([1,0,0,1,0,0],e,i,1,1,d,-e,-i),Ae),mt(M,he),mt(M,fe),mt(M,we),zt(Math.min(Ae[0],he[0],fe[0],we[0]),Math.min(Ae[1],he[1],fe[1],we[1]),Math.max(Ae[0],he[0],fe[0],we[0]),Math.max(Ae[1],he[1],fe[1],we[1]),mn)):zt(Math.min(I,I+A),Math.min(R,R+S),Math.max(I,I+A),Math.max(R,R+S),mn),p&&(x=Math.round(x),E=Math.round(E)),{drawImageX:x,drawImageY:E,drawImageW:m,drawImageH:T,originX:c,originY:h,declutterBox:{minX:mn[0],minY:mn[1],maxX:mn[2],maxY:mn[3],value:g},canvasTransform:M,scale:f}},r.prototype.replayImageOrLabel_=function(n,t,e,i,o,a,l){var c=i.declutterBox,h=n.canvas,d=l?l[2]*i.scale[0]/2:0;return c.minX-d<=h.width/t&&c.maxX+d>=0&&c.minY-d<=h.height/t&&c.maxY+d>=0&&(!(!a&&!l)&&this.replayTextBackground_(n,Ae,he,fe,we,a,l),function(r,n,t,e,i,o,a,l,u,c,h){r.save(),1!==t&&(r.globalAlpha*=t),n&&r.setTransform.apply(r,n),e.contextInstructions?(r.translate(u,c),r.scale(h[0],h[1]),function(r,n){for(var t=r.contextInstructions,e=0,i=t.length;e<i;e+=2)Array.isArray(t[e+1])?n[t[e]].apply(n,t[e+1]):n[t[e]]=t[e+1]}(e,r)):h[0]<0||h[1]<0?(r.translate(u,c),r.scale(h[0],h[1]),r.drawImage(e,i,o,a,l,0,0,a,l)):r.drawImage(e,i,o,a,l,u,c,a*h[0],l*h[1]),r.restore()}(n,i.canvasTransform,o,e,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0},r.prototype.fill_=function(n){if(this.alignFill_){var t=mt(this.renderedTransform_,[0,0]),e=512*this.pixelRatio;n.save(),n.translate(t[0]%e,t[1]%e),n.rotate(this.viewRotation_)}n.fill(),this.alignFill_&&n.restore()},r.prototype.setStrokeStyle_=function(n,t){n.strokeStyle=t[1],n.lineWidth=t[2],n.lineCap=t[3],n.lineJoin=t[4],n.miterLimit=t[5],n.setLineDash&&(n.lineDashOffset=t[7],n.setLineDash(t[6]))},r.prototype.drawLabelWithPointPlacement_=function(n,t,e,i){var o=this.textStates[t],a=this.createLabel(n,t,i,e),l=this.strokeStates[e],u=this.pixelRatio,c=os(n,o.textAlign||bn),h=Gi[o.textBaseline||xi],d=l&&l.lineWidth?l.lineWidth:0;return{label:a,anchorX:c*(a.width/u-2*o.scale[0])+2*(.5-c)*d,anchorY:h*a.height/u+2*(.5-h)*d}},r.prototype.execute_=function(n,t,e,i,o,a,l,u){var c;this.pixelCoordinates_&&y(e,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=We(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),function(r,n){r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5]}(this.renderedTransform_,e));for(var p,_,v,g,x,E,m,T,A,S,I,R,nt,tt,ot,pt,h=0,d=i.length,f=0,M=0,k=0,N=null,W=null,U=this.coordinateCache_,J=this.viewRotation_,B=Math.round(1e12*Math.atan2(-e[1],e[0]))/1e12,V={context:n,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:J},j=this.instructions!=i||this.overlaps?0:200;h<d;){var w=i[h];switch(w[0]){case q.BEGIN_GEOMETRY:pt=w[3],(nt=w[1]).getGeometry()?void 0===l||Mt(l,pt.getExtent())?++h:h=w[2]+1:h=w[2];break;case q.BEGIN_PATH:M>j&&(this.fill_(n),M=0),k>j&&(n.stroke(),k=0),!M&&!k&&(n.beginPath(),g=NaN,x=NaN),++h;break;case q.CIRCLE:var H=c[f=w[1]],_t=c[f+1],St=c[f+2]-H,Ft=c[f+3]-_t,En=Math.sqrt(St*St+Ft*Ft);n.moveTo(H+En,_t),n.arc(H,_t,En,0,2*Math.PI,!0),++h;break;case q.CLOSE_PATH:n.closePath(),++h;break;case q.CUSTOM:f=w[1],p=w[2];var Yi=w[4],ji=6==w.length?w[5]:void 0;V.geometry=w[3],V.feature=nt,h in U||(U[h]=[]);var Se=U[h];ji?ji(c,f,p,2,Se):(Se[0]=c[f],Se[1]=c[f+1],Se.length=2),Yi(Se,V),++h;break;case q.DRAW_IMAGE:f=w[1],p=w[2],_=w[4],v=w[5];var Tn=w[6],Bi=w[7],Jn=w[8],Xi=w[9],Je=w[10],Qn=w[11],Wi=w[12],xn=w[13],Pe=w[14];if(!(T=w[3])&&w.length>=19){var Cn=this.drawLabelWithPointPlacement_(A=w[18],S=w[19],I=w[20],R=w[21]);w[3]=T=Cn.label,w[4]=_=(Cn.anchorX-w[22])*this.pixelRatio,w[5]=v=(Cn.anchorY-w[23])*this.pixelRatio,w[6]=Tn=T.height,w[13]=xn=T.width}var $n=void 0;w.length>24&&($n=w[24]);var Me=void 0,pe=void 0,Qe=void 0;w.length>16?(Me=w[15],pe=w[16],Qe=w[17]):(Me=je,pe=!1,Qe=!1),Je&&B?Qn+=J:!Je&&!B&&(Qn-=J);for(var An=0;f<p;f+=2)if(!($n&&$n[An++]<xn/this.pixelRatio)){var Wt=[n,t,T,Xt=this.calculateImageOrLabelDimensions_(T.width,T.height,c[f],c[f+1],xn,Tn,_,v,Jn,Xi,Qn,Wi,o,Me,pe||Qe,nt),Bi,pe?N:null,Qe?W:null],$e=void 0,wn=void 0;if(u&&Pe){var zi=p-f;if(!Pe[zi]){Pe[zi]=Wt;continue}if($e=Pe[zi],delete Pe[zi],wn=rs($e),u.collides(wn))continue}u&&u.collides(Xt.declutterBox)||($e&&(u&&u.insert(wn),this.replayImageOrLabel_.apply(this,$e)),u&&u.insert(Xt.declutterBox),this.replayImageOrLabel_.apply(this,Wt))}++h;break;case q.DRAW_CHARS:var _s=w[1],vs=w[2],Kr=w[3],t_=w[4];R=w[5];var e_=w[6],gs=w[7],ms=w[8];I=w[9];var Jr=w[10];A=w[11];var ys=[w[13],w[13]],Qr=this.textStates[S=w[12]],ti=Qr.font,ei=[Qr.scale[0]*gs,Qr.scale[1]*gs],ni=void 0;ti in this.widths_?ni=this.widths_[ti]:this.widths_[ti]=ni={};var Es=is(c,_s,vs,2),Ts=Math.abs(ei[0])*No(ti,A,ni);if(t_||Ts<=Es){var ii=cd(c,_s,vs,2,A,(Es-Ts)*Gi[this.textStates[S].textAlign],e_,Math.abs(ei[0]),No,ti,ni,B?0:this.viewRotation_);t:if(ii){var ri=[],Le=void 0,Hi=void 0,Pt=void 0,Ut=void 0;if(I)for(Le=0,Hi=ii.length;Le<Hi;++Le){Pt=this.createLabel((Ut=ii[Le])[4],S,"",I);var Xt=this.calculateImageOrLabelDimensions_(Pt.width,Pt.height,Ut[0],Ut[1],Pt.width,Pt.height,_=Ut[2]+(ei[0]<0?-Jr:Jr),v=Kr*Pt.height+2*(.5-Kr)*Jr*ei[1]/ei[0]-ms,0,0,Ut[3],ys,!1,je,!1,nt);if(u&&u.collides(Xt.declutterBox))break t;ri.push([n,t,Pt,Xt,1,null,null])}if(R)for(Le=0,Hi=ii.length;Le<Hi;++Le){if(Pt=this.createLabel((Ut=ii[Le])[4],S,R,""),Xt=this.calculateImageOrLabelDimensions_(Pt.width,Pt.height,Ut[0],Ut[1],Pt.width,Pt.height,_=Ut[2],v=Kr*Pt.height-ms,0,0,Ut[3],ys,!1,je,!1,nt),u&&u.collides(Xt.declutterBox))break t;ri.push([n,t,Pt,Xt,1,null,null])}u&&u.load(ri.map(rs));for(var $r=0,r_=ri.length;$r<r_;++$r)this.replayImageOrLabel_.apply(this,ri[$r])}}++h;break;case q.END_GEOMETRY:if(void 0!==a){var xs=a(nt=w[1],pt);if(xs)return xs}++h;break;case q.FILL:j?M++:this.fill_(n),++h;break;case q.MOVE_TO_LINE_TO:for(p=w[2],m=(ot=c[(f=w[1])+1])+.5|0,((E=(tt=c[f])+.5|0)!==g||m!==x)&&(n.moveTo(tt,ot),g=E,x=m),f+=2;f<p;f+=2)E=(tt=c[f])+.5|0,m=(ot=c[f+1])+.5|0,(f==p-2||E!==g||m!==x)&&(n.lineTo(tt,ot),g=E,x=m);++h;break;case q.SET_FILL_STYLE:N=w,this.alignFill_=w[2],M&&(this.fill_(n),M=0,k&&(n.stroke(),k=0)),n.fillStyle=w[1],++h;break;case q.SET_STROKE_STYLE:W=w,k&&(n.stroke(),k=0),this.setStrokeStyle_(n,w),++h;break;case q.STROKE:j?k++:n.stroke(),++h;break;default:++h}}M&&this.fill_(n),k&&n.stroke()},r.prototype.execute=function(n,t,e,i,o,a){this.viewRotation_=i,this.execute_(n,t,e,this.instructions,o,void 0,void 0,a)},r.prototype.executeHitDetection=function(n,t,e,i,o){return this.viewRotation_=e,this.execute_(n,1,t,this.hitDetectionInstructions,!0,i,o)},r}();var Wr=["Polygon","Circle","LineString","Image","Text","Default"],pd=function(){function r(n,t,e,i,o,a){this.maxExtent_=n,this.overlaps_=i,this.pixelRatio_=e,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(o)}return r.prototype.clip=function(n,t){var e=this.getClipCoords(t);n.beginPath(),n.moveTo(e[0],e[1]),n.lineTo(e[2],e[3]),n.lineTo(e[4],e[5]),n.lineTo(e[6],e[7]),n.clip()},r.prototype.createExecutors_=function(n){for(var t in n){var e=this.executorsByZIndex_[t];void 0===e&&(this.executorsByZIndex_[t]=e={});var i=n[t];for(var o in i)e[o]=new dd(this.resolution_,this.pixelRatio_,this.overlaps_,i[o])}},r.prototype.hasExecutors=function(n){for(var t in this.executorsByZIndex_)for(var e=this.executorsByZIndex_[t],i=0,o=n.length;i<o;++i)if(n[i]in e)return!0;return!1},r.prototype.forEachFeatureAtCoordinate=function(n,t,e,i,o,a){var l=2*(i=Math.round(i))+1,u=Vt(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-e,-n[0],-n[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=Nt(l,l));var d,h=this.hitDetectionContext_;h.canvas.width!==l||h.canvas.height!==l?(h.canvas.width=l,h.canvas.height=l):c||h.clearRect(0,0,l,l),void 0!==this.renderBuffer_&&(nn(d=[1/0,1/0,-1/0,-1/0],n),er(d,t*(this.renderBuffer_+i),d));var p,f=function(r){if(void 0!==Vr[r])return Vr[r];for(var n=2*r+1,t=r*r,e=new Array(t+1),i=0;i<=r;++i)for(var o=0;o<=r;++o){var a=i*i+o*o;if(a>t)break;var l=e[a];l||(e[a]=l=[]),l.push(4*((r+i)*n+(r+o))+3),i>0&&l.push(4*((r-i)*n+(r+o))+3),o>0&&(l.push(4*((r+i)*n+(r-o))+3),i>0&&l.push(4*((r-i)*n+(r-o))+3))}for(var u=[],c=(i=0,e.length);i<c;++i)e[i]&&u.push.apply(u,e[i]);return Vr[r]=u,u}(i);function _(S,I){for(var R=h.getImageData(0,0,l,l).data,M=0,k=f.length;M<k;M++)if(R[f[M]]>0){if(!a||"Image"!==p&&"Text"!==p||-1!==a.indexOf(S)){var N=(f[M]-3)/4,W=i-N%l,U=i-(N/l|0),J=o(S,I,W*W+U*U);if(J)return J}h.clearRect(0,0,l,l);break}}var g,x,E,m,T,v=Object.keys(this.executorsByZIndex_).map(Number);for(v.sort(re),g=v.length-1;g>=0;--g){var A=v[g].toString();for(E=this.executorsByZIndex_[A],x=Wr.length-1;x>=0;--x)if(void 0!==(m=E[p=Wr[x]])&&(T=m.executeHitDetection(h,u,e,_,d)))return T}},r.prototype.getClipCoords=function(n){var t=this.maxExtent_;if(!t)return null;var e=t[0],i=t[1],o=t[2],a=t[3],l=[e,i,e,a,o,a,o,i];return We(l,0,8,2,n,l),l},r.prototype.isEmpty=function(){return Ln(this.executorsByZIndex_)},r.prototype.execute=function(n,t,e,i,o,a,l){var u=Object.keys(this.executorsByZIndex_).map(Number);u.sort(re),this.maxExtent_&&(n.save(),this.clip(n,e));var h,d,f,p,_,v,c=a||Wr;for(l&&u.reverse(),h=0,d=u.length;h<d;++h){var g=u[h].toString();for(_=this.executorsByZIndex_[g],f=0,p=c.length;f<p;++f)void 0!==(v=_[c[f]])&&v.execute(n,t,e,i,o,l)}this.maxExtent_&&n.restore()},r}(),Vr={};const as=pd;var vd=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const md=function(r){function n(t,e,i,o,a,l,u){var c=r.call(this)||this;return c.context_=t,c.pixelRatio_=e,c.extent_=i,c.transform_=o,c.viewRotation_=a,c.squaredTolerance_=l,c.userTransform_=u,c.contextFillState_=null,c.contextStrokeState_=null,c.contextTextState_=null,c.fillState_=null,c.strokeState_=null,c.image_=null,c.imageAnchorX_=0,c.imageAnchorY_=0,c.imageHeight_=0,c.imageOpacity_=0,c.imageOriginX_=0,c.imageOriginY_=0,c.imageRotateWithView_=!1,c.imageRotation_=0,c.imageScale_=[0,0],c.imageWidth_=0,c.text_="",c.textOffsetX_=0,c.textOffsetY_=0,c.textRotateWithView_=!1,c.textRotation_=0,c.textScale_=[0,0],c.textFillState_=null,c.textStrokeState_=null,c.textState_=null,c.pixelCoordinates_=[],c.tmpLocalTransform_=[1,0,0,1,0,0],c}return vd(n,r),n.prototype.drawImages_=function(t,e,i,o){if(this.image_){var a=We(t,e,i,o,this.transform_,this.pixelCoordinates_),l=this.context_,u=this.tmpLocalTransform_,c=l.globalAlpha;1!=this.imageOpacity_&&(l.globalAlpha=c*this.imageOpacity_);var h=this.imageRotation_;this.imageRotateWithView_&&(h+=this.viewRotation_);for(var d=0,f=a.length;d<f;d+=2){var p=a[d]-this.imageAnchorX_,_=a[d+1]-this.imageAnchorY_;if(0!==h||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var v=p+this.imageAnchorX_,g=_+this.imageAnchorY_;Vt(u,v,g,1,1,h,-v,-g),l.setTransform.apply(l,u),l.translate(v,g),l.scale(this.imageScale_[0],this.imageScale_[1]),l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),l.setTransform(1,0,0,1,0,0)}else l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,p,_,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(l.globalAlpha=c)}},n.prototype.drawText_=function(t,e,i,o){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var a=We(t,e,i,o,this.transform_,this.pixelCoordinates_),l=this.context_,u=this.textRotation_;for(this.textRotateWithView_&&(u+=this.viewRotation_);e<i;e+=o){var c=a[e]+this.textOffsetX_,h=a[e+1]+this.textOffsetY_;if(0!==u||1!=this.textScale_[0]||1!=this.textScale_[1]){var d=Vt(this.tmpLocalTransform_,c,h,1,1,u,-c,-h);l.setTransform.apply(l,d),l.translate(c,h),l.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&l.strokeText(this.text_,0,0),this.textFillState_&&l.fillText(this.text_,0,0),l.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&l.strokeText(this.text_,c,h),this.textFillState_&&l.fillText(this.text_,c,h)}}},n.prototype.moveToLineTo_=function(t,e,i,o,a){var l=this.context_,u=We(t,e,i,o,this.transform_,this.pixelCoordinates_);l.moveTo(u[0],u[1]);var c=u.length;a&&(c-=2);for(var h=2;h<c;h+=2)l.lineTo(u[h],u[h+1]);return a&&l.closePath(),i},n.prototype.drawRings_=function(t,e,i,o){for(var a=0,l=i.length;a<l;++a)e=this.moveToLineTo_(t,e,i[a],o,!0);return e},n.prototype.drawCircle=function(t){if(Mt(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(r,n,t){var e=r.getFlatCoordinates();if(e){var i=r.getStride();return We(e,0,e.length,i,n,t)}return null}(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],o=e[3]-e[1],a=Math.sqrt(i*i+o*o),l=this.context_;l.beginPath(),l.arc(e[0],e[1],a,0,2*Math.PI),this.fillState_&&l.fill(),this.strokeState_&&l.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},n.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},n.prototype.setTransform=function(t){this.transform_=t},n.prototype.drawGeometry=function(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}},n.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);!i||!Mt(this.extent_,i.getExtent())||(this.setStyle(e),this.drawGeometry(i))},n.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,o=e.length;i<o;++i)this.drawGeometry(e[i])},n.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},n.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},n.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Mt(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var o=t.getFlatMidpoint();this.drawText_(o,0,2,2)}}},n.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(Mt(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,o=t.getFlatCoordinates(),a=0,l=t.getEnds(),u=t.getStride();i.beginPath();for(var c=0,h=l.length;c<h;++c)a=this.moveToLineTo_(o,a,l[c],u,!1);i.stroke()}if(""!==this.text_){var d=t.getFlatMidpoints();this.drawText_(d,0,d.length,2)}}},n.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Mt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},n.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Mt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),o=0,a=t.getEndss(),l=t.getStride();e.beginPath();for(var u=0,c=a.length;u<c;++u)o=this.drawRings_(i,o,a[u],l);this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var d=t.getFlatInteriorPoints();this.drawText_(d,0,d.length,2)}}},n.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},n.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(y(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},n.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,o=t.textAlign?t.textAlign:bn;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=o&&(i.textAlign=o,e.textAlign=o),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=o,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:o,textBaseline:t.textBaseline})},n.prototype.setFillStrokeStyle=function(t,e){var i=this;if(t){var o=t.getColor();this.fillState_={fillStyle:$t(o||ae)}}else this.fillState_=null;if(e){var a=e.getColor(),l=e.getLineCap(),u=e.getLineDash(),c=e.getLineDashOffset(),h=e.getLineJoin(),d=e.getWidth(),f=e.getMiterLimit(),p=u||Zn;this.strokeState_={lineCap:void 0!==l?l:Ti,lineDash:1===this.pixelRatio_?p:p.map(function(_){return _*i.pixelRatio_}),lineDashOffset:(c||0)*this.pixelRatio_,lineJoin:void 0!==h?h:un,lineWidth:(void 0!==d?d:1)*this.pixelRatio_,miterLimit:void 0!==f?f:10,strokeStyle:$t(a||Nn)}}else this.strokeState_=null},n.prototype.setImageStyle=function(t){var e;if(t&&(e=t.getSize())){var i=t.getAnchor(),o=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*this.pixelRatio_,this.imageAnchorY_=i[1]*this.pixelRatio_,this.imageHeight_=e[1]*this.pixelRatio_,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScaleArray(),this.imageWidth_=e[0]*this.pixelRatio_}else this.image_=null},n.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:$t(i||ae)}}else this.textFillState_=null;var o=t.getStroke();if(o){var a=o.getColor(),l=o.getLineCap(),u=o.getLineDash(),c=o.getLineDashOffset(),h=o.getLineJoin(),d=o.getWidth(),f=o.getMiterLimit();this.textStrokeState_={lineCap:void 0!==l?l:Ti,lineDash:u||Zn,lineDashOffset:c||0,lineJoin:void 0!==h?h:un,lineWidth:void 0!==d?d:1,miterLimit:void 0!==f?f:10,strokeStyle:$t(a||Nn)}}else this.textStrokeState_=null;var p=t.getFont(),_=t.getOffsetX(),v=t.getOffsetY(),g=t.getRotateWithView(),x=t.getRotation(),E=t.getScaleArray(),m=t.getText(),T=t.getTextAlign(),A=t.getTextBaseline();this.textState_={font:void 0!==p?p:Fo,textAlign:void 0!==T?T:bn,textBaseline:void 0!==A?A:xi},this.text_=void 0!==m?m:"",this.textOffsetX_=void 0!==_?this.pixelRatio_*_:0,this.textOffsetY_=void 0!==v?this.pixelRatio_*v:0,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0!==x?x:0,this.textScale_=[this.pixelRatio_*E[0],this.pixelRatio_*E[1]]}else this.text_=""},n}(ts);var yd=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Hn=null,Ed=function(r){function n(t,e,i,o,a,l){var u=r.call(this)||this;return u.hitDetectionImage_=null,u.image_=t||new Image,null!==o&&(u.image_.crossOrigin=o),u.canvas_={},u.color_=l,u.unlisten_=null,u.imageState_=a,u.size_=i,u.src_=e,u}return yd(n,r),n.prototype.isTainted_=function(){if(void 0===this.tainted_&&2===this.imageState_){Hn||(Hn=Nt(1,1)),Hn.drawImage(this.image_,0,0);try{Hn.getImageData(0,0,1,1),this.tainted_=!1}catch(t){Hn=null,this.tainted_=!0}}return!0===this.tainted_},n.prototype.dispatchChangeEvent_=function(){this.dispatchEvent("change")},n.prototype.handleImageError_=function(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()},n.prototype.handleImageLoad_=function(){this.imageState_=2,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},n.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},n.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},n.prototype.getImageState=function(){return this.imageState_},n.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],i=Nt(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},n.prototype.getSize=function(){return this.size_},n.prototype.getSrc=function(){return this.src_},n.prototype.load=function(){if(0==this.imageState_){this.imageState_=1;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=Ur(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},n.prototype.replaceColor_=function(t){if(this.color_&&!this.canvas_[t]&&2===this.imageState_){var e=document.createElement("canvas");this.canvas_[t]=e,e.width=Math.ceil(this.image_.width*t),e.height=Math.ceil(this.image_.height*t);var i=e.getContext("2d");if(i.scale(t,t),i.drawImage(this.image_,0,0),i.globalCompositeOperation="multiply","multiply"===i.globalCompositeOperation||this.isTainted_())i.fillStyle=po(this.color_),i.fillRect(0,0,e.width/t,e.height/t),i.globalCompositeOperation="destination-in",i.drawImage(this.image_,0,0);else{for(var o=i.getImageData(0,0,e.width,e.height),a=o.data,l=this.color_[0]/255,u=this.color_[1]/255,c=this.color_[2]/255,h=this.color_[3],d=0,f=a.length;d<f;d+=4)a[d]*=l,a[d+1]*=u,a[d+2]*=c,a[d+3]*=h;i.putImageData(o,0,0)}}},n.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},n}(ln),xd=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const ss=function(r){function n(t){var e=this,i=t||{};(e=r.call(this,{opacity:void 0!==i.opacity?i.opacity:1,rotation:void 0!==i.rotation?i.rotation:0,scale:void 0!==i.scale?i.scale:1,displacement:void 0!==i.displacement?i.displacement:[0,0],rotateWithView:void 0!==i.rotateWithView&&i.rotateWithView})||this).anchor_=void 0!==i.anchor?i.anchor:[.5,.5],e.normalizedAnchor_=null,e.anchorOrigin_=void 0!==i.anchorOrigin?i.anchorOrigin:"top-left",e.anchorXUnits_=void 0!==i.anchorXUnits?i.anchorXUnits:"fraction",e.anchorYUnits_=void 0!==i.anchorYUnits?i.anchorYUnits:"fraction",e.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null;var c=void 0!==i.img?i.img:null,h=void 0!==i.imgSize?i.imgSize:null,d=i.src;Q(!(void 0!==d&&c),4),Q(!c||c&&h,5),(void 0===d||0===d.length)&&c&&(d=c.src||G(c)),Q(void 0!==d&&d.length>0,6);var f=void 0!==i.src?0:2;return e.color_=void 0!==i.color?vo(i.color):null,e.iconImage_=function(r,n,t,e,i,o){var a=_i.get(n,e,o);return a||(a=new Ed(r,n,t,e,i,o),_i.set(n,e,o,a)),a}(c,d,h,e.crossOrigin_,f,e.color_),e.offset_=void 0!==i.offset?i.offset:[0,0],e.offsetOrigin_=void 0!==i.offsetOrigin?i.offsetOrigin:"top-left",e.origin_=null,e.size_=void 0!==i.size?i.size:null,e}return xd(n,r),n.prototype.clone=function(){var t=this.getScale();return new n({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},n.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(t[0]=-t[0]+e[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(t[1]=-t[1]+e[1])}var i=this.getDisplacement();return t[0]-=i[0],t[1]+=i[1],this.normalizedAnchor_=t,this.normalizedAnchor_},n.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},n.prototype.getColor=function(){return this.color_},n.prototype.getImage=function(t){return this.iconImage_.getImage(t)},n.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},n.prototype.getImageSize=function(){return this.iconImage_.getSize()},n.prototype.getImageState=function(){return this.iconImage_.getImageState()},n.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},n.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if("top-left"!=this.offsetOrigin_){var e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(t[0]=i[0]-e[0]-t[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_},n.prototype.getSrc=function(){return this.iconImage_.getSrc()},n.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},n.prototype.listenImageChange=function(t){this.iconImage_.addEventListener("change",t)},n.prototype.load=function(){this.iconImage_.load()},n.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener("change",t)},n}(Ka);var te=.5,ls={Point:function(r,n,t,e,i){var l,o=t.getImage(),a=t.getText();if(i&&(r=i,l=o&&a&&a.getText()?{}:void 0),o){if(2!=o.getImageState())return;var u=r.getBuilder(t.getZIndex(),"Image");u.setImageStyle(o,l),u.drawPoint(n,e)}if(a&&a.getText()){var c=r.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a,l),c.drawText(n,e)}},LineString:function(r,n,t,e,i){var o=t.getStroke();if(o){var a=r.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawLineString(n,e)}var l=t.getText();if(l&&l.getText()){var u=(i||r).getBuilder(t.getZIndex(),"Text");u.setTextStyle(l),u.drawText(n,e)}},Polygon:function(r,n,t,e,i){var o=t.getFill(),a=t.getStroke();if(o||a){var l=r.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(o,a),l.drawPolygon(n,e)}var u=t.getText();if(u&&u.getText()){var c=(i||r).getBuilder(t.getZIndex(),"Text");c.setTextStyle(u),c.drawText(n,e)}},MultiPoint:function(r,n,t,e,i){var l,o=t.getImage(),a=t.getText();if(i&&(r=i,l=o&&a&&a.getText()?{}:void 0),o){if(2!=o.getImageState())return;var u=r.getBuilder(t.getZIndex(),"Image");u.setImageStyle(o,l),u.drawMultiPoint(n,e)}if(a&&a.getText()){var c=(i||r).getBuilder(t.getZIndex(),"Text");c.setTextStyle(a,l),c.drawText(n,e)}},MultiLineString:function(r,n,t,e,i){var o=t.getStroke();if(o){var a=r.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawMultiLineString(n,e)}var l=t.getText();if(l&&l.getText()){var u=(i||r).getBuilder(t.getZIndex(),"Text");u.setTextStyle(l),u.drawText(n,e)}},MultiPolygon:function(r,n,t,e,i){var o=t.getFill(),a=t.getStroke();if(a||o){var l=r.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(o,a),l.drawMultiPolygon(n,e)}var u=t.getText();if(u&&u.getText()){var c=(i||r).getBuilder(t.getZIndex(),"Text");c.setTextStyle(u),c.drawText(n,e)}},GeometryCollection:function(r,n,t,e,i){var a,l,o=n.getGeometriesArray();for(a=0,l=o.length;a<l;++a)(0,ls[o[a].getType()])(r,o[a],t,e,i)},Circle:function(r,n,t,e,i){var o=t.getFill(),a=t.getStroke();if(o||a){var l=r.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(o,a),l.drawCircle(n,e)}var u=t.getText();if(u&&u.getText()){var c=(i||r).getBuilder(t.getZIndex(),"Text");c.setTextStyle(u),c.drawText(n,e)}}};function Id(r,n){return parseInt(G(r),10)-parseInt(G(n),10)}function zr(r,n){return.5*r/n}function us(r,n,t,e,i,o,a){var l=!1,u=t.getImage();if(u){var c=u.getImageState();2==c||3==c?u.unlistenImageChange(i):(0==c&&u.load(),c=u.getImageState(),u.listenImageChange(i),l=!0)}return function(r,n,t,e,i,o){var a=t.getGeometryFunction()(n);if(a){var l=a.simplifyTransformed(e,i);t.getRenderer()?cs(r,l,t,n):(0,ls[l.getType()])(r,l,t,n,o)}}(r,n,t,e,o,a),l}function cs(r,n,t,e){if("GeometryCollection"!=n.getType())r.getBuilder(t.getZIndex(),"Default").drawCustom(n,e,t.getRenderer(),t.getHitDetectionRenderer());else for(var i=n.getGeometries(),o=0,a=i.length;o<a;++o)cs(r,i[o],t,e)}var kd=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ud=function(r){function n(t){var e=r.call(this,t)||this;return e.boundHandleStyleImageChange_=e.handleStyleImageChange_.bind(e),e.dirty_=!1,e.hitDetectionImageData_=null,e.renderedFeatures_=null,e.renderedRevision_=-1,e.renderedResolution_=NaN,e.renderedExtent_=[1/0,1/0,-1/0,-1/0],e.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],e.renderedCenter_=null,e.renderedProjection_=null,e.renderedRenderOrder_=null,e.replayGroup_=null,e.replayGroupChanged=!0,e.declutterExecutorGroup=null,e.clipping=!0,e}return kd(n,r),n.prototype.useContainer=function(t,e,i){i<1&&(t=null),r.prototype.useContainer.call(this,t,e,i)},n.prototype.renderWorlds=function(t,e,i){var o=e.extent,a=e.viewState,l=a.center,u=a.resolution,c=a.projection,h=a.rotation,d=c.getExtent(),f=this.getLayer().getSource(),p=e.pixelRatio,_=e.viewHints,v=!(_[0]||_[1]),g=this.context,x=Math.round(e.size[0]*p),E=Math.round(e.size[1]*p),m=f.getWrapX()&&c.canWrapX(),T=m?ft(d):null,A=m?Math.ceil((o[2]-d[2])/T)+1:1,S=m?Math.floor((o[0]-d[0])/T):0;do{var I=this.getRenderTransform(l,u,h,p,x,E,S*T);t.execute(g,1,I,h,v,void 0,i)}while(++S<A)},n.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},n.prototype.renderFrame=function(t,e){var i=t.pixelRatio,o=t.layerStatesArray[t.layerIndex];(function(r,n,t){!function(r,n,t,e,i,o,a){r[0]=n,r[1]=t,r[2]=e,r[3]=i,r[4]=o,r[5]=a}(r,n,0,0,t,0,0)})(this.pixelTransform,1/i,1/i),li(this.inversePixelTransform,this.pixelTransform);var a=tr(this.pixelTransform);this.useContainer(e,a,o.opacity);var l=this.context,u=l.canvas,c=this.replayGroup_,h=this.declutterExecutorGroup;if((!c||c.isEmpty())&&(!h||h.isEmpty()))return null;var d=Math.round(t.size[0]*i),f=Math.round(t.size[1]*i);u.width!=d||u.height!=f?(u.width=d,u.height=f,u.style.transform!==a&&(u.style.transform=a)):this.containerReused||l.clearRect(0,0,d,f),this.preRender(l,t);var p=t.viewState,v=!1,g=!0;if(o.extent&&this.clipping){var x=Xe(o.extent);(v=(g=Mt(x,t.extent))&&!tn(x,t.extent))&&this.clipUnrotated(l,t,x)}g&&this.renderWorlds(c,t),v&&l.restore(),this.postRender(l,t);var E=lr(o.opacity),m=this.container;return E!==m.style.opacity&&(m.style.opacity=E),this.renderedRotation_!==p.rotation&&(this.renderedRotation_=p.rotation,this.hitDetectionImageData_=null),this.container},n.prototype.getFeatures=function(t){return new Promise(function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var i=[this.context.canvas.width,this.context.canvas.height];mt(this.pixelTransform,i);var o=this.renderedCenter_,a=this.renderedResolution_,l=this.renderedRotation_,u=this.renderedProjection_,c=this.wrappedRenderedExtent_,h=this.getLayer(),d=[],f=i[0]*te,p=i[1]*te;d.push(this.getRenderTransform(o,a,l,te,f,p,0).slice());var _=h.getSource(),v=u.getExtent();if(_.getWrapX()&&u.canWrapX()&&!tn(v,c)){for(var g=c[0],x=ft(v),E=0;g<v[0];)--E,d.push(this.getRenderTransform(o,a,l,te,f,p,x*E).slice()),g+=x;for(E=0,g=c[2];g>v[2];)++E,d.push(this.getRenderTransform(o,a,l,te,f,p,x*E).slice()),g-=x}this.hitDetectionImageData_=function(r,n,t,e,i,o,a){var c=Nt(r[0]*te,r[1]*te);c.imageSmoothingEnabled=!1;for(var h=c.canvas,d=new md(c,te,i,null,a),f=t.length,p=Math.floor(16777215/f),_={},v=1;v<=f;++v){var g=t[v-1],x=g.getStyleFunction()||e;if(e){var E=x(g,o);if(E){Array.isArray(E)||(E=[E]);for(var T="#"+("000000"+(v*p).toString(16)).slice(-6),A=0,S=E.length;A<S;++A){var I=E[A],R=I.getGeometryFunction()(g);if(R&&Mt(i,R.getExtent())){var M=I.clone(),k=M.getFill();k&&k.setColor(T);var N=M.getStroke();N&&(N.setColor(T),N.setLineDash(null)),M.setText(void 0);var W=I.getImage();if(W&&0!==W.getOpacity()){var U=W.getImageSize();if(!U)continue;var J=Nt(U[0],U[1],void 0,{alpha:!1}),B=J.canvas;J.fillStyle=T,J.fillRect(0,0,B.width,B.height),M.setImage(new ss({img:B,imgSize:U,anchor:W.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:W.getOrigin(),opacity:1,size:W.getSize(),scale:W.getScale(),rotation:W.getRotation(),rotateWithView:W.getRotateWithView()}))}var V=M.getZIndex()||0;(j=_[V])||(_[V]=j={},j.Polygon=[],j.Circle=[],j.LineString=[],j.Point=[]),j[R.getType().replace("Multi","")].push(R,M)}}}}}for(var nt=Object.keys(_).map(Number).sort(re),tt=(v=0,nt.length);v<tt;++v){var j=_[nt[v]];for(var ot in j){var pt=j[ot];for(A=0,S=pt.length;A<S;A+=2){d.setStyle(pt[A+1]);for(var w=0,Tt=n.length;w<Tt;++w)d.setTransform(n[w]),d.drawGeometry(pt[A])}}}return c.getImageData(0,0,h.width,h.height)}(i,d,this.renderedFeatures_,h.getStyleFunction(),c,a,l)}e(function(r,n,t){var e=[];if(t){var i=Math.floor(Math.round(r[0])*te),o=Math.floor(Math.round(r[1])*te),a=4*(gt(i,0,t.width-1)+gt(o,0,t.height-1)*t.width),h=t.data[a+2]+256*(t.data[a+1]+256*t.data[a]),d=Math.floor(16777215/n.length);h&&h%d==0&&e.push(n[h/d-1])}return e}(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},n.prototype.forEachFeatureAtCoordinate=function(t,e,i,o,a){var l=this;if(this.replayGroup_){var p,u=e.viewState.resolution,c=e.viewState.rotation,h=this.getLayer(),d={},f=function(v,g,x){var E=G(v),m=d[E];if(m){if(!0!==m&&x<m.distanceSq){if(0===x)return d[E]=!0,a.splice(a.lastIndexOf(m),1),o(v,h,g);m.geometry=g,m.distanceSq=x}}else{if(0===x)return d[E]=!0,o(v,h,g);a.push(d[E]={feature:v,layer:h,geometry:g,distanceSq:x,callback:o})}},_=[this.replayGroup_];return this.declutterExecutorGroup&&_.push(this.declutterExecutorGroup),_.some(function(v){return p=v.forEachFeatureAtCoordinate(t,u,c,i,f,v===l.declutterExecutorGroup?e.declutterTree.all().map(function(g){return g.value}):null)}),p}},n.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},n.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},n.prototype.prepareFrame=function(t){var e=this.getLayer(),i=e.getSource();if(!i)return!1;var o=t.viewHints[0],a=t.viewHints[1],l=e.getUpdateWhileAnimating(),u=e.getUpdateWhileInteracting();if(!this.dirty_&&!l&&o||!u&&a)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var c=t.extent,h=t.viewState,d=h.projection,f=h.resolution,p=t.pixelRatio,_=e.getRevision(),v=e.getRenderBuffer(),g=e.getRenderOrder();void 0===g&&(g=Id);var x=h.center.slice(),E=er(c,v*f),m=E.slice(),T=[E.slice()],A=d.getExtent();if(i.getWrapX()&&d.canWrapX()&&!tn(A,t.extent)){var S=ft(A),I=Math.max(ft(E)/2,S);E[0]=A[0]-I,E[2]=A[2]+I,Ro(x,d);var R=function(r,n){var t=n.getExtent(),e=rn(r);if(n.canWrapX()&&(e[0]<t[0]||e[0]>=t[2])){var i=ft(t),a=Math.floor((e[0]-t[0])/i)*i;r[0]-=a,r[2]-=a}return r}(T[0],d);R[0]<A[0]&&R[2]<A[2]?T.push([R[0]+S,R[1],R[2]+S,R[3]]):R[0]>A[0]&&R[2]>A[2]&&T.push([R[0]-S,R[1],R[2]-S,R[3]])}if(!this.dirty_&&this.renderedResolution_==f&&this.renderedRevision_==_&&this.renderedRenderOrder_==g&&tn(this.wrappedRenderedExtent_,E))return y(this.renderedExtent_,m)||(this.hitDetectionImageData_=null,this.renderedExtent_=m),this.renderedCenter_=x,this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var k,M=new ns(zr(f,p),E,f,p);this.getLayer().getDeclutter()&&(k=new ns(zr(f,p),E,f,p));var W,N=zo();if(N){for(var U=0,J=T.length;U<J;++U){var V=Tr(T[U]);i.loadFeatures(V,uu(f),N)}W=Un(N,d)}else for(U=0,J=T.length;U<J;++U)i.loadFeatures(T[U],f,d);var j=function(r,n){var t=zr(r,n);return t*t}(f,p),nt=function(Tt){var H,_t=Tt.getStyleFunction()||e.getStyleFunction();if(_t&&(H=_t(Tt,f)),H){var Ot=this.renderFeature(Tt,j,H,M,W,k);this.dirty_=this.dirty_||Ot}}.bind(this),tt=Tr(E),ot=i.getFeaturesInExtent(tt);for(g&&ot.sort(g),U=0,J=ot.length;U<J;++U)nt(ot[U]);this.renderedFeatures_=ot;var pt=M.finish(),w=new as(E,f,p,i.getOverlaps(),pt,e.getRenderBuffer());return k&&(this.declutterExecutorGroup=new as(E,f,p,i.getOverlaps(),k.finish(),e.getRenderBuffer())),this.renderedResolution_=f,this.renderedRevision_=_,this.renderedRenderOrder_=g,this.renderedExtent_=m,this.wrappedRenderedExtent_=E,this.renderedCenter_=x,this.renderedProjection_=d,this.replayGroup_=w,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},n.prototype.renderFeature=function(t,e,i,o,a,l){if(!i)return!1;var u=!1;if(Array.isArray(i))for(var c=0,h=i.length;c<h;++c)u=us(o,t,i[c],e,this.boundHandleStyleImageChange_,a,l)||u;else u=us(o,t,i,e,this.boundHandleStyleImageChange_,a,l);return u},n}(ja);var qd=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();const jd=function(r){function n(t){return r.call(this,t)||this}return qd(n,r),n.prototype.createRenderer=function(){return new Ud(this)},n}(Wf);var s=ht(3018),de=ht(2340),hs=ht(1841),yn=ht(5288);let Ie=(()=>{class r{constructor(t,e){this.http=t,this.storage=e,this.BASE_URL=de.N.API}getAnimalTypes(){return this.http.get(`${this.BASE_URL}/animal/all_types`)}getAllAimalsForAdoption(){return this.http.get(`${this.BASE_URL}/animal/`)}filterAnimals(t){return this.http.patch(`${this.BASE_URL}/animal/filter/`,t)}getAnimalsFromOwner(t){return this.http.get(`${this.BASE_URL}/animal/owner/${t}`)}getAimalsFromMyLocation(){return this.http.get(`${this.BASE_URL}/animal/location/`,{headers:this.storage.getHeader()})}getMyAnimals(){return this.http.get(`${this.BASE_URL}/animal/my`,{headers:this.storage.getHeader()})}createAnimal(t){return this.http.post(`${this.BASE_URL}/animal/my`,t.toCreate(),{headers:this.storage.getHeader()})}getAimalsByID(t){return this.http.get(`${this.BASE_URL}/animal/${t}`)}updateAnimal(t){return this.http.put(`${this.BASE_URL}/animal/my/${t.id}`,{name:t.name,breed:t.breed,age:t.age,sex:t.sex,type:t.animal_type},{headers:this.storage.getHeader()})}deleteAnimal(t){return this.http.delete(`${this.BASE_URL}//animal/my/${t.id}`,{headers:this.storage.getHeader()})}addImage(t){return this.http.post(`${this.BASE_URL}/animal/photo`,t,{headers:this.storage.getHeader()})}removeImage(t){return this.http.delete(`${this.BASE_URL}/animal/photo/${t.id}`,{headers:this.storage.getHeader()})}addVaccine(t,e){return this.http.post(`${this.BASE_URL}/animal/vaccine`,{vaccine_name:e.vaccine_name,animal:t.id},{headers:this.storage.getHeader()})}updateVaccine(t,e){return this.http.put(`${this.BASE_URL}/animal/vaccine/${e.id}`,{vaccine_name:e.vaccine_name,animal:t.id},{headers:this.storage.getHeader()})}removeVaccine(t){return this.http.delete(`${this.BASE_URL}/animal/vaccine/${t.id}`,{headers:this.storage.getHeader()})}blockAnimal(t,e=""){return this.http.patch(`${this.BASE_URL}/animal/${t.id}/block`,{reason:e},{headers:this.storage.getHeader()})}unlockAnimal(t){return this.http.patch(`${this.BASE_URL}/animal/${t.id}/unlock`,{},{headers:this.storage.getHeader()})}}return r.\u0275fac=function(t){return new(t||r)(s.LFG(hs.eN),s.LFG(yn.g))},r.\u0275prov=s.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var Re=ht(9344);const Bd=function(){return["/app"]},Xd=function(){return{exact:!0}},Wd=function(){return["/app/meus"]},Vd=function(){return["/account"]};let Ui=(()=>{class r{constructor(t){this.storage=t}ngOnInit(){}profileImage(){const t=this.storage.getLoggedPersonData();return"image"in t&&null!=t.image?`/server${t.image}`:"/assets/images/person.png"}}return r.\u0275fac=function(t){return new(t||r)(s.Y36(yn.g))},r.\u0275cmp=s.Xpm({type:r,selectors:[["app-header"]],decls:24,vars:10,consts:[[1,"navbar","primary-color","navbar-dark","navbar-expand-lg","py-3"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["src","/assets/images/paw-logo.png","alt","","width","20%",1,"d-inline-block","align-text-top"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasNavbar","aria-controls","offcanvasNavbar",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["tabindex","-1","id","offcanvasNavbar","aria-labelledby","offcanvasNavbarLabel",1,"offcanvas","offcanvas-end","primary-color"],[1,"offcanvas-header"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","text-reset"],[1,"offcanvas-body"],[1,"navbar-nav","justify-content-end","flex-grow-1","pe-3"],["onclick","removeBodyStyle()",1,"nav-item"],[1,"nav-link",3,"routerLink","routerLinkActive","routerLinkActiveOptions"],[1,"nav-link",3,"routerLink","routerLinkActive"],[1,"nav-link",3,"routerLink"]],template:function(t,e){1&t&&(s.TgZ(0,"nav",0),s.TgZ(1,"div",1),s.TgZ(2,"a",2),s._UZ(3,"img",3),s._uU(4," Ado\xe7\xe3o "),s.qZA(),s.TgZ(5,"button",4),s._UZ(6,"span",5),s.qZA(),s.TgZ(7,"div",6),s.TgZ(8,"div",7),s.TgZ(9,"a",2),s._UZ(10,"img",3),s._uU(11," Ado\xe7\xe3o "),s.qZA(),s._UZ(12,"button",8),s.qZA(),s.TgZ(13,"div",9),s.TgZ(14,"ul",10),s.TgZ(15,"li",11),s.TgZ(16,"a",12),s._uU(17,"Home"),s.qZA(),s.qZA(),s.TgZ(18,"li",11),s.TgZ(19,"a",13),s._uU(20,"Meus animais"),s.qZA(),s.qZA(),s.TgZ(21,"li",11),s.TgZ(22,"a",14),s._uU(23,"Perfil"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(16),s.Q6J("routerLink",s.DdM(6,Bd))("routerLinkActive","router-link-active")("routerLinkActiveOptions",s.DdM(7,Xd)),s.xp6(3),s.Q6J("routerLink",s.DdM(8,Wd))("routerLinkActive","router-link-active"),s.xp6(3),s.Q6J("routerLink",s.DdM(9,Vd)))},directives:[$.yS,$.Od],styles:["@media only screen and (min-width: 892px){.navbar[_ngcontent-%COMP%]{padding:5px}}.avatar[_ngcontent-%COMP%]{border-radius:50%;object-fit:cover;background-color:#fff}.router-link-active[_ngcontent-%COMP%]{font-weight:bold;text-decoration:underline;text-underline-offset:5px;color:#fff!important}"]}),r})();function zd(r,n){if(1&r&&(s.TgZ(0,"div",12),s.TgZ(1,"button",13),s._uU(2,"Abrir"),s.qZA(),s.qZA()),2&r){const t=s.oxw();s.xp6(1),s.Q6J("routerLink",t.showAnimalString())}}const fs=function(r){return[r]};let ds=(()=>{class r{constructor(){this.showButton=!1,this.ownerEmitter=new s.vpe}ngOnInit(){}profileImage(){var t,e;return null==(null===(t=this.animal)||void 0===t?void 0:t.owner.image)?"/assets/images/avatar.png":de.N.API+(null===(e=this.animal)||void 0===e?void 0:e.owner.image)}animalImage(){var t,e;if(0==this.animal.all_photos.length){if("Cachorro"==(null===(t=this.animal)||void 0===t?void 0:t.animal_type.name))return"/assets/images/adopt-dog.png";if("Gato"==(null===(e=this.animal)||void 0===e?void 0:e.animal_type.name))return"/assets/images/adopt-cat.png"}return de.N.API+this.animal.all_photos[0].photo}showAnimalString(){return`/app/detalhes/${this.animal.id}`}selectOwner(){var t;this.ownerEmitter.emit(null===(t=this.animal)||void 0===t?void 0:t.owner.username)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=s.Xpm({type:r,selectors:[["app-animal-card"]],inputs:{animal:"animal",showButton:"showButton"},outputs:{ownerEmitter:"ownerEmitter"},decls:25,vars:18,consts:[[1,"card"],[1,"card-header",3,"routerLink"],[1,"avatar"],[1,"avatar-image",3,"src"],[1,"owner-name"],[3,"routerLink"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"text-muted"],["class","card-footer p-0",4,"ngIf"],[1,"card-footer","p-0"],[1,"btn","secondary-color","full-width","text-light",3,"routerLink"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s._UZ(3,"img",3),s.TgZ(4,"p",4),s._uU(5),s.qZA(),s.qZA(),s.qZA(),s.TgZ(6,"div",5),s._UZ(7,"img",6),s.TgZ(8,"div",7),s.TgZ(9,"h5",8),s._uU(10),s.qZA(),s.TgZ(11,"p",9),s.TgZ(12,"b"),s._uU(13,"Tipo"),s.qZA(),s._uU(14),s._UZ(15,"br"),s.TgZ(16,"b"),s._uU(17,"Ra\xe7a"),s.qZA(),s._uU(18),s._UZ(19,"br"),s.TgZ(20,"span",10),s._uU(21),s.ALo(22,"date"),s.qZA(),s._UZ(23,"br"),s.qZA(),s.qZA(),s.YNc(24,zd,3,1,"div",11),s.qZA(),s.qZA()),2&t&&(s.xp6(1),s.Q6J("routerLink",s.VKq(14,fs,"/app/detalhes/"+e.animal.id)),s.xp6(2),s.Q6J("src",e.profileImage(),s.LSH),s.xp6(2),s.Oqu(e.animal.owner.name),s.xp6(1),s.Q6J("routerLink",s.VKq(16,fs,"/app/detalhes/"+e.animal.id)),s.xp6(1),s.s9C("alt",e.animal.name),s.Q6J("src",e.animalImage(),s.LSH),s.xp6(3),s.Oqu(e.animal.name),s.xp6(4),s.hij(": ",e.animal.animal_type.name,""),s.xp6(4),s.hij(": ",e.animal.breed,""),s.xp6(3),s.hij("Registrado em ",s.xi3(22,11,e.animal.create_at,"dd/MM/yyyy"),""),s.xp6(3),s.Q6J("ngIf",1==e.showButton))},directives:[$.rH,vt.O5],pipes:[vt.uU],styles:[".card[_ngcontent-%COMP%]{margin:0;width:auto;min-width:190px}@media screen and (min-width: 792px){.card[_ngcontent-%COMP%]{min-width:200px}}@media screen and (min-width: 992px){.card[_ngcontent-%COMP%]{min-width:300px}}.card-img-top[_ngcontent-%COMP%]{width:100%;height:250px;object-fit:cover}.avatar[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center}.avatar[_ngcontent-%COMP%]   .owner-name[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center}.avatar-image[_ngcontent-%COMP%]{width:60px;height:60px;object-fit:cover;border-radius:50%;margin-right:10px}@media screen and (max-width: 768px){.avatar-image[_ngcontent-%COMP%]{width:50px;height:50px}}"]}),r})();function Hd(r,n){if(1&r){const t=s.EpF();s.TgZ(0,"div",10),s.TgZ(1,"app-animal-card",11),s.NdJ("click",function(){const o=s.CHM(t).$implicit;return s.oxw().selectAnimal(o)}),s.qZA(),s.qZA()}if(2&r){const t=n.$implicit;s.xp6(1),s.Q6J("animal",t)("showButton",!0)}}function Kd(r,n){if(1&r){const t=s.EpF();s.TgZ(0,"div",10),s.TgZ(1,"app-animal-card",12),s.NdJ("click",function(){const o=s.CHM(t).$implicit;return s.oxw().selectAnimal(o)}),s.qZA(),s.qZA()}if(2&r){const t=n.$implicit;s.xp6(1),s.Q6J("animal",t)("showButton",!0)}}let Jd=(()=>{class r{constructor(t,e,i){this.animalService=t,this.storage=e,this.toast=i,this.animals=[],this.lat=-5.090104,this.long=-42.81053,this.points=[]}ngOnInit(){var t=this;return ne(function*(){t.getAnimals()})()}createPoints(){var t=this;return ne(function*(){for(const e of t.animals)t.points.push(new Af({geometry:new pa(yr([e.owner.longitude,e.owner.latitude]))}));for(let e of t.points){const i=new jf({image:new ss({color:"#8959A8",crossOrigin:"anonymous",src:"assets/images/marker.svg",imgSize:[20,20]})});e.setStyle(i)}t.vectorSource=new Sf({features:t.points}),t.vectorLayer=new jd({source:t.vectorSource}),t.startMap()})()}startMap(){navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{this.lat=t.coords.latitude,this.long=t.coords.longitude,this.createMap(t.coords.latitude,t.coords.longitude,14)}):this.createMap(this.lat,this.long)}createMap(t,e,i){if(null==i&&(i=5),null==this.map)this.map=new rh({target:"ol-map",layers:[new Ef({source:new sf}),this.vectorLayer],view:new ue({center:yr([e,t]),zoom:i})});else{const o=new ue({center:yr([e,t]),zoom:i});this.map.setView(o)}}getAnimals(){this.storage.userIsLogged()?this.animalService.getAimalsFromMyLocation().subscribe(t=>{this.animals=t,this.createPoints()},t=>this.verifyStatusError(t)):this.animalService.getAllAimalsForAdoption().subscribe(t=>{this.animals=t,this.createPoints()},t=>this.verifyStatusError(t))}selectAnimal(t){this.selectedAnimal==t?(this.createMap(this.lat,this.long,14),this.selectedAnimal=void 0):(this.createMap(t.owner.latitude,t.owner.longitude,17),this.selectedAnimal=t)}verifyStatusError(t){if(t.status>=500)this.toast.error("Servidor indispon\xedvel");else if(406==t.status){if(t.error.errors)for(let e of t.error.errors)this.toast.error(e)}else 403==t.status?this.toast.error("Sem permiss\xe3o"):(this.toast.error("Erro interno"),console.log(t))}}return r.\u0275fac=function(t){return new(t||r)(s.Y36(Ie),s.Y36(yn.g),s.Y36(Re._W))},r.\u0275cmp=s.Xpm({type:r,selectors:[["ng-component"]],decls:16,vars:2,consts:[[1,"card","bg-light","p-0"],[1,"animal-list"],["class","mb-3",4,"ngFor","ngForOf"],["id","ol-map",1,"map-container"],["id","btn-show-animal-list","type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasAnimals","aria-controls","offcanvasAnimals",1,"btn","secondary-color","text-light","m-0"],["tabindex","-1","id","offcanvasAnimals","aria-labelledby","offcanvasAnimalsLabel",1,"offcanvas","offcanvas-start"],[1,"offcanvas-header"],["id","offcanvasAnimalsLabel",1,"offcanvas-title"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","text-reset"],[1,"offcanvas-body"],[1,"mb-3"],[3,"animal","showButton","click"],["data-bs-dismiss","offcanvas",3,"animal","showButton","click"]],template:function(t,e){1&t&&(s._UZ(0,"app-header"),s.TgZ(1,"main",0),s.TgZ(2,"aside",1),s.TgZ(3,"h5"),s._uU(4,"Animais pr\xf3ximos"),s.qZA(),s.YNc(5,Hd,2,2,"div",2),s.qZA(),s._UZ(6,"div",3),s.TgZ(7,"button",4),s._uU(8," Listar animals "),s.qZA(),s.qZA(),s.TgZ(9,"div",5),s.TgZ(10,"div",6),s.TgZ(11,"h5",7),s._uU(12,"Animais pr\xf3ximos"),s.qZA(),s._UZ(13,"button",8),s.qZA(),s.TgZ(14,"div",9),s.YNc(15,Kd,2,2,"div",2),s.qZA(),s.qZA()),2&t&&(s.xp6(5),s.Q6J("ngForOf",e.animals),s.xp6(10),s.Q6J("ngForOf",e.animals))},directives:[Ui,vt.sg,ds],styles:["main[_ngcontent-%COMP%]{height:calc(100vh - 56px)}@media screen and (min-width: 768px){main[_ngcontent-%COMP%]{margin:5vh 10vw;height:calc(80vh);display:flex;flex-direction:row}}@media screen and (min-width: 768px){#btn-show-animal-list[_ngcontent-%COMP%]{display:none}}.map-container[_ngcontent-%COMP%]{flex-grow:1}.animal-list[_ngcontent-%COMP%]{width:350px;overflow-y:auto;padding:16px}@media screen and (max-width: 768px){.animal-list[_ngcontent-%COMP%]{display:none}}"]}),r})();var Qd=ht(1481),b=ht(665),$d=ht(4889);function tp(r,n){if(1&r&&(s.TgZ(0,"pre",19),s._uU(1),s.qZA()),2&r){const t=s.oxw();s.xp6(1),s.hij("Selecionado: ",t.selected||"Todas","")}}function ep(r,n){if(1&r){const t=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"input",20),s.NdJ("click",function(){const o=s.CHM(t).$implicit;return s.oxw().selectType(o)}),s.qZA(),s.TgZ(2,"label",21),s._uU(3),s.qZA(),s._UZ(4,"br"),s.qZA()}if(2&r){const t=n.$implicit;s.xp6(1),s.s9C("id",t.id),s.s9C("value",t.id),s.xp6(1),s.s9C("for",t.id),s.xp6(1),s.Oqu(t.name)}}const np=function(){return{standalone:!1}},ip=function(){return["/app/mapa"]};let rp=(()=>{class r{constructor(t,e,i){this.animalService=t,this.locationService=e,this.toast=i,this.types=[],this.addPropEmiter=new s.vpe,this.removePropEmiter=new s.vpe,this.searchButton=new s.vpe,this.cities=[]}get citiesStr(){return this.cities.map(t=>t.name)}ngOnInit(){this.getTypes(),this.getCities()}selectLocation(){let e,t=this.cities.filter(i=>i.name==this.selected);t.length>0&&(e=t[0],this.addPropEmiter.emit({key:"city",value:e.id}))}selectType(t){this.selectedType=t,null==t?this.removePropEmiter.emit("type"):this.addPropEmiter.emit({key:"type",value:t.id})}selectSex(t){this.selectedSex=t,null==t?this.removePropEmiter.emit("sex"):this.addPropEmiter.emit({key:"sex",value:t})}search(){this.selectLocation(),this.searchButton.emit(!0)}getCities(){this.locationService.getCities().subscribe(t=>this.cities=t,t=>this.verifyStatusError(t))}getTypes(){this.animalService.getAnimalTypes().subscribe(t=>this.types=t,t=>this.verifyStatusError(t))}verifyStatusError(t){if(t.status>=500)this.toast.error("Servidor indispon\xedvel");else if(406==t.status){if(t.error.errors)for(let e of t.error.errors)this.toast.error(e)}else 403==t.status?this.toast.error("Sem permiss\xe3o"):(this.toast.error("Erro interno"),console.log(t))}}return r.\u0275fac=function(t){return new(t||r)(s.Y36(Ie),s.Y36(Qd.a),s.Y36(Re._W))},r.\u0275cmp=s.Xpm({type:r,selectors:[["app-animal-filter"]],outputs:{addPropEmiter:"addPropEmiter",removePropEmiter:"removePropEmiter",searchButton:"searchButton"},decls:39,vars:8,consts:[[1,"filter-animals-aside","card","border-0"],[1,"mb-3"],[1,"form-label"],["placeholder","Nome da cidade","onfocusout","this.value=''",1,"form-control","full-width",3,"ngModel","typeahead","ngModelOptions","ngModelChange"],["class","card card-block card-header mb-3",4,"ngIf"],[1,"text-muted"],["type","radio","name","animal_type","id","animal_type_0","value","0","checked","",3,"click"],["for","animal_type_0"],[4,"ngFor","ngForOf"],[1,"mt-3","text-muted"],["type","radio","name","animal_sex","id","animal_sex_0","value","0","checked","",3,"click"],["for","animal_sex_0"],["type","radio","name","animal_sex","id","animal_sex_1","value","1",3,"click"],["for","animal_sex_1"],["type","radio","name","animal_sex","id","animal_sex_2","value","2",3,"click"],["for","animal_sex_2"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn","secondary-color","text-light","mt-3","full-width",3,"click"],[1,"btn","my-city-animals-card","btn-light",3,"routerLink"],[1,"material-icons"],[1,"card","card-block","card-header","mb-3"],["type","radio","name","animal_type",3,"id","value","click"],[3,"for"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"form"),s.TgZ(2,"div",1),s.TgZ(3,"label",2),s._uU(4,"Selecione a cidade"),s.qZA(),s.TgZ(5,"input",3),s.NdJ("ngModelChange",function(o){return e.selected=o}),s.qZA(),s.YNc(6,tp,2,1,"pre",4),s.qZA(),s.TgZ(7,"p",5),s.TgZ(8,"b"),s._uU(9,"Tipo de animal"),s.qZA(),s.qZA(),s.TgZ(10,"div"),s.TgZ(11,"input",6),s.NdJ("click",function(){return e.selectType()}),s.qZA(),s.TgZ(12,"label",7),s._uU(13,"Todos"),s.qZA(),s._UZ(14,"br"),s.YNc(15,ep,5,4,"div",8),s.qZA(),s.TgZ(16,"p",9),s.TgZ(17,"b"),s._uU(18,"Sexo do animal"),s.qZA(),s.qZA(),s.TgZ(19,"div"),s.TgZ(20,"input",10),s.NdJ("click",function(){return e.selectSex()}),s.qZA(),s.TgZ(21,"label",11),s._uU(22,"Todos"),s.qZA(),s._UZ(23,"br"),s.TgZ(24,"input",12),s.NdJ("click",function(){return e.selectSex("M")}),s.qZA(),s.TgZ(25,"label",13),s._uU(26,"Macho"),s.qZA(),s._UZ(27,"br"),s.TgZ(28,"input",14),s.NdJ("click",function(){return e.selectSex("F")}),s.qZA(),s.TgZ(29,"label",15),s._uU(30,"F\xeamea"),s.qZA(),s._UZ(31,"br"),s.qZA(),s.qZA(),s.TgZ(32,"button",16),s.NdJ("click",function(){return e.search()}),s._uU(33,"Filtrar"),s.qZA(),s.TgZ(34,"button",17),s.TgZ(35,"b"),s._uU(36,"Ver mapa"),s.qZA(),s.TgZ(37,"span",18),s._uU(38," place "),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(5),s.Q6J("ngModel",e.selected)("typeahead",e.citiesStr)("ngModelOptions",s.DdM(6,np)),s.xp6(1),s.Q6J("ngIf",e.selected),s.xp6(9),s.Q6J("ngForOf",e.types),s.xp6(19),s.Q6J("routerLink",s.DdM(7,ip)))},directives:[b._Y,b.JL,b.F,b.Fj,b.JJ,b.On,$d.Bp,vt.O5,vt.sg,$.rH],styles:[".filter-animals-aside[_ngcontent-%COMP%]{padding:25px;width:300px}@media screen and (max-width: 768px){.filter-animals-aside[_ngcontent-%COMP%]{width:auto}}span[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.my-city-animals-card[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin:24px 0;width:100%}.my-city-animals-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;word-wrap:break-word}.my-city-animals-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:max-content}"]}),r})();function op(r,n){if(1&r){const t=s.EpF();s.TgZ(0,"app-animal-card",15),s.NdJ("ownerEmitter",function(i){return s.CHM(t),s.oxw().getAnimalsFromOwner(i)}),s.qZA()}2&r&&s.Q6J("animal",n.$implicit)}let ap=(()=>{class r{constructor(t,e){this.animalService=t,this.toast=e,this.animals=[],this.filterProps={}}ngOnInit(){this.getAllAnimals()}getAllAnimals(){this.animalService.getAllAimalsForAdoption().subscribe(t=>{this.animals=t},t=>this.verifyStatusError(t))}getAnimalsByFilters(){this.animalService.filterAnimals(this.filterProps).subscribe(t=>{this.animals=t},t=>this.verifyStatusError(t))}getAnimalsFromOwner(t){this.animalService.getAnimalsFromOwner(t).subscribe(e=>{this.animals=e},e=>this.verifyStatusError(e))}verifyStatusError(t){if(t.status>=500)this.toast.error("Servidor indispon\xedvel");else if(406==t.status){if(t.error.errors)for(let e of t.error.errors)this.toast.error(e)}else 403==t.status?this.toast.error("Sem permiss\xe3o"):(this.toast.error("Erro interno"),console.log(t))}hasFilter(){return Object.keys(this.filterProps).length>0}addFilterProp(t){this.filterProps[t.key]=t.value,console.log(this.filterProps)}removerFilterProp(t){delete this.filterProps[t],console.log(this.filterProps)}applyFilters(){this.hasFilter()?this.getAnimalsByFilters():this.getAllAnimals()}}return r.\u0275fac=function(t){return new(t||r)(s.Y36(Ie),s.Y36(Re._W))},r.\u0275cmp=s.Xpm({type:r,selectors:[["app-animals-for-adoption"]],decls:23,vars:1,consts:[[1,"mb-5"],["id","animals-for-adoption"],[1,"filter-animals","card","px-2","py-1"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasFilter","aria-controls","offcanvasFilter",1,"btn"],[1,"material-icons"],[1,"content","container"],[3,"addPropEmiter","removePropEmiter","searchButton"],[1,"animal-list"],[1,"animal-card","row","row-cols-1","row-cols-md-2","g-4"],[3,"animal","ownerEmitter",4,"ngFor","ngForOf"],["tabindex","-1","id","offcanvasFilter","aria-labelledby","offcanvasFilterLabel",1,"offcanvas","offcanvas-start"],[1,"offcanvas-header"],["id","offcanvasFilterLabel",1,"offcanvas-title"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","text-reset"],[1,"offcanvas-body"],[3,"animal","ownerEmitter"]],template:function(t,e){1&t&&(s.TgZ(0,"main",0),s._UZ(1,"app-header"),s.TgZ(2,"div",1),s.TgZ(3,"div",2),s.TgZ(4,"span"),s._uU(5,"Filtrar dados"),s.qZA(),s.TgZ(6,"button",3),s.TgZ(7,"span",4),s._uU(8,"filter_list"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(9,"div",5),s.TgZ(10,"aside"),s.TgZ(11,"app-animal-filter",6),s.NdJ("addPropEmiter",function(o){return e.addFilterProp(o)})("removePropEmiter",function(o){return e.removerFilterProp(o)})("searchButton",function(){return e.applyFilters()}),s.qZA(),s.qZA(),s.TgZ(12,"section"),s.TgZ(13,"div",7),s.TgZ(14,"div",8),s.YNc(15,op,1,1,"app-animal-card",9),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(16,"div",10),s.TgZ(17,"div",11),s.TgZ(18,"h5",12),s._uU(19,"Filtrar dados"),s.qZA(),s._UZ(20,"button",13),s.qZA(),s.TgZ(21,"div",14),s.TgZ(22,"app-animal-filter",6),s.NdJ("addPropEmiter",function(o){return e.addFilterProp(o)})("removePropEmiter",function(o){return e.removerFilterProp(o)})("searchButton",function(){return e.applyFilters()}),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(15),s.Q6J("ngForOf",e.animals))},directives:[Ui,rp,vt.sg,ds],styles:[".filter-animals[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.filter-animals[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.filter-animals[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}@media screen and (min-width: 768px){.filter-animals[_ngcontent-%COMP%]{display:none}}.animal-list[_ngcontent-%COMP%]{box-sizing:border-box}.animal-card[_ngcontent-%COMP%]{padding:0!important;margin:0}.content[_ngcontent-%COMP%]{display:flex}.content[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;position:sticky;top:24px;margin-top:24px;display:flex;flex-direction:column}.content[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]   .filter-animals-aside[_ngcontent-%COMP%]{padding:25px;width:300px}@media screen and (max-width: 768px){.content[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]{display:none}}.my-city-animals-card[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin:24px 0;width:100%}.my-city-animals-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;word-wrap:break-word}.my-city-animals-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:max-content}section[_ngcontent-%COMP%]{width:inherit}"]}),r})();var Kn=ht(3647);class sp{constructor(n,t=""){this.id=n,this.photo=t}}let ps=(()=>{class r{constructor(t,e){this.http=t,this.storage=e,this.BASE_URL=de.N.API}loggedPersonAdoptionsCreated(){return this.http.get(`${this.BASE_URL}/adoption/`,{headers:this.storage.getHeader()})}getAdoptionsFromAnimal(t){return this.http.get(`${this.BASE_URL}/adoption/${t.id}`,{headers:this.storage.getHeader()})}createAdoptionRequest(t){return this.http.post(`${this.BASE_URL}/adoption/${t.id}`,{},{headers:this.storage.getHeader()})}acceptAdoptionRequest(t,e){return this.http.put(`${this.BASE_URL}/adoption/${t.id}/accept/${e.id}`,{},{headers:this.storage.getHeader()})}rejectAdoptionRequest(t,e){return this.http.put(`${this.BASE_URL}/adoption/${t.id}/reject/${e.id}`,{},{headers:this.storage.getHeader()})}deleteAdoptionRequest(t,e){return this.http.delete(`${this.BASE_URL}/adoption/${t.id}/delete/${e.id}`,{headers:this.storage.getHeader()})}}return r.\u0275fac=function(t){return new(t||r)(s.LFG(hs.eN),s.LFG(yn.g))},r.\u0275prov=s.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class qi{constructor(){this.name="",this.breed="",this.age=0,this.adopted=!1,this.sex="",this.blocked=!1,this.create_at=new Date(Date.now()),this.all_photos=[],this.all_vaccines=[],this.blockReasons=[],this.all_adoption_received=[]}toCreate(){return{name:this.name,breed:this.breed,age:this.age,sex:this.sex,animal_type:this.animal_type}}}class lp{constructor(){this.vaccine_name="",this.date=new Date}}function up(r,n){if(1&r){const t=s.EpF();s.TgZ(0,"li",9),s.TgZ(1,"div",10),s.TgZ(2,"div",11),s._uU(3),s.qZA(),s._uU(4),s.ALo(5,"date"),s.qZA(),s.TgZ(6,"button",12),s.NdJ("click",function(){const o=s.CHM(t).$implicit,a=s.oxw(),l=s.MAs(12);return a.openModalConfirmDeleteVaccine(l,o)}),s._uU(7,"Remover"),s.qZA(),s.qZA()}if(2&r){const t=n.$implicit;s.xp6(3),s.Oqu(t.vaccine_name),s.xp6(1),s.hij(" Registrada em: ",s.xi3(5,2,t.date,"dd/MM/yyyy")," ")}}function cp(r,n){if(1&r){const t=s.EpF();s.TgZ(0,"div",13),s.TgZ(1,"p"),s._uU(2),s.qZA(),s.TgZ(3,"button",14),s.NdJ("click",function(){return s.CHM(t),s.oxw().confirmDeleteVaccine()}),s._uU(4,"Sim"),s.qZA(),s.TgZ(5,"button",14),s.NdJ("click",function(){return s.CHM(t),s.oxw().decline()}),s._uU(6,"N\xe3o"),s.qZA(),s.qZA()}if(2&r){const t=s.oxw();s.xp6(2),s.hij("Deseja remover a vacina '",null==t.selectedVaccine?null:t.selectedVaccine.vaccine_name,"'?")}}let hp=(()=>{class r{constructor(t,e,i){this.modalService=t,this.toast=e,this.animalService=i,this.vaccines=[],this.animal=new qi,this.formVaccine=this.createFormVaccine()}ngOnInit(){}createFormVaccine(){return new b.cw({name:new b.NI("",[b.kI.required,b.kI.minLength(3)])})}formIsValid(){return this.formVaccine.valid}createVaccine(){var t;const e=null===(t=this.formVaccine.get("name"))||void 0===t?void 0:t.value,i=new lp;i.vaccine_name=e,this.animalService.addVaccine(this.animal,i).subscribe(o=>{var a;this.vaccines.push(o),this.toast.success("Vacina adicionada"),null===(a=this.formVaccine.get("name"))||void 0===a||a.setValue("")},o=>this.verifyStatusError(o))}openModalConfirmDeleteVaccine(t,e){this.selectedVaccine=e,this.modalRef=this.modalService.show(t,{id:1,class:"modal-sm modal-dialog modal-dialog-scrollable"})}confirmDeleteVaccine(){null!=this.selectedVaccine?this.animalService.removeVaccine(this.selectedVaccine).subscribe(t=>{const e=this.vaccines.findIndex(i=>i.id==this.selectedVaccine.id);this.vaccines.splice(e,1),this.selectedVaccine=void 0,this.toast.success("Vacina removida"),this.decline()},t=>this.verifyStatusError(t)):this.toast.warning("Nenhuma vacina selecionada!")}decline(){var t;null===(t=this.modalRef)||void 0===t||t.hide(),this.selectedVaccine=void 0}verifyStatusError(t){if(t.status>=500)this.toast.error("Servidor indispon\xedvel");else if(406==t.status){if(t.error.errors)for(let e of t.error.errors)this.toast.error(e)}else this.toast.error(403==t.status?"Sem permiss\xe3o":"Erro interno")}}return r.\u0275fac=function(t){return new(t||r)(s.Y36(Kn.tT),s.Y36(Re._W),s.Y36(Ie))},r.\u0275cmp=s.Xpm({type:r,selectors:[["app-vaccine"]],inputs:{vaccines:"vaccines",animal:"animal"},decls:13,vars:2,consts:[[3,"formGroup"],[1,"my-3"],[1,"form-floating","mb-3"],["type","text","id","floatingInput","formControlName","name","required","","placeholder","Nome da vacina",1,"form-control"],["for","floatingInput"],["type","submit",1,"btn","full-width","primary-color","text-light",3,"click"],[1,"list-group","list-group-flush","list-group-numbered"],["class","list-group-item d-flex justify-content-between align-items-start",4,"ngFor","ngForOf"],["confirmDelete",""],[1,"list-group-item","d-flex","justify-content-between","align-items-start"],[1,"ms-2","me-auto"],[1,"fw-bold"],[1,"btn","btn-danger",3,"click"],[1,"modal-body","text-center",2,"background-color","#eceff1"],["type","button",1,"btn","btn-default",3,"click"]],template:function(t,e){1&t&&(s.TgZ(0,"form",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s._UZ(3,"input",3),s.TgZ(4,"label",4),s._uU(5,"Nome da vacina"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(6,"button",5),s.NdJ("click",function(){return e.createVaccine()}),s._uU(7,"Adicionar"),s.qZA(),s.qZA(),s._UZ(8,"hr"),s.TgZ(9,"ol",6),s.YNc(10,up,8,5,"li",7),s.qZA(),s.YNc(11,cp,7,1,"ng-template",null,8,s.W1O)),2&t&&(s.Q6J("formGroup",e.formVaccine),s.xp6(10),s.Q6J("ngForOf",e.vaccines))},directives:[b._Y,b.JL,b.sg,b.Fj,b.JJ,b.u,b.Q7,vt.sg],pipes:[vt.uU],styles:[""]}),r})();function fp(r,n){if(1&r){const t=s.EpF();s.TgZ(0,"button",9),s.NdJ("click",function(){return s.CHM(t),s.oxw().blockEmit()}),s._uU(1,"Desbloquear"),s.qZA()}}function dp(r,n){if(1&r){const t=s.EpF();s.TgZ(0,"button",9),s.NdJ("click",function(){return s.CHM(t),s.oxw().blockEmit()}),s._uU(1,"Bloquear"),s.qZA()}}function pp(r,n){1&r&&(s.TgZ(0,"div",45),s.TgZ(1,"h6",46),s._uU(2,"Adotado"),s.qZA(),s.qZA())}function _p(r,n){1&r&&(s.TgZ(0,"div",48),s.TgZ(1,"h6",46),s._uU(2,"Animal bloqueado"),s.qZA(),s.qZA())}function vp(r,n){if(1&r&&s.YNc(0,_p,3,0,"div",47),2&r){const t=s.oxw(),e=s.MAs(31);s.Q6J("ngIf",null==t.animal?null:t.animal.blocked)("ngIfElse",e)}}function gp(r,n){if(1&r&&(s.TgZ(0,"span"),s.TgZ(1,"b",51),s._uU(2),s.qZA(),s.qZA()),2&r){const t=s.oxw(2);s.xp6(2),s.Oqu(t.adoptionRequests.length)}}function mp(r,n){if(1&r&&(s.TgZ(0,"div",49),s.TgZ(1,"h6",46),s._uU(2,"Dispon\xedvel para ado\xe7\xe3o"),s.qZA(),s.YNc(3,gp,3,1,"span",50),s.qZA()),2&r){const t=s.oxw();s.xp6(3),s.Q6J("ngIf",t.adoptionRequests.length>0)}}function yp(r,n){1&r&&(s.TgZ(0,"h4",52),s._uU(1," Nenhuma imagem adicionada! "),s.qZA())}function Ep(r,n){if(1&r){const t=s.EpF();s.TgZ(0,"div",53),s._UZ(1,"img",54),s.TgZ(2,"button",55),s.NdJ("click",function(){const o=s.CHM(t).$implicit;return s.oxw().removeImage(o)}),s._uU(3,"Remover"),s.qZA(),s.qZA()}if(2&r){const t=n.$implicit,e=s.oxw();s.xp6(1),s.Q6J("src",e.formatImage(t.photo),s.LSH)}}function Tp(r,n){if(1&r){const t=s.EpF();s.TgZ(0,"div",29),s.TgZ(1,"h4",42),s._uU(2,"Fotos"),s.qZA(),s.TgZ(3,"button",31),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return null==i.modalRef?null:i.modalRef.hide()}),s.TgZ(4,"span",32),s._uU(5,"\xd7"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(6,"div",33),s._UZ(7,"img",56),s.TgZ(8,"form"),s.TgZ(9,"div",57),s.TgZ(10,"input",58),s.NdJ("change",function(i){return s.CHM(t),s.oxw().updateImage(i)}),s.qZA(),s.qZA(),s.TgZ(11,"button",59),s.NdJ("click",function(){return s.CHM(t),s.oxw().confirmImageChange()}),s._uU(12,"Enviar"),s.qZA(),s.qZA(),s.qZA()}if(2&r){const t=s.oxw();s.xp6(7),s.Q6J("src",t.imageSrc,s.LSH)}}function xp(r,n){if(1&r){const t=s.EpF();s.TgZ(0,"div",67),s.TgZ(1,"button",68),s.TgZ(2,"span",69),s.NdJ("click",function(){s.CHM(t);const i=s.oxw().$implicit;return s.oxw(3).confirmAdoptionRequest(i)}),s._uU(3,"check"),s.qZA(),s.qZA(),s.TgZ(4,"button",68),s.TgZ(5,"span",70),s.NdJ("click",function(){s.CHM(t);const i=s.oxw().$implicit;return s.oxw(3).rejectAdoptionRequest(i)}),s._uU(6,"close"),s.qZA(),s.qZA(),s.qZA()}}function Cp(r,n){if(1&r){const t=s.EpF();s.TgZ(0,"div",67),s.TgZ(1,"button",71),s.NdJ("click",function(){s.CHM(t);const i=s.oxw().$implicit;return s.oxw(3).deleteAdoptionRequest(i)}),s._uU(2,"Deletar"),s.qZA(),s.qZA()}}const Ap=function(r,n){return{adopted:r,rejected:n}};function wp(r,n){if(1&r&&(s.TgZ(0,"li",63),s.TgZ(1,"div",64),s.TgZ(2,"h5",65),s._uU(3),s.qZA(),s.TgZ(4,"p",65),s._uU(5),s.qZA(),s.qZA(),s.YNc(6,xp,7,0,"div",66),s.YNc(7,Cp,3,0,"div",66),s.qZA()),2&r){const t=n.$implicit,e=s.oxw(3);s.Q6J("ngClass",s.WLB(5,Ap,1==t.is_acepted,0==t.is_acepted)),s.xp6(3),s.Oqu(t.requester.name),s.xp6(2),s.Oqu(t.requester.contact),s.xp6(1),s.Q6J("ngIf",e.showAdoptButtons(t)),s.xp6(1),s.Q6J("ngIf",e.showDeleteAdoptButton(t))}}function Op(r,n){if(1&r&&(s.TgZ(0,"div"),s.YNc(1,wp,8,8,"li",62),s.qZA()),2&r){const t=s.oxw(2);s.xp6(1),s.Q6J("ngForOf",t.adoptionRequests)}}function Ip(r,n){if(1&r){const t=s.EpF();s.TgZ(0,"div",28),s.TgZ(1,"div",29),s.TgZ(2,"h4",30),s._uU(3,"Solicita\xe7\xf5es de ado\xe7\xe3o"),s.qZA(),s.TgZ(4,"button",31),s.NdJ("click",function(){return s.CHM(t),s.oxw().decline()}),s.TgZ(5,"span",32),s._uU(6,"\xd7"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(7,"div",60),s.TgZ(8,"ul",61),s.YNc(9,Op,2,1,"div",50),s.qZA(),s.qZA(),s.qZA()}if(2&r){const t=s.oxw();s.xp6(9),s.Q6J("ngIf",null!=t.animal)}}let Rp=(()=>{class r{constructor(t,e,i,o){this.modalService=t,this.toast=e,this.animalService=i,this.adoptionService=o,this.imageSrc="/assets/images/cat-dog.png",this.photoModel=new sp,this.editAnimal=new s.vpe,this.deleteAnimal=new s.vpe,this.blockAnimal=new s.vpe,this.adoptionRequests=[]}ngOnInit(){this.getAdoptionRequests()}profileImage(){var t,e;return null==(null===(t=this.animal)||void 0===t?void 0:t.owner.image)?"/assets/images/avatar.png":de.N.API+(null===(e=this.animal)||void 0===e?void 0:e.owner.image)}getAdoptionRequests(){this.adoptionService.getAdoptionsFromAnimal(this.animal).subscribe(t=>{this.adoptionRequests=t},t=>this.verifyStatusError(t))}formatImage(t){return de.N.API+t}animalImage(){var t,e;if(0==this.animal.all_photos.length){if("Cachorro"==(null===(t=this.animal)||void 0===t?void 0:t.animal_type.name))return"/assets/images/adopt-dog.png";if("Gato"==(null===(e=this.animal)||void 0===e?void 0:e.animal_type.name))return"/assets/images/adopt-cat.png"}return de.N.API+this.animal.all_photos[0].photo}get imageIsValid(){return!this.imageSrc.includes("/assets")}updateImage(t){if(void 0!==t&&void 0!==t.target&&t.target.files&&t.target.files[0]){const e=t.target.files[0];if(null==e.type.match(/image\/*/))return void this.toast.warning("Upload somente de imagens");if(e.size>2e6)return void this.toast.warning("O limite da imagem deve ser de 2 Megasbytes");this.file=t;const i=new FileReader;i.readAsDataURL(e),i.onload=o=>this.imageSrc=i.result}}confirmImageChange(){if(this.file.target.files&&this.file.target.files[0]){let t=new FormData;t.append("photo",this.file.target.files[0]),t.append("animal",this.animal.id.toString()),this.animalService.addImage(t).subscribe(e=>{var i;null===(i=this.animal)||void 0===i||i.all_photos.push(e),this.toast.success("Imagem adicionada"),this.decline()},e=>this.verifyStatusError(e))}}removeImage(t){this.animalService.removeImage(t).subscribe(e=>{const i=this.animal.all_photos.indexOf(t);this.animal.all_photos.splice(i,1)})}editEmit(){this.editAnimal.emit(!0)}blockEmit(){this.blockAnimal.emit(!0)}deleteEmit(){this.deleteAnimal.emit(!0)}confirmAdoptionRequest(t){null!=this.animal&&(this.animal.adopted?this.toast.warning("Animal j\xe1 adotado"):this.adoptionService.acceptAdoptionRequest(this.animal,t).subscribe(e=>{this.animal.adopted=!0,t.is_acepted=!0,this.toast.success("Solicita\xe7\xe3o aceita")},e=>this.verifyStatusError(e)))}rejectAdoptionRequest(t){null!=this.animal&&(this.animal.adopted?this.toast.warning("Animal j\xe1 adotado"):this.adoptionService.rejectAdoptionRequest(this.animal,t).subscribe(e=>{this.animal.adopted=!1,t.is_acepted=!1,this.toast.success("Solicita\xe7\xe3o rejeitada")},e=>this.verifyStatusError(e)))}deleteAdoptionRequest(t){null!=this.animal&&this.adoptionService.deleteAdoptionRequest(this.animal,t).subscribe(e=>{1==t.is_acepted&&(this.animal.adopted=!1);const i=this.adoptionRequests.indexOf(t);this.adoptionRequests.splice(i,1),this.toast.success("Solicita\xe7\xe3o deletada")},e=>this.verifyStatusError(e))}openModal(t){this.modalRef=this.modalService.show(t,{id:1,class:"modal-lg modal-dialog modal-dialog-scrollable"})}openModalConfirmDeleteVaccine(t,e){this.selectedVaccine=e,this.modalRef=this.modalService.show(t,{id:1,class:"modal-sm modal-dialog modal-dialog-scrollable"})}openImageModal(t){this.modalRef=this.modalService.show(t,{id:2,class:"modal-lg modal-dialog modal-dialog-scrollable"})}decline(){var t;null===(t=this.modalRef)||void 0===t||t.hide(),this.selectedVaccine=void 0}showAdoptButtons(t){var e;return 0==(null===(e=this.animal)||void 0===e?void 0:e.adopted)&&null==t.is_acepted}showDeleteAdoptButton(t){return null!=t.is_acepted}verifyStatusError(t){if(t.status>=500)this.toast.error("Servidor indispon\xedvel");else if(406==t.status){if(t.error.errors)for(let e of t.error.errors)this.toast.error(e)}else this.toast.error(403==t.status?"Sem permiss\xe3o":"Erro interno")}}return r.\u0275fac=function(t){return new(t||r)(s.Y36(Kn.tT),s.Y36(Re._W),s.Y36(Ie),s.Y36(ps))},r.\u0275cmp=s.Xpm({type:r,selectors:[["app-edit-animal-card"]],inputs:{animal:"animal"},outputs:{editAnimal:"editAnimal",deleteAnimal:"deleteAnimal",blockAnimal:"blockAnimal"},decls:87,vars:19,consts:[[1,"card"],[1,"card-header"],[1,"avatar"],[1,"avatar-image",3,"src"],[1,"owner-name"],[1,"dropdown"],["type","button","id","dropdownMenuOptions","data-bs-toggle","dropdown","aria-expanded","false",1,"btn"],[1,"material-icons"],["aria-labelledby","dropdownMenuOptions",1,"dropdown-menu","p-0"],[1,"dropdown-item",3,"click"],["class","dropdown-item",3,"click",4,"ngIf","ngIfElse"],["unlockTemplate",""],[1,"dropdown-divider","m-0"],[1,"card-img-top",3,"src","alt"],["class","bg-success p-2",4,"ngIf","ngIfElse"],["animalBlocked",""],["adoptAvailable",""],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center"],[1,"card-title"],[1,"btn","secondary-color","text-light",3,"click"],[1,"card-text"],[1,"text-muted"],[1,"card-footer","p-0"],[1,"btn","primary-color","text-light","full-width","m-0",3,"click"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-nested-name1",1,"modal","fade"],["parentModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","create-state-modal",1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],["class","text-center py-5",4,"ngIf"],[1,"images"],["class","image-content",4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"btn","primary-color","text-light",3,"click"],["change_image_modal",""],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-vaccine",1,"modal","fade"],["vaccineModal","bs-modal"],[1,"modal-title","pull-left"],[3,"animal","vaccines"],["showAdoptionRequests",""],[1,"bg-success","p-2"],[1,"m-0","text-light"],["class","py-2 px-3 d-flex justify-content-between bg-danger",4,"ngIf","ngIfElse"],[1,"py-2","px-3","d-flex","justify-content-between","bg-danger"],[1,"py-2","px-3","d-flex","justify-content-between","secondary-color"],[4,"ngIf"],[1,"badge","primary-color","text-light"],[1,"text-center","py-5"],[1,"image-content"],["alt","",3,"src"],[1,"btn",3,"click"],["alt","animal image","width","100%","height","400px",2,"object-fit","contain",3,"src"],[1,"my-3"],["type","file","accept","image/*","id","formFile",1,"form-control",3,"change"],["type","submit",1,"btn","full-width","primary-color","text-light",3,"click"],[1,"modal-body","p-0"],[1,"list-group"],["class","list-group-item d-flex justify-content-between align-items-center",3,"ngClass",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","justify-content-between","align-items-center",3,"ngClass"],[1,"requester-data","align-items-center"],[1,"m-0"],["class","options",4,"ngIf"],[1,"options"],[1,"btn"],[1,"material-icons","text-success",3,"click"],[1,"material-icons","text-danger",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(t,e){if(1&t){const i=s.EpF();s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s._UZ(3,"img",3),s.TgZ(4,"p",4),s._uU(5),s.qZA(),s.qZA(),s.TgZ(6,"div",5),s.TgZ(7,"button",6),s.TgZ(8,"span",7),s._uU(9,"more_vert"),s.qZA(),s.qZA(),s.TgZ(10,"ul",8),s.TgZ(11,"li"),s.TgZ(12,"button",9),s.NdJ("click",function(){return e.editEmit()}),s._uU(13,"Editar"),s.qZA(),s.qZA(),s.TgZ(14,"li"),s.YNc(15,fp,2,0,"button",10),s.YNc(16,dp,2,0,"ng-template",null,11,s.W1O),s.qZA(),s.TgZ(18,"li"),s.TgZ(19,"button",9),s.NdJ("click",function(){return e.deleteEmit()}),s._uU(20,"Deletar"),s.qZA(),s.qZA(),s.TgZ(21,"li"),s._UZ(22,"hr",12),s.qZA(),s.TgZ(23,"li"),s.TgZ(24,"button",9),s.NdJ("click",function(){return s.CHM(i),s.MAs(74).show()}),s._uU(25,"Vacinas"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s._UZ(26,"img",13),s.YNc(27,pp,3,0,"div",14),s.YNc(28,vp,1,2,"ng-template",null,15,s.W1O),s.YNc(30,mp,4,1,"ng-template",null,16,s.W1O),s.TgZ(32,"div",17),s.TgZ(33,"div",18),s.TgZ(34,"h5",19),s._uU(35),s.qZA(),s.TgZ(36,"button",20),s.NdJ("click",function(){return s.CHM(i),s.MAs(55).show()}),s._uU(37,"Foto"),s.qZA(),s.qZA(),s.TgZ(38,"p",21),s.TgZ(39,"b"),s._uU(40,"Tipo"),s.qZA(),s._uU(41),s._UZ(42,"br"),s.TgZ(43,"b"),s._uU(44,"Ra\xe7a"),s.qZA(),s._uU(45),s._UZ(46,"br"),s.TgZ(47,"span",22),s._uU(48),s.ALo(49,"date"),s.qZA(),s._UZ(50,"br"),s.qZA(),s.qZA(),s.TgZ(51,"div",23),s.TgZ(52,"button",24),s.NdJ("click",function(){s.CHM(i);const a=s.MAs(86);return e.openModal(a)}),s._uU(53,"Solicita\xe7\xf5es"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(54,"div",25,26),s.TgZ(56,"div",27),s.TgZ(57,"div",28),s.TgZ(58,"div",29),s.TgZ(59,"h4",30),s._uU(60,"Imagens"),s.qZA(),s.TgZ(61,"button",31),s.NdJ("click",function(){return s.CHM(i),s.MAs(55).hide()}),s.TgZ(62,"span",32),s._uU(63,"\xd7"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(64,"div",33),s.YNc(65,yp,2,0,"h4",34),s.TgZ(66,"div",35),s.YNc(67,Ep,4,1,"div",36),s.qZA(),s.qZA(),s.TgZ(68,"div",37),s.TgZ(69,"button",38),s.NdJ("click",function(){s.CHM(i);const a=s.MAs(72);return e.openImageModal(a)}),s._uU(70,"Adicionar"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.YNc(71,Tp,13,1,"ng-template",null,39,s.W1O),s.TgZ(73,"div",40,41),s.TgZ(75,"div",27),s.TgZ(76,"div",28),s.TgZ(77,"div",29),s.TgZ(78,"h4",42),s._uU(79,"Controle de vacinas"),s.qZA(),s.TgZ(80,"button",31),s.NdJ("click",function(){return s.CHM(i),s.MAs(74).hide()}),s.TgZ(81,"span",32),s._uU(82,"\xd7"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(83,"div",33),s._UZ(84,"app-vaccine",43),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.YNc(85,Ip,10,1,"ng-template",null,44,s.W1O)}if(2&t){const i=s.MAs(17),o=s.MAs(29);s.xp6(3),s.Q6J("src",e.profileImage(),s.LSH),s.xp6(2),s.Oqu(e.animal.owner.name),s.xp6(10),s.Q6J("ngIf",e.animal.blocked)("ngIfElse",i),s.xp6(11),s.s9C("alt",e.animal.name),s.Q6J("src",e.animalImage(),s.LSH),s.xp6(1),s.Q6J("ngIf",1==(null==e.animal?null:e.animal.adopted))("ngIfElse",o),s.xp6(8),s.Oqu(e.animal.name),s.xp6(6),s.hij(": ",e.animal.animal_type.name,""),s.xp6(4),s.hij(": ",e.animal.breed,""),s.xp6(3),s.hij("Registrado em ",s.xi3(49,16,e.animal.create_at,"dd/MM/yyyy"),""),s.xp6(17),s.Q6J("ngIf",0==e.animal.all_photos.length),s.xp6(2),s.Q6J("ngForOf",e.animal.all_photos),s.xp6(17),s.Q6J("animal",e.animal)("vaccines",e.animal.all_vaccines)}},directives:[vt.O5,Kn.oB,vt.sg,hp,b._Y,b.JL,b.F,vt.mk],pipes:[vt.uU],styles:[".card[_ngcontent-%COMP%]{margin:0}.card-img-top[_ngcontent-%COMP%]{width:100%;height:250px;object-fit:cover}.avatar[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center}.avatar[_ngcontent-%COMP%]   .owner-name[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center}.card-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.card-header[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.avatar-image[_ngcontent-%COMP%]{width:60px;height:60px;object-fit:cover;border-radius:50%;margin-right:10px}@media screen and (max-width: 768px){.avatar-image[_ngcontent-%COMP%]{width:50px;height:50px}}.card-footer[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:row;justify-content:space-evenly}.card-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;margin:0 4px}.images[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;flex-wrap:wrap;width:100%}.images[_ngcontent-%COMP%]   .image-content[_ngcontent-%COMP%]{width:230px;display:flex;flex-direction:column;justify-content:center;align-items:center;margin:8px}.images[_ngcontent-%COMP%]   .image-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.adopted[_ngcontent-%COMP%]{background-color:#c5e1a5}.rejected[_ngcontent-%COMP%]{background-color:#ffcdd2}"]}),r})();function Sp(r,n){if(1&r&&(s.TgZ(0,"option",17),s._uU(1),s.qZA()),2&r){const t=n.$implicit;s.s9C("value",t.id),s.xp6(1),s.Oqu(t.name)}}let Pp=(()=>{class r{constructor(t,e){this.toast=t,this.animalService=e,this.animalFormData=new qi,this.types=[],this.animalOutput=new s.vpe,this.formAnimal=this.createFormRegisterPerson()}ngOnInit(){this.getAnimalTypes()}setAnimalData(){var t,e,i,o,a;if(null!=this.animal){null===(t=this.formAnimal.get("name"))||void 0===t||t.setValue(this.animal.name),null===(e=this.formAnimal.get("breed"))||void 0===e||e.setValue(this.animal.breed),null===(i=this.formAnimal.get("age"))||void 0===i||i.setValue(this.animal.age),null===(o=this.formAnimal.get("sex"))||void 0===o||o.setValue(this.animal.sex);for(const l of this.types)if(l.name==this.animal.animal_type){null===(a=this.formAnimal.get("type"))||void 0===a||a.setValue(l.id);break}}}createFormRegisterPerson(){return new b.cw({name:new b.NI(this.animalFormData.name,[b.kI.required,b.kI.minLength(3)]),breed:new b.NI(this.animalFormData.breed,[b.kI.required]),age:new b.NI(this.animalFormData.age,[b.kI.required]),sex:new b.NI(this.animalFormData.sex,[b.kI.required]),type:new b.NI(this.animalFormData.animal_type,[b.kI.required])})}getAnimalTypes(){this.animalService.getAnimalTypes().subscribe(t=>{this.types=t,this.setAnimalData()},t=>this.verifyStatusError(t))}get formIsValid(){return this.formAnimal.valid}submit(){var t,e,i,o,a;const l=null===(t=this.formAnimal.get("name"))||void 0===t?void 0:t.value,u=null===(e=this.formAnimal.get("breed"))||void 0===e?void 0:e.value,c=null===(i=this.formAnimal.get("age"))||void 0===i?void 0:i.value,h=null===(o=this.formAnimal.get("sex"))||void 0===o?void 0:o.value,d=null===(a=this.formAnimal.get("type"))||void 0===a?void 0:a.value,f=new qi;f.name=l,f.breed=u,f.age=c,f.sex=h,f.animal_type=d,null==this.animal?this.animalService.createAnimal(f).subscribe(p=>{this.toast.success("Animal registrado"),this.animalOutput.emit(p)},p=>this.verifyStatusError(p)):(f.id=this.animal.id,this.animalService.updateAnimal(f).subscribe(p=>{this.toast.success("Dados atualizados"),this.animalOutput.emit(p)},p=>this.verifyStatusError(p)))}verifyStatusError(t){if(t.status>=500)this.toast.error("Servidor indispon\xedvel");else if(406==t.status){if(t.error.errors)for(let e of t.error.errors)this.toast.error(e)}else this.toast.error(403==t.status?"Sem permiss\xe3o":"Erro interno")}}return r.\u0275fac=function(t){return new(t||r)(s.Y36(Re._W),s.Y36(Ie))},r.\u0275cmp=s.Xpm({type:r,selectors:[["app-animal-form"]],inputs:{animal:"animal"},outputs:{animalOutput:"animalOutput"},decls:35,vars:2,consts:[[3,"formGroup","submit"],[1,"form-floating","mb-3"],["type","text","formControlName","name","placeholder","Nome",1,"form-control"],["for","floatingInput"],[1,"row"],[1,"col"],["type","text","formControlName","breed","placeholder","Ra\xe7a",1,"form-control"],["type","number","min","0","formControlName","age","placeholder","Idade",1,"form-control"],[1,"row","mb-3"],[1,"form-floating"],["aria-label","Tipo de animal","formControlName","type",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["for","floatingSelect"],["aria-label","Sexo do animal","formControlName","sex",1,"form-select"],["value","M"],["value","F"],[1,"btn","secondary-color","text-light","full-width"],[3,"value"]],template:function(t,e){1&t&&(s.TgZ(0,"div"),s.TgZ(1,"form",0),s.NdJ("submit",function(){return e.submit()}),s.TgZ(2,"div",1),s._UZ(3,"input",2),s.TgZ(4,"label",3),s._uU(5,"Nome"),s.qZA(),s.qZA(),s.TgZ(6,"div",4),s.TgZ(7,"div",5),s.TgZ(8,"div",1),s._UZ(9,"input",6),s.TgZ(10,"label",3),s._uU(11,"Ra\xe7a"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(12,"div",5),s.TgZ(13,"div",1),s._UZ(14,"input",7),s.TgZ(15,"label",3),s._uU(16,"Idade"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(17,"div",8),s.TgZ(18,"div",5),s.TgZ(19,"div",9),s.TgZ(20,"select",10),s.YNc(21,Sp,2,2,"option",11),s.qZA(),s.TgZ(22,"label",12),s._uU(23,"Tipo de animal"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(24,"div",5),s.TgZ(25,"div",9),s.TgZ(26,"select",13),s.TgZ(27,"option",14),s._uU(28,"Macho"),s.qZA(),s.TgZ(29,"option",15),s._uU(30,"F\xeamea"),s.qZA(),s.qZA(),s.TgZ(31,"label",12),s._uU(32,"Sexo do animal"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(33,"button",16),s._uU(34,"Salvar"),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(1),s.Q6J("formGroup",e.formAnimal),s.xp6(20),s.Q6J("ngForOf",e.types))},directives:[b._Y,b.JL,b.sg,b.Fj,b.JJ,b.u,b.qQ,b.wV,b.EJ,vt.sg,b.YN,b.Kr],styles:[""]}),r})();const Mp=["confirmDelete"];function Lp(r,n){if(1&r){const t=s.EpF();s.TgZ(0,"app-edit-animal-card",10),s.NdJ("editAnimal",function(){const o=s.CHM(t).$implicit,a=s.oxw(),l=s.MAs(14);return a.animalEditModal(l,o)})("deleteAnimal",function(){const o=s.CHM(t).$implicit;return s.oxw().deleteAnimal(o)})("blockAnimal",function(){const o=s.CHM(t).$implicit;return s.oxw().toggleBlockAnimal(o)}),s.qZA()}2&r&&s.Q6J("animal",n.$implicit)}function Zp(r,n){if(1&r){const t=s.EpF();s.TgZ(0,"div",11),s.TgZ(1,"div",12),s.TgZ(2,"h4",13),s._uU(3,"Edi\xe7\xe3o de animal"),s.qZA(),s.TgZ(4,"button",14),s.NdJ("click",function(){return s.CHM(t),s.oxw().decline()}),s.TgZ(5,"span",15),s._uU(6,"\xd7"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(7,"div",16),s.TgZ(8,"app-animal-form",17),s.NdJ("animalOutput",function(i){return s.CHM(t),s.oxw().addAnimal(i)}),s.qZA(),s.qZA(),s.qZA()}if(2&r){const t=s.oxw();s.xp6(8),s.Q6J("animal",t.selectedAnimal)}}function Fp(r,n){if(1&r){const t=s.EpF();s.TgZ(0,"div",18),s.TgZ(1,"p"),s._uU(2),s.qZA(),s.TgZ(3,"button",19),s.NdJ("click",function(){return s.CHM(t),s.oxw().deleteAnimalFromDatabase()}),s._uU(4,"Sim"),s.qZA(),s.TgZ(5,"button",19),s.NdJ("click",function(){return s.CHM(t),s.oxw().decline()}),s._uU(6,"N\xe3o"),s.qZA(),s.qZA()}if(2&r){const t=s.oxw();s.xp6(2),s.hij('Deseja deletar "',t.selectedAnimal.name,'"?')}}function Np(r,n){1&r&&(s.TgZ(0,"span"),s._uU(1," - Bloqueado"),s.qZA())}function bp(r,n){if(1&r){const t=s.EpF();s.TgZ(0,"img",17),s.NdJ("click",function(){const o=s.CHM(t).$implicit,a=s.oxw(),l=s.MAs(35);return a.showAnimal(o.photo,l)}),s.qZA()}if(2&r){const t=n.$implicit,e=s.oxw();s.Q6J("src",e.serverPhoto(t.photo),s.LSH)}}function kp(r,n){if(1&r&&(s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.ALo(3,"date"),s.qZA(),s.TgZ(4,"td"),s._uU(5),s.qZA(),s.qZA()),2&r){const t=n.$implicit;s.xp6(2),s.Oqu(s.xi3(3,2,t.date,"dd/MM/yyyy")),s.xp6(3),s.Oqu(t.vaccine_name)}}function Gp(r,n){if(1&r){const t=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"button",20),s.NdJ("click",function(){return s.CHM(t),s.oxw(2).cancelAdoption()}),s._uU(2,"Cancelar solicita\xe7\xe3o"),s.qZA(),s.qZA()}}function Up(r,n){1&r&&(s.TgZ(0,"button",22),s._uU(1,"Solicita\xe7\xe3o recusada"),s.qZA())}function qp(r,n){if(1&r&&s.YNc(0,Up,2,0,"button",21),2&r){s.oxw();const t=s.MAs(5),e=s.oxw();s.Q6J("ngIf",0==e.adotionRequestCreated.is_acepted)("ngIfElse",t)}}function Yp(r,n){1&r&&(s.TgZ(0,"button",22),s._uU(1,"Animal adotado"),s.qZA())}function jp(r,n){if(1&r&&(s.TgZ(0,"div"),s.YNc(1,Gp,3,0,"div",12),s.YNc(2,qp,1,2,"ng-template",null,18,s.W1O),s.YNc(4,Yp,2,0,"ng-template",null,19,s.W1O),s.qZA()),2&r){const t=s.MAs(3),e=s.oxw();s.xp6(1),s.Q6J("ngIf",(0==e.animalShow.adopted||null==e.animalShow.adopted)&&null==e.adotionRequestCreated.is_acepted)("ngIfElse",t)}}function Bp(r,n){if(1&r){const t=s.EpF();s.TgZ(0,"button",26),s.NdJ("click",function(){s.CHM(t);const i=s.oxw(2),o=s.MAs(37);return i.openModal(o)}),s._uU(1,"Bloquear an\xfancio"),s.qZA()}}function Xp(r,n){if(1&r){const t=s.EpF();s.TgZ(0,"div",23),s.YNc(1,Bp,2,0,"button",24),s.TgZ(2,"button",25),s.NdJ("click",function(){return s.CHM(t),s.oxw().requestAdoption()}),s._uU(3,"Solicitar ado\xe7\xe3o"),s.qZA(),s.qZA()}if(2&r){const t=s.oxw(),e=s.MAs(33);s.xp6(1),s.Q6J("ngIf",null!=t.personData&&t.personData.is_moderator&&!t.animalShow.blocked)("ngIfElse",e)}}function Wp(r,n){if(1&r){const t=s.EpF();s.TgZ(0,"button",28),s.NdJ("click",function(){return s.CHM(t),s.oxw(2).toggleBlockAnimal()}),s._uU(1,"Desbloquear an\xfancio"),s.qZA()}}function Vp(r,n){if(1&r&&s.YNc(0,Wp,2,0,"button",27),2&r){const t=s.oxw();s.Q6J("ngIf",null!=t.personData&&t.personData.is_moderator)}}function zp(r,n){if(1&r){const t=s.EpF();s.TgZ(0,"div",29),s.TgZ(1,"div",30),s.TgZ(2,"h4",31),s._uU(3,"Foto"),s.qZA(),s.TgZ(4,"button",32),s.NdJ("click",function(){return s.CHM(t),s.oxw().decline()}),s.TgZ(5,"span",33),s._uU(6,"\xd7"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(7,"div",34),s._UZ(8,"img",35),s.qZA(),s.qZA()}if(2&r){const t=s.oxw();s.xp6(8),s.s9C("src",t.selectedPhoto,s.LSH)}}function Hp(r,n){if(1&r){const t=s.EpF();s.TgZ(0,"div",29),s.TgZ(1,"div",30),s.TgZ(2,"h4",31),s._uU(3,"Bloquear an\xfancio"),s.qZA(),s.TgZ(4,"button",32),s.NdJ("click",function(){return s.CHM(t),s.oxw().decline()}),s.TgZ(5,"span",33),s._uU(6,"\xd7"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(7,"div",36),s.TgZ(8,"form",37),s.NdJ("submit",function(){return s.CHM(t),s.oxw().toggleBlockAnimal()}),s.TgZ(9,"div",38),s._UZ(10,"textarea",39),s.TgZ(11,"label",40),s._uU(12,"Motivo"),s.qZA(),s._uU(13," Por favor, informe o motivo do bloqueio. "),s.qZA(),s.TgZ(14,"div",23),s.TgZ(15,"button",41),s.NdJ("click",function(){return s.CHM(t),s.oxw().decline()}),s._uU(16,"Cancelar"),s.qZA(),s.TgZ(17,"button",42),s.NdJ("click",function(){return s.CHM(t),s.oxw().toggleBlockAnimal()}),s._uU(18,"Confirmar"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&r){const t=s.oxw();s.xp6(8),s.Q6J("formGroup",t.formBlockAnimal),s.xp6(9),s.uIk("disabled",!t.formIsValid||null)}}const Kp=[{path:"",component:ap},{path:"meus",component:(()=>{class r{constructor(t,e,i,o,a){this.animalService=t,this.storage=e,this.router=i,this.modalService=o,this.toast=a,this.animals=[],this.verifyLoggedPerson()}ngOnInit(){}verifyLoggedPerson(){this.storage.userIsLogged()?this.getAnimals():this.router.navigateByUrl("/account/login",{replaceUrl:!0})}getAnimals(){this.animalService.getMyAnimals().subscribe(t=>{this.animals.length=0,this.animals=t},t=>this.verifyStatusError(t))}verifyStatusError(t){if(console.log(t),t.status>=500)this.toast.error("Servidor indispon\xedvel");else if(406==t.status){if(t.error.errors)for(let e of t.error.errors)this.toast.error(e)}else this.toast.error(403==t.status?"Sem permiss\xe3o":"Erro interno")}animalEditModal(t,e){this.selectedAnimal=e,this.modalRef=this.modalService.show(t,{class:"modal-lg"})}deleteAnimal(t){this.decline(),this.selectedAnimal=t,this.modalRef=this.modalService.show(this.confirmDeleteAnimal,{class:"modal-sm"})}deleteAnimalFromDatabase(){this.animalService.deleteAnimal(this.selectedAnimal).subscribe(t=>{this.toast.success("Registro deletado"),this.getAnimals(),this.decline(),this.selectedAnimal=void 0},t=>this.verifyStatusError(t))}addAnimal(t){this.getAnimals(),this.decline()}toggleBlockAnimal(t){t.blocked?this.animalService.unlockAnimal(t).subscribe(e=>t.blocked=!1,e=>this.verifyStatusError(e)):this.animalService.blockAnimal(t).subscribe(e=>t.blocked=!0,e=>this.verifyStatusError(e))}decline(){var t;null===(t=this.modalRef)||void 0===t||t.hide()}}return r.\u0275fac=function(t){return new(t||r)(s.Y36(Ie),s.Y36(yn.g),s.Y36($.F0),s.Y36(Kn.tT),s.Y36(Re._W))},r.\u0275cmp=s.Xpm({type:r,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&s.Gf(Mp,5),2&t){let i;s.iGM(i=s.CRH())&&(e.confirmDeleteAnimal=i.first)}},decls:17,vars:1,consts:[[1,"mb-5"],["id","animals-for-adoption"],[1,"content","container"],[1,"card","mx-3","mt-4","p-2","data-head"],[1,"btn","secondary-color","text-light",3,"click"],[1,"animal-list"],[1,"animal-card","row","row-cols-1","row-cols-md-3","g-4"],[3,"animal","editAnimal","deleteAnimal","blockAnimal",4,"ngFor","ngForOf"],["createAnimalModal",""],["confirmDelete",""],[3,"animal","editAnimal","deleteAnimal","blockAnimal"],[1,"modal-content"],[1,"modal-header"],["id","create-state-modal",1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[3,"animal","animalOutput"],[1,"modal-body","text-center"],["type","button",1,"btn","btn-default",3,"click"]],template:function(t,e){if(1&t){const i=s.EpF();s.TgZ(0,"main",0),s._UZ(1,"app-header"),s.TgZ(2,"div",1),s.TgZ(3,"div",2),s.TgZ(4,"section"),s.TgZ(5,"div",3),s.TgZ(6,"h5"),s._uU(7,"meus animais"),s.qZA(),s.TgZ(8,"button",4),s.NdJ("click",function(){s.CHM(i);const a=s.MAs(14);return e.animalEditModal(a)}),s._uU(9,"Adicionar"),s.qZA(),s.qZA(),s.TgZ(10,"div",5),s.TgZ(11,"div",6),s.YNc(12,Lp,1,1,"app-edit-animal-card",7),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.YNc(13,Zp,9,1,"ng-template",null,8,s.W1O),s.YNc(15,Fp,7,1,"ng-template",null,9,s.W1O)}2&t&&(s.xp6(12),s.Q6J("ngForOf",e.animals))},directives:[Ui,vt.sg,Rp,Pp],styles:[".filter-animals[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.filter-animals[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.filter-animals[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}@media screen and (min-width: 768px){.filter-animals[_ngcontent-%COMP%]{display:none}}.content[_ngcontent-%COMP%]{display:flex}.content[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;position:sticky;top:24px;margin-top:24px;display:flex;flex-direction:column}.content[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]   .filter-animals-aside[_ngcontent-%COMP%]{padding:25px;width:300px}@media screen and (max-width: 768px){.content[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]{display:none}}.my-city-animals-card[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin:24px 0;width:100%}.my-city-animals-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;word-wrap:break-word}.my-city-animals-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:max-content}.data-head[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:flex-end}.animal-list[_ngcontent-%COMP%]{box-sizing:border-box}.animal-card[_ngcontent-%COMP%]{padding:0!important;margin:0}section[_ngcontent-%COMP%]{width:inherit}"]}),r})()},{path:"mapa",component:Jd},{path:"detalhes/:id",component:(()=>{class r{constructor(t,e,i,o,a,l,u){this.route=t,this.routerService=e,this.storage=i,this.animalService=o,this.adoptionService=a,this.toast=l,this.modalService=u,this.animalShow=new qi,this.selectedPhoto="",this.loggedPerson=!1,this.formBlockAnimal=this.createFormBlockAnimal()}ngOnInit(){if(null==this.animal){const t=this.route.snapshot.paramMap.get("id");if(null!=t&&0==isNaN(Number.parseInt(t))){const e=Number.parseInt(t);this.getAnimalFromDatabase(e)}else this.notFoundRedirect()}else this.animalShow=this.animal,this.verifyLoggedPerson()}ownerImage(){var t;const e=null===(t=this.animalShow.owner)||void 0===t?void 0:t.image;return null!=e?`/server${e}`:"/assets/images/person.png"}createFormBlockAnimal(){return new b.cw({reason:new b.NI("",[b.kI.required])})}get formIsValid(){return this.formBlockAnimal.valid}getAnimalFromDatabase(t){this.animalService.getAimalsByID(t).subscribe(e=>{this.animalShow=e,this.verifyLoggedPerson()},e=>this.verifyStatusError(e))}get animalImage(){var t,e;return 0==this.animalShow.all_photos.length?"Cachorro"==(null===(t=this.animalShow)||void 0===t?void 0:t.animal_type)?"/assets/images/adopt-dog.png":"Gato"==(null===(e=this.animalShow)||void 0===e?void 0:e.animal_type)?"/assets/images/adopt-cat.png":"/assets/images/cat-dog.png":de.N.API+this.animalShow.all_photos[0].photo}verifyLoggedPerson(){this.storage.userIsLogged()&&(this.loggedPerson=!0,this.personData=this.storage.getLoggedPersonData(),this.verifyAdoptionRequestCreated())}verifyAdoptionRequestCreated(){this.adoptionService.loggedPersonAdoptionsCreated().subscribe(t=>{for(const e of t)if(e.animal==this.animalShow.id){this.adotionRequestCreated=e;break}},t=>this.verifyStatusError(t))}requestAdoption(){this.loggedPerson?this.adoptionService.createAdoptionRequest(this.animalShow).subscribe(t=>{this.adotionRequestCreated=t,this.toast.success("Solicita\xe7\xe3o enviada")},t=>this.verifyStatusError(t)):this.routerService.navigateByUrl("/account/login")}cancelAdoption(){this.adoptionService.deleteAdoptionRequest(this.animalShow,this.adotionRequestCreated).subscribe(t=>{this.adotionRequestCreated=void 0,this.toast.success("Solicita\xe7\xe3o cancelada")},t=>this.verifyStatusError(t))}notFoundRedirect(){this.routerService.navigateByUrl("/404",{replaceUrl:!0})}serverPhoto(t){return`${de.N.API}${t}`}openModal(t){this.modalRef=this.modalService.show(t,{class:"modal-lg"})}showAnimal(t,e){this.selectedPhoto=this.serverPhoto(t),this.modalRef=this.modalService.show(e,{class:"modal-lg"})}toggleBlockAnimal(){var t;if(this.animalShow.blocked)this.animalService.unlockAnimal(this.animalShow).subscribe(e=>this.animalShow.blocked=!1,e=>this.verifyStatusError(e));else{const e=null===(t=this.formBlockAnimal.get("reason"))||void 0===t?void 0:t.value;this.animalService.blockAnimal(this.animalShow,e).subscribe(i=>this.animalShow.blocked=!0,i=>this.verifyStatusError(i)),this.decline()}}decline(){var t;null===(t=this.modalRef)||void 0===t||t.hide()}verifyStatusError(t){if(t.status>=500)this.toast.error("Servidor indispon\xedvel");else if(404==t.status)this.notFoundRedirect();else if(406==t.status){if(t.error.errors)for(let e of t.error.errors)this.toast.error(e)}else 403==t.status?this.toast.error("Sem permiss\xe3o"):(this.toast.error("Erro interno"),console.log(t))}}return r.\u0275fac=function(t){return new(t||r)(s.Y36($.gz),s.Y36($.F0),s.Y36(yn.g),s.Y36(Ie),s.Y36(ps),s.Y36(Re._W),s.Y36(Kn.tT))},r.\u0275cmp=s.Xpm({type:r,selectors:[["ng-component"]],inputs:{animal:"animal"},decls:38,vars:14,consts:[[1,"card","bg-light","p-0"],[1,"animal-image"],[1,"animal-header-info"],[4,"ngIf"],[1,"m-0"],[1,"animal-data"],[1,"animal-info","p-3"],[1,"images","my-4","full-width"],["alt","Animal",3,"src","click",4,"ngFor","ngForOf"],[1,"table","table-striped","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["solicitarAdocao",""],["unlockButton",""],["showAnimalTemplate",""],["blockAnimalTemplate",""],["alt","Animal",3,"src","click"],["adoptedAnimal",""],["cancelButtonDisabled",""],[1,"btn","btn-danger","full-width","py-2",3,"click"],["class","btn btn-secondary full-width py-2",4,"ngIf","ngIfElse"],[1,"btn","btn-secondary","full-width","py-2"],[1,"d-flex"],["class","btn btn-danger full-width py-2 m-2",3,"click",4,"ngIf","ngIfElse"],[1,"btn","secondary-color","text-light","full-width","py-2","m-2",3,"click"],[1,"btn","btn-danger","full-width","py-2","m-2",3,"click"],["class","btn btn-success full-width py-2 m-2",3,"click",4,"ngIf"],[1,"btn","btn-success","full-width","py-2","m-2",3,"click"],[1,"modal-content"],[1,"modal-header"],["id","create-state-modal",1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body","p-0"],["alt","Apresenta\xe7\xe3o","width","100%",3,"src"],[1,"modal-body"],[3,"formGroup","submit"],[1,"form-floating"],["placeholder","Informe o motido do bloqueio","id","floatingTextarea2","formControlName","reason",1,"form-control",2,"height","100px"],["for","floatingTextarea2"],[1,"btn","btn-default","full-width","m-2",3,"click"],[1,"btn","btn-danger","full-width","my-2",3,"click"]],template:function(t,e){if(1&t&&(s._UZ(0,"app-header"),s.TgZ(1,"main",0),s.TgZ(2,"aside",1),s.TgZ(3,"div",2),s.TgZ(4,"h1"),s._uU(5),s.YNc(6,Np,2,0,"span",3),s.qZA(),s.TgZ(7,"p",4),s._uU(8),s._UZ(9,"br"),s.TgZ(10,"b"),s._uU(11),s.qZA(),s._UZ(12,"br"),s._uU(13),s.qZA(),s.qZA(),s.qZA(),s.TgZ(14,"section",5),s.TgZ(15,"div",6),s.TgZ(16,"div",7),s.YNc(17,bp,1,1,"img",8),s.qZA(),s.TgZ(18,"table",9),s.TgZ(19,"caption"),s._uU(20,"Vacinas aplicadas"),s.qZA(),s.TgZ(21,"thead"),s.TgZ(22,"tr"),s.TgZ(23,"th",10),s._uU(24,"Data do registro"),s.qZA(),s.TgZ(25,"th",10),s._uU(26,"Nome da vacina"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(27,"tbody"),s.YNc(28,kp,6,5,"tr",11),s.qZA(),s.qZA(),s.YNc(29,jp,6,2,"div",12),s.YNc(30,Xp,4,2,"ng-template",null,13,s.W1O),s.YNc(32,Vp,1,1,"ng-template",null,14,s.W1O),s.qZA(),s.qZA(),s.qZA(),s.YNc(34,zp,9,1,"ng-template",null,15,s.W1O),s.YNc(36,Hp,19,2,"ng-template",null,16,s.W1O)),2&t){const i=s.MAs(31);s.xp6(2),s.Jzz("background-image: url(",e.animalImage,");"),s.xp6(3),s.hij("",e.animalShow.name," "),s.xp6(1),s.Q6J("ngIf",e.animalShow.blocked),s.xp6(2),s.lnq("",e.animalShow.animal_type.name," - ",e.animalShow.breed," - ",e.animalShow.age," ano(s) "),s.xp6(3),s.Oqu(null==e.animalShow.owner?null:e.animalShow.owner.name),s.xp6(2),s.hij(" ",null==e.animalShow.owner?null:e.animalShow.owner.contact," "),s.xp6(4),s.Q6J("ngForOf",e.animalShow.all_photos),s.xp6(11),s.Q6J("ngForOf",e.animalShow.all_vaccines),s.xp6(1),s.Q6J("ngIf",e.adotionRequestCreated)("ngIfElse",i)}},directives:[Ui,vt.O5,vt.sg,b._Y,b.JL,b.sg,b.Fj,b.JJ,b.u],pipes:[vt.uU],styles:["@media screen and (min-width: 768px){main[_ngcontent-%COMP%]{margin:5vh 10vw;height:calc(80vh);display:flex;flex-direction:row}}main[_ngcontent-%COMP%]   .animal-image[_ngcontent-%COMP%]{width:100%;min-height:300px;display:flex;flex-direction:column;justify-content:flex-end;background-position:center;background-repeat:no-repeat;background-size:cover}@media screen and (min-width: 768px){main[_ngcontent-%COMP%]   .animal-image[_ngcontent-%COMP%]{width:60%;height:100%;border-radius:4px 0 0 4px}}main[_ngcontent-%COMP%]   .animal-image[_ngcontent-%COMP%]   .animal-header-info[_ngcontent-%COMP%]{position:relative;top:0%;left:0;width:100%;height:50%;background-image:linear-gradient(#00000000,#000000ee);display:flex;flex-direction:column;justify-content:flex-end;padding:16px;color:#fff}main[_ngcontent-%COMP%]   .animal-data[_ngcontent-%COMP%]{width:100%}main[_ngcontent-%COMP%]   .animal-data[_ngcontent-%COMP%]   .owner-info[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}main[_ngcontent-%COMP%]   .animal-data[_ngcontent-%COMP%]   .owner-info[_ngcontent-%COMP%]   .person-avatar[_ngcontent-%COMP%]{object-fit:cover;width:75px;height:75px;border-radius:50%;margin-right:16px}main[_ngcontent-%COMP%]   .animal-data[_ngcontent-%COMP%]   .owner-info[_ngcontent-%COMP%]   .person-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}main[_ngcontent-%COMP%]   .animal-data[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]{width:95%;margin:auto;height:2px;background-color:orange;opacity:1}@media screen and (min-width: 768px){main[_ngcontent-%COMP%]   .animal-data[_ngcontent-%COMP%]{overflow-y:auto}}main[_ngcontent-%COMP%]   .animal-data[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#37474f;color:#fff}main[_ngcontent-%COMP%]   .animal-data[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]{width:100%;text-align:center}main[_ngcontent-%COMP%]   .animal-data[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:8px;margin:8px;background-color:#cfd8dc;object-fit:contain}"]}),r})()}];let Jp=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=s.oAB({type:r}),r.\u0275inj=s.cJS({imports:[[$.Bz.forChild(Kp)],$.Bz]}),r})();var Qp=ht(6727);let $p=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=s.oAB({type:r}),r.\u0275inj=s.cJS({imports:[[vt.ez,Jp,Qp.O,b.u5,b.UX]]}),r})()}}]);